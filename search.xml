<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æœºå™¨å­¦ä¹ </title>
      <link href="/2023/06/03/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
      <url>/2023/06/03/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¦»æ•£åŒ–"><a href="#ç¦»æ•£åŒ–" class="headerlink" title="ç¦»æ•£åŒ–"></a>ç¦»æ•£åŒ–</h2><h3 id="1-cut"><a href="#1-cut" class="headerlink" title="1. cut"></a>1. cut</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">labels = <span class="built_in">list</span>(<span class="string">&#x27;ABCD&#x27;</span>)</span><br><span class="line">height = np.array([<span class="number">173</span>,<span class="number">192</span>,<span class="number">186</span>,<span class="number">167</span>,<span class="number">159</span>,<span class="number">159</span>,<span class="number">176</span>,<span class="number">160</span>,<span class="number">162</span>,<span class="number">167</span>])</span><br><span class="line">height = pd.cut(height,<span class="number">4</span>,labels=labels)</span><br><span class="line"><span class="built_in">print</span>(height)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">[<span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;A&#x27;</span>]</span><br><span class="line">Categories (<span class="number">4</span>, <span class="built_in">object</span>): [<span class="string">&#x27;A&#x27;</span> &lt; <span class="string">&#x27;B&#x27;</span> &lt; <span class="string">&#x27;C&#x27;</span> &lt; <span class="string">&#x27;D&#x27;</span>]</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h3 id="2-qcut"><a href="#2-qcut" class="headerlink" title="2. qcut"></a>2. qcut</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ¯ä¸€æ®µéƒ½æ˜¯å‡åˆ†             </span></span><br><span class="line">height = np.array([<span class="number">173</span>,<span class="number">192</span>,<span class="number">186</span>,<span class="number">167</span>,<span class="number">159</span>,<span class="number">159</span>,<span class="number">176</span>,<span class="number">160</span>,<span class="number">162</span>,<span class="number">167</span>])</span><br><span class="line">height = pd.qcut(height,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(height)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">[(<span class="number">167.0</span>, <span class="number">175.25</span>], (<span class="number">175.25</span>, <span class="number">192.0</span>], (<span class="number">175.25</span>, <span class="number">192.0</span>], (<span class="number">160.5</span>, <span class="number">167.0</span>], (<span class="number">158.999</span>, <span class="number">160.5</span>], (<span class="number">158.999</span>, <span class="number">160.5</span>], (<span class="number">175.25</span>, <span class="number">192.0</span>], (<span class="number">158.999</span>, <span class="number">160.5</span>], (<span class="number">160.5</span>, <span class="number">167.0</span>], (<span class="number">160.5</span>, <span class="number">167.0</span>]]</span><br><span class="line">Categories (<span class="number">4</span>, interval[float64, right]): [(<span class="number">158.999</span>, <span class="number">160.5</span>] &lt; (<span class="number">160.5</span>, <span class="number">167.0</span>] &lt; (<span class="number">167.0</span>, <span class="number">175.25</span>] &lt;</span><br><span class="line">                                           (<span class="number">175.25</span>, <span class="number">192.0</span>]]</span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h2 id="å“‘å˜é‡ç¼–ç "><a href="#å“‘å˜é‡ç¼–ç " class="headerlink" title="å“‘å˜é‡ç¼–ç "></a>å“‘å˜é‡ç¼–ç </h2><p>å¯¹äºéœ€è¦åˆ†ç±»çš„å˜é‡è¿›è¡Œå“‘å˜é‡ç¼–ç æˆ–è€…one hotç¼–ç ä»¥æ–¹ä¾¿è·ç¦»æˆ–ç›¸ä¼¼åº¦çš„è®¡ç®—</p><p>eg, æ€§åˆ«/æ˜ŸæœŸ/é¢œè‰²ç­‰åˆ†ç±»å˜é‡çš„åº¦é‡</p><p>pandasåº“ä¸­çš„get_dummies()å‡½æ•°å¯ä»¥å®ç°åˆ†ç±»å˜é‡çš„å“‘å˜é‡ç¼–ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">gender = np.array([<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="literal">None</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;F&#x27;</span>],prefix=<span class="string">&#x27;Gender&#x27;</span>)</span><br><span class="line">ybl = pd.get_dummies(gender)</span><br><span class="line"><span class="built_in">print</span>(ybl)</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">   Gender_F  Gender_M</span><br><span class="line"><span class="number">0</span>         <span class="number">0</span>         <span class="number">1</span></span><br><span class="line"><span class="number">1</span>         <span class="number">1</span>         <span class="number">0</span></span><br><span class="line"><span class="number">2</span>         <span class="number">0</span>         <span class="number">1</span></span><br><span class="line"><span class="number">3</span>         <span class="number">1</span>         <span class="number">0</span></span><br><span class="line"><span class="number">4</span>         <span class="number">0</span>         <span class="number">0</span></span><br><span class="line"><span class="number">5</span>         <span class="number">0</span>         <span class="number">1</span></span><br><span class="line"><span class="number">6</span>         <span class="number">1</span>         <span class="number">0</span></span><br><span class="line"><span class="number">7</span>         <span class="number">0</span>         <span class="number">1</span></span><br><span class="line"><span class="number">8</span>         <span class="number">1</span>         <span class="number">0</span></span><br><span class="line"></span><br><span class="line">*/</span><br></pre></td></tr></table></figure><h1 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h1><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚æœ‰ğŸššå’ŒğŸš—ï¼Œæˆ‘æ€ä¹ˆè®©æœºå™¨å»è¯†åˆ«ï¼Ÿ</span><br></pre></td></tr></table></figure><p><img src="E:\Hexo-Blog\piccode\PicCode\img\Machine\machine_base_01.webp" alt="image-20230601190609584" style="zoom:33%;" /></p><ul><li><p>ç‰¹å¾ï¼ˆç»´åº¦ï¼‰    Feature</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è½¦é•¿   è½¦å®½   è½¦é«˜</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±æ˜¯åˆ¤åˆ«æ˜¯å¦ä¸ºå¡è½¦è¿˜æ˜¯è½¿è½¦ï¼Œso æˆ‘ä»¬ä¹Ÿç§°å®ƒæœ‰ä¸‰ä¸ªç»´åº¦</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601190246118.png" alt="image-20230601190246118" style="zoom:33%;" /></p></li><li><p>ç®—æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘ç°åœ¨çŸ¥é“äº†è½¦å®½å’Œè½¦é«˜å»åˆ¤æ–­å¡è½¦è¿˜æ˜¯è½¿è½¦ï¼Œåªéœ€è¦æ ¹æ®å·²æœ‰çš„æ ·æœ¬ç©ºé—´å»åˆ¤æ–­è·ç¦»ä»–ä»¬çš„è¿œè¿‘å³å¯</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601190530813.png" alt="image-20230601190530813" style="zoom:33%;" /></p></li><li><p>æ ‡ç­¾     Label</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å°±æ˜¯å¡è½¦å’Œè´§è½¦</span><br></pre></td></tr></table></figure></li><li><p>é¢„æµ‹    Prediction</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœªçŸ¥çš„æ ‡ç­¾ï¼Œä»å·²çŸ¥çš„ç‰¹å¾ä¸­é¢„æµ‹å‡ºæ¥</span><br></pre></td></tr></table></figure></li></ul><h1 id="ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ "><a href="#ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ " class="headerlink" title="ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ "></a>ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ </h1><h2 id="ç›‘ç£å­¦ä¹ "><a href="#ç›‘ç£å­¦ä¹ " class="headerlink" title="ç›‘ç£å­¦ä¹ "></a>ç›‘ç£å­¦ä¹ </h2><p>ç›‘ç£å­¦ä¹ æ˜¯ä»¥ä»»åŠ¡ä¸ºé©±åŠ¨çš„æ–¹æ³•</p><p>è¿™é‡Œä»»åŠ¡ â€”â€”-&gt; å°±æ˜¯æ ‡ç­¾ï¼ˆåˆ¤æ–­æ˜¯å¦ä¸ºğŸšš, åˆ¤æ–­ç™¾å…¬é‡Œæ²¹è€—ä¸ºå¤šå°‘ï¼‰</p><p>è¿™é‡Œå°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œéç›‘ç£å­¦ä¹ å°±æ˜¯æ²¡æœ‰æ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é¢„æµ‹è‚¡ç¥¨</span><br><span class="line">é¢„æµ‹æŸäºº50å²å¾—æŸç—…çš„å¯èƒ½</span><br><span class="line">åˆ¤æ–­ç‰©ä½“æ˜¯ä»€ä¹ˆ</span><br></pre></td></tr></table></figure><h3 id="åˆ†ç±»ä»»åŠ¡ï¼ˆç¦»æ•£ï¼‰"><a href="#åˆ†ç±»ä»»åŠ¡ï¼ˆç¦»æ•£ï¼‰" class="headerlink" title="åˆ†ç±»ä»»åŠ¡ï¼ˆç¦»æ•£ï¼‰"></a>åˆ†ç±»ä»»åŠ¡ï¼ˆç¦»æ•£ï¼‰</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601191124148.png" alt="image-20230601191124148" style="zoom: 50%;" /></p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601191318163.png" alt="image-20230601191318163" style="zoom:50%;" /></p><h3 id="å›å½’ä»»åŠ¡ï¼ˆè¿ç»­ï¼‰"><a href="#å›å½’ä»»åŠ¡ï¼ˆè¿ç»­ï¼‰" class="headerlink" title="å›å½’ä»»åŠ¡ï¼ˆè¿ç»­ï¼‰"></a>å›å½’ä»»åŠ¡ï¼ˆè¿ç»­ï¼‰</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601191218514.png" alt="image-20230601191218514" style="zoom:50%;" /></p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601191450551.png" alt="image-20230601191450551" style="zoom:50%;" /></p><h2 id="éç›‘ç£å­¦ä¹ "><a href="#éç›‘ç£å­¦ä¹ " class="headerlink" title="éç›‘ç£å­¦ä¹ "></a>éç›‘ç£å­¦ä¹ </h2><p>å°±æ˜¯æ²¡æœ‰æ ‡ç­¾ï¼Œè®©ä½ èƒ¡ä¹±æ¨æµ‹</p><ul><li>æ¯”å¦‚ä½ å»ç™¾åº¦æœç´¢æŸä¸ªä¸œè¥¿ï¼Œä»–ä¼šé¢„æµ‹ä½ æ˜¯ä¸æ˜¯æƒ³ä¹°ï¼Œæˆ–è€…æƒ³è¦äº†è§£ï¼Œå°±ä¼šç»™ä½ æ¨é€é“¾æ¥</li><li>åˆ†æç”¨æˆ·è¡Œä¸ºï¼Œæ¸¸æˆæ°ªé‡‘ï¼Œå¤§ä½¬å°±è¢«å‰²éŸ­èœï¼Œå¤§æ•°æ®æ€ç†Ÿ</li><li>åŸºå› ç»„ï¼Œåˆ¤æ–­æ¯ä¸€ä¸²åŸºå› å¯¹äººç±»çš„å½±å“</li></ul><h3 id="èšç±»"><a href="#èšç±»" class="headerlink" title="èšç±»"></a>èšç±»</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601192117920.png" alt="image-20230601192117920"></p><h1 id="è®­ç»ƒï¼ŒéªŒè¯ï¼Œæµ‹è¯•ä¸è¯„ä¼°"><a href="#è®­ç»ƒï¼ŒéªŒè¯ï¼Œæµ‹è¯•ä¸è¯„ä¼°" class="headerlink" title="è®­ç»ƒï¼ŒéªŒè¯ï¼Œæµ‹è¯•ä¸è¯„ä¼°"></a>è®­ç»ƒï¼ŒéªŒè¯ï¼Œæµ‹è¯•ä¸è¯„ä¼°</h1><p>æœ‰ç‚¹ä¹±ä¸ƒå…«ç³Ÿçš„ä¸å¥½ç†è§£  å¤šå†™å†™ä»£ç å°±æ‡‚äº†</p><h2 id="1-è®­ç»ƒ"><a href="#1-è®­ç»ƒ" class="headerlink" title="1.è®­ç»ƒ"></a>1.è®­ç»ƒ</h2><p>æ€»ç»“æ•°æ®çš„ä¿¡æ¯ï¼Œä»ä¸­å­¦ä¹ æœ‰ç”¨çš„è§„å¾‹</p><h2 id="2-éªŒè¯"><a href="#2-éªŒè¯" class="headerlink" title="2.éªŒè¯"></a>2.éªŒè¯</h2><p>ä¸å‚ä¸æ¨¡å‹å‚æ•°çš„æ±‚è§£ ä½†æ˜¯ å‚ä¸æ¨¡å‹çš„å­¦ä¹ è¿‡ç¨‹</p><p>æ›´å¤šçš„æ˜¯å±äºè®­ç»ƒè¿‡ç¨‹</p><p><strong><em>æˆ‘ç†è§£çš„å°±æ˜¯ä¸€ä¸ªåšè¯¾åä½œä¸šçš„è¿‡ç¨‹ï¼ŒæŸ¥ç¼ºè¡¥æ¼</em></strong></p><h2 id="3-æµ‹è¯•"><a href="#3-æµ‹è¯•" class="headerlink" title="3.æµ‹è¯•"></a>3.æµ‹è¯•</h2><p>ä¸è®­ç»ƒè¿‡ç¨‹å’Œæ¨¡å‹ç»ç¼˜ç”¨æ¥è¯„ä¼°æ¨¡å‹çš„æœ€ç»ˆæ•ˆæœ</p><p>å±äºæµ‹è¯•è¿‡ç¨‹</p><p><strong><em>æˆ‘ç†è§£å°±æ˜¯æœŸæœ«è€ƒè¯•</em></strong></p><h2 id="4-è¯„ä¼°"><a href="#4-è¯„ä¼°" class="headerlink" title="4.è¯„ä¼°"></a>4.è¯„ä¼°</h2><p>æ ¹æ®æŒ‡æ ‡æ¥åˆ¤æ–­æ¨¡å‹æ˜¯å¥½æ˜¯å</p><ul><li><p>è…¾è®¯åŒ»ç–—-ç™Œç—‡é¢„æµ‹100000</p><ol><li><p>è®­ç»ƒé›†80000</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”¨äº è®­ç»ƒå’ŒéªŒè¯</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•é›†20000</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”¨äº è¯„ä¼°</span><br></pre></td></tr></table></figure></li></ol></li></ul><h1 id="KNNç®—æ³•"><a href="#KNNç®—æ³•" class="headerlink" title="KNNç®—æ³•"></a>KNNç®—æ³•</h1><p>è¿‘æœ±è€…èµ¤ï¼Œè¿‘å¢¨è€…é»‘</p><h2 id="1-KNNç®€è¿°ä¸è·ç¦»åº¦é‡"><a href="#1-KNNç®€è¿°ä¸è·ç¦»åº¦é‡" class="headerlink" title="1.KNNç®€è¿°ä¸è·ç¦»åº¦é‡"></a>1.KNNç®€è¿°ä¸è·ç¦»åº¦é‡</h2><p>KNNï¼ˆK-Nearest Neighbors,Kè¿‘ä¸´ç®—æ³•ï¼‰ï¼Œ æœºå™¨å­¦ä¹ ä¸­æœ€ç®€å•çš„ç®—æ³•</p><p>â€‹                                    <strong><em>â€ç¦»è°è¿›ï¼Œå°±æ˜¯è°â€œ</em></strong></p><p>ç”¨äººçœ¼çœ‹å°±çŸ¥é“è¿™ä¸ªç»¿è‰²ä¸‰è§’å½¢å°±æ˜¯è½¿è½¦</p><p>ä½†æ˜¯æœºå™¨æ²¡çœ¼ï¼Œåªèƒ½é ç²¾å¯†çš„è®¡ç®—æ‰€ä»¥è¿™é‡Œå°±å¼•å‡ºæ¥äº†è·ç¦»åº¦é‡çš„ç®—æ³•</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601195802325.png" alt="image-20230601195802325"></p><h3 id="1-1-è·ç¦»åº¦é‡"><a href="#1-1-è·ç¦»åº¦é‡" class="headerlink" title="1.1 è·ç¦»åº¦é‡"></a>1.1 è·ç¦»åº¦é‡</h3><script type="math/tex; mode=display">æ¬§å¼è·ç¦»(L2)=sqrt((x1-x2)^2 + (y1-y2)^2)</script><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601200248895.png" alt="image-20230601200248895"></p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601200653325.png" alt="image-20230601200653325" style="zoom: 80%;" /></p><h4 id="1-æ¬§å¼è·ç¦»"><a href="#1-æ¬§å¼è·ç¦»" class="headerlink" title="1.æ¬§å¼è·ç¦»"></a>1.æ¬§å¼è·ç¦»</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç©ºé—´ä¹‹ä¸­ ä¸¤ç‚¹ä¹‹é—´çš„ç›´çº¿è·ç¦»</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601200820970.png" alt="image-20230601200820970" style="zoom: 67%;" /></p><h4 id="2-æ›¼å“ˆé¡¿è·ç¦»"><a href="#2-æ›¼å“ˆé¡¿è·ç¦»" class="headerlink" title="2.æ›¼å“ˆé¡¿è·ç¦»"></a>2.æ›¼å“ˆé¡¿è·ç¦»</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°±æ˜¯æˆ‘èµ°è·¯ï¼Œä¸å¯èƒ½æ²¿ç€ç›´çº¿èµ°ï¼Œæ‰€ä»¥æˆ‘ä¼šæ‹ç€å¼¯èµ°</span><br><span class="line">è¿™ç§æ–¹å¼å°±åƒåœ¨æ›¼å“ˆé¡¿çš„è¡—åŒºé‡Œé¢å»è¡Œèµ°ï¼Œæœ€ç»ˆåˆ°è¾¾ç›®çš„åœ°çš„è·ç¦»</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601201204108.png" alt="image-20230601201204108"></p><h5 id="æ¬§å¼è·ç¦»å’Œæ›¼å“ˆé¡¿è·ç¦»çš„ä½¿ç”¨"><a href="#æ¬§å¼è·ç¦»å’Œæ›¼å“ˆé¡¿è·ç¦»çš„ä½¿ç”¨" class="headerlink" title="æ¬§å¼è·ç¦»å’Œæ›¼å“ˆé¡¿è·ç¦»çš„ä½¿ç”¨"></a>æ¬§å¼è·ç¦»å’Œæ›¼å“ˆé¡¿è·ç¦»çš„ä½¿ç”¨</h5><ul><li><p>æ¬§å¼è·ç¦»éƒ½æ¯”è¾ƒå¯ä»¥é€‚ç”¨</p></li><li><p>æ›¼å“ˆé¡¿è·ç¦»</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">é€‚ç”¨äºï¼š</span><br><span class="line">æ±‚è§£è¿‡ç¨‹ä¸­ä½¿å¾—ç¦»ç¾¤ç‚¹çš„å½±å“æ›´å°</span><br><span class="line">ç»´åº¦æé«˜çš„æ•°æ® ---&gt;   ç‰¹å¾çš„æ•°é‡</span><br><span class="line">æ›´é€‚åˆæ•°æ®ç»´åº¦æ²¡æœ‰å½’ä¸€åŒ–/ä¸å¹³è¡¡</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-æ˜æ°è·ç¦»"><a href="#3-æ˜æ°è·ç¦»" class="headerlink" title="3.æ˜æ°è·ç¦»"></a>3.æ˜æ°è·ç¦»</h4><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601201711733.png" alt="image-20230601201711733"></p><h3 id="1-2-ä»£ç åˆä½“éªŒ"><a href="#1-2-ä»£ç åˆä½“éªŒ" class="headerlink" title="1.2 ä»£ç åˆä½“éªŒ"></a>1.2 ä»£ç åˆä½“éªŒ</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601202516052.png" alt="image-20230601202516052"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®é›†</span></span><br><span class="line">A = np.array([<span class="number">4.8</span>, <span class="number">2.2</span>])</span><br><span class="line">B = np.array([<span class="number">4.7</span>, <span class="number">2.1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¬§å¼è·ç¦»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cal_dist_L2</span>(<span class="params">A, B</span>):</span><br><span class="line">    distance_L2 = np.sqrt(np.<span class="built_in">sum</span>((A-B) ** <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> distance_L2</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(cal_dist_L2(A, B))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›¼å“ˆé¡¿è·ç¦»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">manhattan_distance</span>(<span class="params">A, B</span>):</span><br><span class="line">    distance = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(A)):</span><br><span class="line">        distance += <span class="built_in">abs</span>(A[i] - B[i])</span><br><span class="line">    <span class="keyword">return</span> distance</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(manhattan_distance(A, B))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜æ°è·ç¦»</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">minkowski_distance</span>(<span class="params">A, B, p</span>):</span><br><span class="line">    distance = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(A)):</span><br><span class="line">        distance += np.sqrt(<span class="built_in">abs</span>(A[i] - B[i]) ** p) ** p</span><br><span class="line">    <span class="keyword">return</span> distance</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(minkowski_distance(A, B, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#0.1414213562373093</span></span><br><span class="line"><span class="comment">#0.19999999999999973</span></span><br><span class="line"><span class="comment">#0.01999999999999995</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºæ¥ç®—æ³•ä¸åŒç›¸å·®çš„ç»“æœå¾ˆå¤§</p><p>æ‰€ä»¥çœ‹é‚£äº›æ¯”èµ›ä¸­çš„æ’åå°±æ˜¯å¯¹æ•°æ®çš„å¤„ç†å’Œç®—æ³•çš„é€‰æ‹©ä¸åŒè€Œå¯¼è‡´å¾—åˆ†ç›¸å·®</p><h2 id="2-KNNç®—æ³•å®ç°æ­¥éª¤"><a href="#2-KNNç®—æ³•å®ç°æ­¥éª¤" class="headerlink" title="2.KNNç®—æ³•å®ç°æ­¥éª¤"></a>2.KNNç®—æ³•å®ç°æ­¥éª¤</h2><h3 id="2-1-ç®—æ³•åŸºæœ¬æ€è·¯"><a href="#2-1-ç®—æ³•åŸºæœ¬æ€è·¯" class="headerlink" title="2.1 ç®—æ³•åŸºæœ¬æ€è·¯"></a>2.1 ç®—æ³•åŸºæœ¬æ€è·¯</h3><ol><li>è®¡ç®—è·ç¦»</li><li>æ’åº</li><li>å–å‰Kä¸ªæ ·æœ¬ â€”â€”&gt; è¶…å‚æ•°ï¼šKå€¼ï¼Œè°ƒå‚å’Œä¼˜åŒ–</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¿™ç©æ„å°±æ˜¯</span><br><span class="line">1.é¦–å…ˆæˆ‘å…ˆç”¨è·ç¦»åº¦é‡å…¬å¼å»è®¡ç®—æ¯ä¸ªæ ·æœ¬ç©ºé—´ä¸­ä¸æ ·æœ¬ä¹‹é—´çš„è·ç¦»</span><br><span class="line">2.å…¶æ¬¡æˆ‘å¯¹è¿™äº›è·ç¦»è¿›è¡Œæ’åºï¼Œä»å°åˆ°å¤§ï¼Œç„¶åå–å‰Kä¸ªæ ·æœ¬</span><br><span class="line">3.ç„¶åæˆ‘çœ‹è¿™äº›é‡Œé¢æœ‰å¤šå°‘ä¸ªğŸššå¤šå°‘ä¸ªğŸš—ï¼Œç„¶åè®¡ç®—å æ¯”</span><br><span class="line">  æœ€ç»ˆæ ¹æ®è¿™ä¸ªå æ¯”å°±å¯ä»¥å¾—å‡ºè°çš„æ¦‚ç‡å¤§</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">æˆ‘å°±æ„Ÿè§‰è¿™é‡Œæœ‰äº›ä¸å¯¹åŠ²  é‚£å¦‚æœæˆ‘é€‰çš„æ ·æœ¬ä¸­ğŸš—æœ¬æ¥å°±å°‘ï¼Œé‚£æˆ‘å–å‰Kä¸ªæ ·æœ¬ï¼Œè‚¯å®šğŸš—å æ¯”å°±å°‘äº†ï¼Œæ‰€ä»¥åˆç†é€‰æ‹©è¿™ä¸ªKæœ‰ç‚¹è¯´æ³•ï¼Œè¿™ç®—æ³•æœ‰å¾…æé«˜</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯¹äºä¼˜åŒ–è¶…å‚æ•°</p><p>é€šå¸¸å°±æ˜¯å–è‹¥å¹²ä¸ªè¶…å‚æ•°ï¼šKå€¼  â€”-&gt;  å–å¾—è‹¥å¹²ä¸ªç»“æœ â€”â€”&gt; è‹¥å¹²ä¸ªè¯„ä¼°</p><p>æœ€åè¿™ä¸ªè¯„ä¼°æœ€ä¼˜çš„å°±é€‰è¿™ä¸ªKå€¼ä½œä¸ºè¶…å‚æ•°</p><h4 id="kå€¼é€‰å–ç­–ç•¥"><a href="#kå€¼é€‰å–ç­–ç•¥" class="headerlink" title="kå€¼é€‰å–ç­–ç•¥"></a>kå€¼é€‰å–ç­–ç•¥</h4><ul><li>å¥‡æ•°</li><li>k &lt; ä¸€ä¸ªå€¼ é€šå¸¸æ˜¯ 20 </li></ul><h2 id="3-KNNç®—æ³•çš„ä¼˜ç¼ºç‚¹åŠæ”¹è¿›"><a href="#3-KNNç®—æ³•çš„ä¼˜ç¼ºç‚¹åŠæ”¹è¿›" class="headerlink" title="3.KNNç®—æ³•çš„ä¼˜ç¼ºç‚¹åŠæ”¹è¿›"></a>3.KNNç®—æ³•çš„ä¼˜ç¼ºç‚¹åŠæ”¹è¿›</h2><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li><p>æ˜“äºç†è§£</p></li><li><p>ä¸éœ€è¦åºå¤§çš„æ ·æœ¬æ•°é‡</p></li><li><p>å¯¹äºå¼‚å¸¸å€¼ä¸æ•æ„Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯¹ç¦»å®ƒè¿‘çš„æ•æ„Ÿï¼Œå¤ªè¿œçš„ä¸é¸Ÿå®ƒ</span><br></pre></td></tr></table></figure></li><li><p>æ˜¯å¤©ç„¶çš„å¤šåˆ†ç±»å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åªéœ€è¦å…³æ³¨è·ç¦»å®ƒçš„å‡ ä¸ª</span><br></pre></td></tr></table></figure></li><li><p>ä¸éœ€è¦è®­ç»ƒï¼Œæ±‚è§£å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ‰äº›é¸¡è‚‹</span><br></pre></td></tr></table></figure></li></ul><h3 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h3><ul><li><p>æ•°æ®é‡å¤§æ—¶è®¡ç®—é‡å¤ªå¤§</p></li><li><p>ä¸å¹³è¡¡æ ·æœ¬å¤„ç†èƒ½åŠ›å·®</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230601212555814.png" alt="image-20230601212555814" style="zoom: 50%;" /></p></li><li><p>å¹¶ä¸â€œå­¦ä¹ â€</p></li><li><p>é€Ÿåº¦æ…¢ã€å‡†ç¡®ç‡ä½</p></li></ul><h3 id="æ”¹è¿›"><a href="#æ”¹è¿›" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h3><h4 id="åŠ æƒå¹³å‡KNN"><a href="#åŠ æƒå¹³å‡KNN" class="headerlink" title="åŠ æƒå¹³å‡KNN"></a>åŠ æƒå¹³å‡KNN</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ­£å¸¸æƒ…å†µä¸‹æ˜¯åªçœ‹æŠ•ç¥¨ç»“æœ</span><br><span class="line">åŠ æƒï¼Œå°±æ˜¯æŠŠæ‰€å¸¦çš„ç±»å‹ä¹Ÿç®—ä¸Šé€šè¿‡ä¸€å®šçš„è®¡ç®—æ–¹æ³•</span><br></pre></td></tr></table></figure><p>æƒé‡ç®—æ³•ï¼š</p><p>å°±æ˜¯è·ç¦»ç¦»å¾—è¿œçš„æƒé‡å°±ä½ï¼Œè·ç¦»ç¦»çš„è¿‘çš„æƒé‡å°±é«˜</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230602000608822.png" alt="image-20230602000608822"></p><h2 id="4-KNNæœºå™¨å­¦ä¹ åº”ç”¨"><a href="#4-KNNæœºå™¨å­¦ä¹ åº”ç”¨" class="headerlink" title="4.KNNæœºå™¨å­¦ä¹ åº”ç”¨"></a>4.KNNæœºå™¨å­¦ä¹ åº”ç”¨</h2><h3 id="4-1-å¾’æ‰‹å†™"><a href="#4-1-å¾’æ‰‹å†™" class="headerlink" title="4.1 å¾’æ‰‹å†™"></a>4.1 å¾’æ‰‹å†™</h3><p>éº»çƒ¦ï¼Œæ­£å¸¸ä¸ä¼šä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pylab <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(<span class="string">&quot;vehicle.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line">plt.scatter(data[<span class="string">&#x27;length&#x27;</span>][data[<span class="string">&#x27;label&#x27;</span>]==<span class="string">&#x27;car&#x27;</span>],data[<span class="string">&#x27;width&#x27;</span>][data[<span class="string">&#x27;label&#x27;</span>]==<span class="string">&#x27;car&#x27;</span>],edgecolors=<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">plt.scatter(data[<span class="string">&#x27;length&#x27;</span>][data[<span class="string">&#x27;label&#x27;</span>]==<span class="string">&#x27;truck&#x27;</span>],data[<span class="string">&#x27;width&#x27;</span>][data[<span class="string">&#x27;label&#x27;</span>]==<span class="string">&#x27;truck&#x27;</span>],edgecolors=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">feature = np.array(data.iloc[:,<span class="number">0</span>:<span class="number">2</span>])</span><br><span class="line">labels = data[<span class="string">&#x27;label&#x27;</span>].tolist()</span><br><span class="line"><span class="built_in">print</span>(feature)</span><br><span class="line"><span class="built_in">print</span>(labels)</span><br><span class="line"></span><br><span class="line">test=[<span class="number">4.7</span>, <span class="number">2.1</span>]</span><br><span class="line">numSamples = data.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·ç¦»</span></span><br><span class="line">diff = np.tile(test, (numSamples, <span class="number">1</span>)) - feature</span><br><span class="line">squreDiff = diff ** <span class="number">2</span></span><br><span class="line">squreDiff = np.<span class="built_in">sum</span>(squreDiff, axis = <span class="number">1</span>)</span><br><span class="line">distance = squreDiff ** <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’åº</span></span><br><span class="line">sorteDisIndices = np.argsort(distance)</span><br><span class="line">k = <span class="number">9</span></span><br><span class="line">classCount = &#123;&#125;</span><br><span class="line">label_count = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">    voteLabel = labels[sorteDisIndices[i]]</span><br><span class="line">    classCount[voteLabel] = classCount.get(voteLabel, <span class="number">0</span>) + <span class="number">1</span></span><br><span class="line">    label_count.append(voteLabel)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line">word_counts = Counter(label_count)</span><br><span class="line">top = word_counts.most_common(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [(&#x27;truck&#x27;, 5)]</span></span><br></pre></td></tr></table></figure><h3 id="4-2-Sklearn-Scikit-learn-æ¡†æ¶"><a href="#4-2-Sklearn-Scikit-learn-æ¡†æ¶" class="headerlink" title="4.2 Sklearn(Scikit-learn)æ¡†æ¶"></a>4.2 Sklearn(Scikit-learn)æ¡†æ¶</h3><p>åé¢è¡¥å……å§</p><h1 id="Sklearn"><a href="#Sklearn" class="headerlink" title="Sklearn"></a>Sklearn</h1><h2 id="1-Sklearnæ•°æ®é›†"><a href="#1-Sklearnæ•°æ®é›†" class="headerlink" title="1. Sklearnæ•°æ®é›†"></a>1. Sklearnæ•°æ®é›†</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sklearn.databasets</span><br><span class="line">load_*è·å–å°è§„æ¨¡æ•°æ®é›†</span><br><span class="line">fetch_*è·å–å¤§è§„æ¨¡æ•°æ®é›†</span><br></pre></td></tr></table></figure><h3 id="1-1-sklearnå°æ•°æ®é›†"><a href="#1-1-sklearnå°æ•°æ®é›†" class="headerlink" title="1.1 sklearnå°æ•°æ®é›†"></a>1.1 sklearnå°æ•°æ®é›†</h3><p>ä¾‹å¦‚æˆ‘è¦å¼•ç”¨é¸¢å°¾èŠ±çš„å°è§„æ¨¡çš„æ•°æ®é›†å°±å¯ä»¥ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.databasets.load_iris()</span><br></pre></td></tr></table></figure><p>æ³¢å£«é¡¿æˆ¿ä»·æ•°æ®é›†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.databasets.load_boston()</span><br></pre></td></tr></table></figure><h3 id="1-2-sklearnå¤§æ•°æ®é›†"><a href="#1-2-sklearnå¤§æ•°æ®é›†" class="headerlink" title="1.2 sklearnå¤§æ•°æ®é›†"></a>1.2 sklearnå¤§æ•°æ®é›†</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.databasets.fetch_20newsgroups(data_home=None,subset=&#x27;train&#x27;)</span><br></pre></td></tr></table></figure><ul><li>subset: â€˜trainâ€™æˆ–è€…â€™testâ€™ï¼Œâ€™allâ€˜</li><li>è®­ç»ƒé›†çš„è®­ç»ƒï¼Œæµ‹è¯•ï¼Œå…¨éƒ¨</li></ul><h3 id="1-3-æ•°æ®é›†çš„è¿”å›å€¼"><a href="#1-3-æ•°æ®é›†çš„è¿”å›å€¼" class="headerlink" title="1.3 æ•°æ®é›†çš„è¿”å›å€¼"></a>1.3 æ•°æ®é›†çš„è¿”å›å€¼</h3><ul><li><pre><code>databasets.base.Bunch  (å­—å…¸)dict[&#39;key&#39;] = values<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- dataï¼šç‰¹å¾å€¼</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    iris[&#x27;data&#x27;]</span><br></pre></td></tr></table></figure>- targetï¼šæ ‡ç­¾å€¼  - ```python    iris.target    <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- DESCRï¼šæ•°æ®æè¿°</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    iris.DESCR</span><br></pre></td></tr></table></figure>- feature_nameï¼šç‰¹å¾å  -</code></pre><pre><code>iris.feature_names<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- target_nameï¼šæ ‡ç­¾å</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    iris.target_names</span><br></pre></td></tr></table></figure></code></pre></li></ul><h3 id="1-4-æ•°æ®é›†çš„åˆ’åˆ†"><a href="#1-4-æ•°æ®é›†çš„åˆ’åˆ†" class="headerlink" title="1.4 æ•°æ®é›†çš„åˆ’åˆ†"></a>1.4 æ•°æ®é›†çš„åˆ’åˆ†</h3><ul><li>è®­ç»ƒé›†ï¼š70% 80% 75%</li><li>æµ‹è¯•é›†ï¼š30% 20% 30%</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="comment"># æ•°æ®é›†åˆ’åˆ†</span></span><br><span class="line">    x_train,x_test,y_train,y_test = train_test_split(iris.data,iris.target,test_size=<span class="number">0.2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è®­ç»ƒé›†çš„ç‰¹å¾å€¼:\n&quot;</span>,x_train,x_train.shape)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æµ‹è¯•é›†çš„ç‰¹å¾å€¼:\n&quot;</span>,x_test,x_test.shape)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è®­ç»ƒé›†çš„ç›®æ ‡å€¼:\n&quot;</span>,y_train,y_train.shape)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æµ‹è¯•é›†çš„ç›®æ ‡å€¼:\n&quot;</span>,y_test,y_test.shape)</span><br></pre></td></tr></table></figure><h1 id="ç‰¹å¾å·¥ç¨‹"><a href="#ç‰¹å¾å·¥ç¨‹" class="headerlink" title="ç‰¹å¾å·¥ç¨‹"></a>ç‰¹å¾å·¥ç¨‹</h1><p>æ•°æ®å’Œç‰¹å¾å†³å®šäº†æœºå™¨å­¦ä¹ çš„ä¸Šçº¿ï¼Œæ¨¡å‹å’Œç®—æ³•çŸ¥è¯†åœ¨é€¼è¿‘è¿™ä¸ªä¸Šé™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å°±æ˜¯å¤„ç†æ•°æ®</span><br></pre></td></tr></table></figure><h2 id="ç‰¹å¾å·¥ç¨‹å†…å®¹"><a href="#ç‰¹å¾å·¥ç¨‹å†…å®¹" class="headerlink" title="ç‰¹å¾å·¥ç¨‹å†…å®¹"></a>ç‰¹å¾å·¥ç¨‹å†…å®¹</h2><ul><li>ç‰¹å¾æå–<ul><li>æœºå™¨å­¦ä¹ ç®—æ³• - ç»Ÿè®¡æ–¹æ³• - æ•°å­¦å…¬å¼</li><li>ä¾‹å¦‚ï¼šæ–‡æœ¬ç±»å‹ -&gt; æ•°å€¼</li><li>ç±»å‹ -&gt; æ•°å€¼<ul><li>è¿™é‡Œå¯ä»¥ç”¨One-hotç¼–ç æˆ–è€…å“‘å˜é‡</li></ul></li></ul></li><li>ç‰¹å¾é¢„å¤„ç†<br>- </li><li>ç‰¹å¾é™ç»´</li></ul><h2 id="ç‰¹å¾æå–"><a href="#ç‰¹å¾æå–" class="headerlink" title="ç‰¹å¾æå–"></a>ç‰¹å¾æå–</h2><h4 id="1-å°†æ•°æ®è½¬æ¢ä¸ºå¯ç”¨äºæœºå™¨å­¦ä¹ çš„æ•°å­—ç‰¹å¾"><a href="#1-å°†æ•°æ®è½¬æ¢ä¸ºå¯ç”¨äºæœºå™¨å­¦ä¹ çš„æ•°å­—ç‰¹å¾" class="headerlink" title="1. å°†æ•°æ®è½¬æ¢ä¸ºå¯ç”¨äºæœºå™¨å­¦ä¹ çš„æ•°å­—ç‰¹å¾"></a>1. å°†æ•°æ®è½¬æ¢ä¸ºå¯ç”¨äºæœºå™¨å­¦ä¹ çš„æ•°å­—ç‰¹å¾</h4><blockquote><p>å°±æ˜¯ä¸ºäº†è®¡ç®—æœºæ›´å¥½çš„ç†è§£æ•°æ®</p></blockquote><ul><li>å­—å…¸ç‰¹å¾æå–(ç‰¹å¾ç¦»æ•£åŒ–)</li><li>æ–‡æœ¬ç‰¹å¾æå–</li><li>å›¾åƒç‰¹å¾æå–</li></ul><h4 id="2-ç‰¹å¾æå–API"><a href="#2-ç‰¹å¾æå–API" class="headerlink" title="2. ç‰¹å¾æå–API"></a>2. ç‰¹å¾æå–API</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.feature.exturaction</span><br></pre></td></tr></table></figure><h3 id="å­—å…¸ç‰¹å¾æå–"><a href="#å­—å…¸ç‰¹å¾æå–" class="headerlink" title="å­—å…¸ç‰¹å¾æå–"></a>å­—å…¸ç‰¹å¾æå–</h3><p>ä½œç”¨: å¯¹å­—å…¸æ•°æ®è¿›è¡Œç‰¹å¾å€¼åŒ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction <span class="keyword">import</span> DictVectorizer</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.feature_extraction <span class="keyword">import</span> DictVectorizer</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å­—å…¸ç‰¹å¾æŠ½å–</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dict_demo</span>():</span><br><span class="line">    <span class="built_in">dict</span> = [&#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">100</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;åŒ—äº¬&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">60</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;æ·±åœ³&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">30</span>&#125;]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 1.å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span></span><br><span class="line">    transfer = DictVectorizer()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2.è°ƒç”¨fit_transform</span></span><br><span class="line">    <span class="comment"># è¿”å›äº†sparseç¨€ç–çŸ©é˜µ å°†éé›¶å€¼ æŒ‰ä½ç½®è¡¨ç¤º å¯ä»¥èŠ‚çœå†…å­˜ æé«˜åŠ è½½æ•ˆç‡</span></span><br><span class="line">    data = transfer.fit_transform(<span class="built_in">dict</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data_dict:\n&quot;</span>, data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç‰¹å¾åå­—:\n&quot;</span>, transfer.feature_names_)</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    data_dict:</span></span><br><span class="line"><span class="string">      (0, 0)1.0</span></span><br><span class="line"><span class="string">      (0, 3)100.0</span></span><br><span class="line"><span class="string">      (1, 1)1.0</span></span><br><span class="line"><span class="string">      (1, 3)60.0</span></span><br><span class="line"><span class="string">      (2, 2)1.0</span></span><br><span class="line"><span class="string">      (2, 3)30.0</span></span><br><span class="line"><span class="string">    ç‰¹å¾åå­—:</span></span><br><span class="line"><span class="string">    [&#x27;city=ä¸Šæµ·&#x27;, &#x27;city=åŒ—äº¬&#x27;, &#x27;city=æ·±åœ³&#x27;, &#x27;temperature&#x27;]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    dict_demo()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><ul><li><p>å½“æ•°æ®é›†ä¸­ç±»åˆ«ç‰¹å¾æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.å°†æ•°æ®é›†ä¸­çš„ç‰¹å¾=ã€‹å­—å…¸ç±»å‹</span><br><span class="line">2.DictVectorizerè½¬æ¢</span><br></pre></td></tr></table></figure></li><li><p>å½“æœ¬èº«æ‹¿åˆ°çš„æ•°æ®å°±æ˜¯å­—å…¸ç±»å‹å°±å¯ä»¥ç”¨å­—å…¸ç‰¹å¾æå–</p></li></ul><h3 id="æ–‡æœ¬ç‰¹å¾æå–"><a href="#æ–‡æœ¬ç‰¹å¾æå–" class="headerlink" title="æ–‡æœ¬ç‰¹å¾æå–"></a>æ–‡æœ¬ç‰¹å¾æå–</h3><p>å•è¯ ä½œä¸º ç‰¹å¾</p><p>å¥å­ã€çŸ­è¯­ã€å•è¯ã€å­—æ¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç‰¹å¾ï¼šç‰¹å¾è¯</span><br></pre></td></tr></table></figure><h4 id="è‹±æ–‡æ–‡æœ¬"><a href="#è‹±æ–‡æ–‡æœ¬" class="headerlink" title="è‹±æ–‡æ–‡æœ¬"></a>è‹±æ–‡æ–‡æœ¬</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> CountVectorizer</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">count_demo</span>():</span><br><span class="line">    data = [<span class="string">&quot;Life is short,i like python&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Lift is too long,i dislike python&quot;</span>]</span><br><span class="line">    text = CountVectorizer()</span><br><span class="line"></span><br><span class="line">    sparse = text.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(sparse)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç‰¹å¾åå­—:\n&quot;</span>, text.get_feature_names_out())</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">      (0, 2)1</span></span><br><span class="line"><span class="string">      (0, 1)1</span></span><br><span class="line"><span class="string">      (0, 7)1</span></span><br><span class="line"><span class="string">      (0, 4)1</span></span><br><span class="line"><span class="string">      (0, 6)1</span></span><br><span class="line"><span class="string">      (1, 1)1</span></span><br><span class="line"><span class="string">      (1, 6)1</span></span><br><span class="line"><span class="string">      (1, 3)1</span></span><br><span class="line"><span class="string">      (1, 8)1</span></span><br><span class="line"><span class="string">      (1, 5)1</span></span><br><span class="line"><span class="string">      (1, 0)1</span></span><br><span class="line"><span class="string">      ç‰¹å¾åå­—:</span></span><br><span class="line"><span class="string">        [&#x27;dislike&#x27; &#x27;is&#x27; &#x27;life&#x27; &#x27;lift&#x27; &#x27;like&#x27; &#x27;long&#x27; &#x27;python&#x27; &#x27;short&#x27; &#x27;too&#x27;]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    count_demo()</span><br></pre></td></tr></table></figure><h4 id="ä¸­æ–‡æ–‡æœ¬"><a href="#ä¸­æ–‡æ–‡æœ¬" class="headerlink" title="ä¸­æ–‡æ–‡æœ¬"></a>ä¸­æ–‡æ–‡æœ¬</h4><p>ç”±äºè‹±æ–‡æ¯ä¸ªå•è¯ä¹‹é—´é»˜è®¤å°±æ˜¯æŒ‰ç…§ç©ºæ ¼éš”å¼€ï¼Œä½†æ˜¯ä¸­æ–‡â€ä½ å¥½â€è¿™ç§å°±æ²¡æœ‰ç©ºæ ¼</p><p>æ‰€ä»¥è¦å€ŸåŠ©ä¸€äº›åˆ†è¯å·¥å…·   ä¾‹å¦‚jiebaåˆ†è¯â€¦.</p><blockquote><p>è¿™é‡Œå¼•å‡ºä¸€ä¸ªæ¦‚å¿µï¼šåœç”¨è¯ stop_words</p><p>ä¸æ­¢æ˜¯ä¸­æ–‡è¿™ç§ï¼Œæ¯”å¦‚æƒ³ä¸€äº›æœªçŸ¥çš„æ–‡æœ¬ä¸å®¹æ˜“è¿›è¡Œåˆ†è¯çš„å°±å¯ä»¥ä½¿ç”¨åœç”¨è¯ä¸å°†å…¶è¿›å…¥</p><p>åœç”¨è¯è¡¨</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> CountVectorizer</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chinescount_demo</span>():</span><br><span class="line">    data = [<span class="string">&quot;å¼•åŠ›ï¼Œç”µç£åŠ›ï¼Œå¼ºä¸å¼±ç›¸äº’ä½œç”¨åŠ›â€”â€”å››å¤§åŸºæœ¬åŠ›æ˜¯æˆ‘æŒæ§çš„æƒèƒ½ï¼Œæ˜¯æˆ‘æ°¸æ’çš„å† å†•ï¼Œæ˜¯æˆ‘ä¸æœ½çš„ç‹åº§ ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;æ— çŸ¥æ„šæ˜§ä¹‹ç‰©ç§°æˆ‘ä¸ºæš´å›ï¼Œä½†æ˜¯æ™ºè€…ï¼Œä»¥æˆ‘ä¸ºç‹ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;æœ‰äººå¯¹æˆ‘é—»é£ä¸§èƒ†ï¼Œæœ‰äººå¯¹æˆ‘é¡¶ç¤¼è†œæ‹œï¼Œä»–ä»¬ï¼Œéƒ½åŒæ ·è‡£æœäºæˆ‘ã€‚&quot;</span>]</span><br><span class="line">    data_new = []</span><br><span class="line">    <span class="keyword">for</span> sent <span class="keyword">in</span> data:</span><br><span class="line">        data_new.append(cut_word(sent))</span><br><span class="line"></span><br><span class="line">    trans = CountVectorizer()</span><br><span class="line">    res = trans.fit_transform(data_new)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è½¬æ¢ç»“æœ:\n&quot;</span>,res.toarray())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç‰¹å¾åå­—:\n&quot;</span>, trans.get_feature_names_out())</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è½¬æ¢ç»“æœ:</span></span><br><span class="line"><span class="string">     [[1 0 0 0 1 1 0 1 1 1 0 1 0 0 0 0 1 1 1 1 1 0 0 0]</span></span><br><span class="line"><span class="string">     [0 1 0 1 0 0 0 0 0 0 1 0 1 1 1 0 0 0 0 0 0 0 0 0]</span></span><br><span class="line"><span class="string">     [0 0 1 0 0 0 1 0 0 0 0 0 0 0 0 2 0 0 0 0 0 1 1 1]]</span></span><br><span class="line"><span class="string">    ç‰¹å¾åå­—:</span></span><br><span class="line"><span class="string">     [&#x27;ä¸æœ½&#x27; &#x27;ä¹‹ç‰©&#x27; &#x27;ä»–ä»¬&#x27; &#x27;ä½†æ˜¯&#x27; &#x27;å† å†•&#x27; &#x27;åŠ›æ˜¯&#x27; &#x27;åŒæ ·&#x27; &#x27;å››å¤§&#x27; &#x27;åŸºæœ¬&#x27; &#x27;å¼•åŠ›&#x27; &#x27;æ„šæ˜§&#x27; &#x27;æŒæ§&#x27; &#x27;æ— çŸ¥&#x27; &#x27;æ™ºè€…&#x27;</span></span><br><span class="line"><span class="string">     &#x27;æš´å›&#x27; &#x27;æœ‰äºº&#x27; &#x27;æƒèƒ½&#x27; &#x27;æ°¸æ’&#x27; &#x27;ç‹åº§&#x27; &#x27;ç”µç£åŠ›&#x27; &#x27;ç›¸äº’ä½œç”¨&#x27; &#x27;è‡£æœäº&#x27; &#x27;é—»é£ä¸§èƒ†&#x27; &#x27;é¡¶ç¤¼è†œæ‹œ&#x27;]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cut_word</span>(<span class="params">text</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¿›è¡Œä¸­æ–‡åˆ†è¯</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot; &quot;</span>.join(<span class="built_in">list</span>(jieba.cut(text)))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    chinescount_demo()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯æŒ‰ç…§è¿™ç§åˆ†ç±»ä¼šæœ‰ä¸€ä¸ªå¼Šç—…ï¼Œæ¯”å¦‚è¯´æ–‡ç« ä¸­æœ‰å¾ˆå¤š  å› ä¸º  ã€æ‰€ä»¥ ã€â€¦è¿™æ ·çš„è¯ï¼Œåœ¨åˆ«çš„æ–‡ç« ä¸­åŒæ ·ä¹Ÿæœ‰å¾ˆå¤šï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´ç‰¹å¾å€¼çš„æŠ½å–ä¸­å­˜åœ¨é”™è¯¯</p><h4 id="Tf-idfæ–‡æœ¬ç‰¹å¾æå–"><a href="#Tf-idfæ–‡æœ¬ç‰¹å¾æå–" class="headerlink" title="Tf-idfæ–‡æœ¬ç‰¹å¾æå–"></a>Tf-idfæ–‡æœ¬ç‰¹å¾æå–</h4><blockquote><p>å¦‚æœæŸä¸ªè¯æˆ–è€…çŸ­è¯­ï¼Œåœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°çš„æ¦‚ç‡é«˜ï¼Œå¹¶ä¸”åœ¨å…¶å®ƒæ–‡ç« ä¸­å¾ˆå°‘å‡ºç°ï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªè¯æˆ–è€…çŸ­è¯­å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ï¼Œé€‚åˆç”¨æ¥åˆ†ç±»</p></blockquote><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230603201325407.png" alt="image-20230603201325407"></p><p>æ€»ç»“ï¼š</p><p>TF-IDFå°±æ˜¯è¡¡é‡ä¸€ä¸ªè¯æˆ–çŸ­è¯­çš„é‡è¦ç¨‹åº¦</p><ul><li><p>TF - è¯é¢‘</p></li><li><p>IDF - é€†å‘æ–‡æ¡£é¢‘ç‡ æ˜¯ä¸€ä¸ªè¯è¯­æ™®éé‡è¦æ€§çš„åº¦é‡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚ç°åœ¨</span><br><span class="line">1000ç¯‡æ–‡ç«  - è¯­æ–™åº“</span><br><span class="line">100ç¯‡æ–‡ç«  - â€éå¸¸â€œ</span><br><span class="line">10ç¯‡æ–‡ç«  - â€ç»æµ</span><br><span class="line"></span><br><span class="line">ä¸¤ç¯‡æ–‡ç« </span><br><span class="line">æ–‡ç« Aï¼ˆ100è¯ï¼‰ï¼š10æ¬¡â€œç»æµâ€ TF-IDF = TF x IDF = 0.1 X 2 = 0.2</span><br><span class="line">tf: 10/100 = 0.1</span><br><span class="line">idf: lg 1000/10 = 2</span><br></pre></td></tr></table></figure></li></ul><p>å®ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> TfidfVectorizer</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chinescount_demo</span>():</span><br><span class="line">    data = [<span class="string">&quot;å¼•åŠ›ï¼Œç”µç£åŠ›ï¼Œå¼ºä¸å¼±ç›¸äº’ä½œç”¨åŠ›â€”â€”å››å¤§åŸºæœ¬åŠ›æ˜¯æˆ‘æŒæ§çš„æƒèƒ½ï¼Œæ˜¯æˆ‘æ°¸æ’çš„å† å†•ï¼Œæ˜¯æˆ‘ä¸æœ½çš„ç‹åº§ ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;æ— çŸ¥æ„šæ˜§ä¹‹ç‰©ç§°æˆ‘ä¸ºæš´å›ï¼Œä½†æ˜¯æ™ºè€…ï¼Œä»¥æˆ‘ä¸ºç‹ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;æœ‰äººå¯¹æˆ‘é—»é£ä¸§èƒ†ï¼Œæœ‰äººå¯¹æˆ‘é¡¶ç¤¼è†œæ‹œï¼Œä»–ä»¬ï¼Œéƒ½åŒæ ·è‡£æœäºæˆ‘ã€‚&quot;</span>]</span><br><span class="line">    data_new = []</span><br><span class="line">    <span class="keyword">for</span> sent <span class="keyword">in</span> data:</span><br><span class="line">        data_new.append(cut_word(sent))</span><br><span class="line"></span><br><span class="line">    trans = TfidfVectorizer()</span><br><span class="line">    res = trans.fit_transform(data_new)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è½¬æ¢ç»“æœ:\n&quot;</span>,res.toarray())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç‰¹å¾åå­—:\n&quot;</span>, trans.get_feature_names_out())</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        è½¬æ¢ç»“æœ:</span></span><br><span class="line"><span class="string">         [[0.28867513 0.         0.         0.         0.28867513 0.28867513</span></span><br><span class="line"><span class="string">          0.         0.28867513 0.28867513 0.28867513 0.         0.28867513</span></span><br><span class="line"><span class="string">          0.         0.         0.         0.         0.28867513 0.28867513</span></span><br><span class="line"><span class="string">          0.28867513 0.28867513 0.28867513 0.         0.         0.        ]</span></span><br><span class="line"><span class="string">         [0.         0.40824829 0.         0.40824829 0.         0.</span></span><br><span class="line"><span class="string">          0.         0.         0.         0.         0.40824829 0.</span></span><br><span class="line"><span class="string">          0.40824829 0.40824829 0.40824829 0.         0.         0.</span></span><br><span class="line"><span class="string">          0.         0.         0.         0.         0.         0.        ]</span></span><br><span class="line"><span class="string">         [0.         0.         0.33333333 0.         0.         0.</span></span><br><span class="line"><span class="string">          0.33333333 0.         0.         0.         0.         0.</span></span><br><span class="line"><span class="string">          0.         0.         0.         0.66666667 0.         0.</span></span><br><span class="line"><span class="string">          0.         0.         0.         0.33333333 0.33333333 0.33333333]]</span></span><br><span class="line"><span class="string">        ç‰¹å¾åå­—:</span></span><br><span class="line"><span class="string">         [&#x27;ä¸æœ½&#x27; &#x27;ä¹‹ç‰©&#x27; &#x27;ä»–ä»¬&#x27; &#x27;ä½†æ˜¯&#x27; &#x27;å† å†•&#x27; &#x27;åŠ›æ˜¯&#x27; &#x27;åŒæ ·&#x27; &#x27;å››å¤§&#x27; &#x27;åŸºæœ¬&#x27; &#x27;å¼•åŠ›&#x27; &#x27;æ„šæ˜§&#x27; &#x27;æŒæ§&#x27; &#x27;æ— çŸ¥&#x27; &#x27;æ™ºè€…&#x27;</span></span><br><span class="line"><span class="string">         &#x27;æš´å›&#x27; &#x27;æœ‰äºº&#x27; &#x27;æƒèƒ½&#x27; &#x27;æ°¸æ’&#x27; &#x27;ç‹åº§&#x27; &#x27;ç”µç£åŠ›&#x27; &#x27;ç›¸äº’ä½œç”¨&#x27; &#x27;è‡£æœäº&#x27; &#x27;é—»é£ä¸§èƒ†&#x27; &#x27;é¡¶ç¤¼è†œæ‹œ&#x27;]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cut_word</span>(<span class="params">text</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    è¿›è¡Œä¸­æ–‡åˆ†è¯</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot; &quot;</span>.join(<span class="built_in">list</span>(jieba.cut(text)))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    chinescount_demo()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç‰¹å¾æå–æ€»ç»“"><a href="#ç‰¹å¾æå–æ€»ç»“" class="headerlink" title="ç‰¹å¾æå–æ€»ç»“"></a>ç‰¹å¾æå–æ€»ç»“</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction <span class="keyword">import</span> DictVectorizer</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> CountVectorizer</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> TfidfVectorizer</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å­—å…¸ç‰¹å¾æå–</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">dict_count</span>():</span><br><span class="line">    <span class="built_in">dict</span> = [&#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">100</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;åŒ—äº¬&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">60</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&#x27;city&#x27;</span>: <span class="string">&#x27;æ·±åœ³&#x27;</span>, <span class="string">&#x27;temperature&#x27;</span>: <span class="number">30</span>&#125;]</span><br><span class="line">    transfer = DictVectorizer()</span><br><span class="line">    data = transfer.fit_transform(<span class="built_in">dict</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å­—å…¸ç‰¹å¾æå–:\n&quot;</span>,data.toarray())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">english_count</span>():</span><br><span class="line">    data = [<span class="string">&quot;Life is short,i like like like python&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Life is too long,i dislike python&quot;</span>]</span><br><span class="line">    transfer = CountVectorizer()</span><br><span class="line">    data = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è‹±æ–‡æ–‡æœ¬æå–:\n&quot;</span>,data.toarray())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chinese_count</span>():</span><br><span class="line">    chinese_data = [<span class="string">&quot;è’¸æ±½ä¸æœºæ¢°çš„æµªæ½®ä¸­ï¼Œè°èƒ½è§¦åŠéå‡¡ï¼Ÿå†å²å’Œé»‘æš—çš„è¿·é›¾é‡Œï¼Œåˆæ˜¯è°åœ¨è€³è¯­ï¼Ÿæˆ‘ä»è¯¡ç§˜ä¸­é†’æ¥ï¼Œççœ¼çœ‹è§è¿™ä¸ªä¸–ç•Œï¼š&quot;</span>,</span><br><span class="line">            <span class="string">&quot;æªæ¢°ï¼Œå¤§ç‚®ï¼Œå·¨èˆ°ï¼Œé£ç©ºè‰‡ï¼Œå·®åˆ†æœºï¼›é­”è¯ï¼Œå åœï¼Œè¯…å’’ï¼Œå€’åŠäººï¼Œå°å°ç‰©â€¦â€¦å…‰æ˜ä¾æ—§ç…§è€€ï¼Œç¥ç§˜ä»æœªè¿œç¦»ï¼Œè¿™æ˜¯ä¸€æ®µâ€œæ„šè€…â€çš„ä¼ è¯´ã€‚  &quot;</span>,</span><br><span class="line">            <span class="string">&quot;ç„¶è€Œä¸€å¥ï¼ŒåŠç¡åŠé†’ä¹‹æ—¶ï¼Œæ„å¿—æ€»æ˜¯é£˜å¿½å¦‚åŒçƒŸé›¾ï¼Œéš¾ä»¥æ§åˆ¶ï¼Œéš¾ä»¥æ”¶æŸï¼Œä»–å†æ€ä¹ˆåŠªåŠ›ï¼Œä¾æ—§å¿ä¸ä½æ€ç»´å‘æ•£ï¼Œæ‚å¿µæµ®ç°ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;ã€€ã€€çœ‹æ¥æˆ‘è¿˜æ²¡æœ‰çœŸé†’ï¼Œè¿˜åœ¨æ¢¦é‡Œâ€¦â€¦ç­‰ä¸‹è¯´ä¸å®šè¿˜ä¼šå‡ºç°è‡ªä»¥ä¸ºå·²ç»é†’äº†ï¼Œå®é™…ä¾ç„¶åœ¨ç¡çš„æƒ…å†µâ€¦â€¦å¯¹ç±»ä¼¼é­é‡ä¸ç®—é™Œç”Ÿçš„å‘¨æ˜ç‘ç«­åŠ›é›†ä¸­æ„å¿—ï¼Œä»¥å½»åº•æ‘†è„±é»‘æš—å’Œè¿·å¹»çš„æ¡æ¢ã€‚&quot;</span>,</span><br><span class="line">            <span class="string">&quot;ã€€ã€€ç…§è€€è§†çº¿å…ˆæ˜¯æ¨¡ç³Šï¼Œç»§è€Œè’™ä¸Šäº†æ·¡æ·¡çš„ç»¯çº¢ï¼Œç›®å…‰æ‰€åŠç»¯çº¢ï¼Œå‘¨æ˜ç‘çœ‹è§é¢å‰æ˜¯ä¸€å¼ åŸæœ¨è‰²æ³½çš„ä¹¦æ¡Œï¼Œæ­£ä¸­å¤®æ”¾ç€ä¸€æœ¬æ‘Šå¼€çš„ç¬”è®°ï¼Œçº¸å¼ ç²—ç³™è€Œæ³›é»„ï¼ŒæŠ¬å¤´ç”¨å¥‡æ€ªçš„å­—æ¯æ–‡å­—ä¹¦å†™ç€ä¸€å¥è¯è¯­ï¼Œå¢¨è¿¹æ·±é»‘ï¼Œé†’ç›®æ¬²æ»´ã€‚&quot;</span>]</span><br><span class="line">    transfer = CountVectorizer()</span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> chinese_data:</span><br><span class="line">        data.append(<span class="string">&quot; &quot;</span>.join(jieba.cut(i)))</span><br><span class="line">    datas = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(datas)</span><br><span class="line">    <span class="built_in">print</span>(transfer.get_feature_names_out())</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">TF_IDF</span>():</span><br><span class="line">    chinese_data = [<span class="string">&quot;è’¸æ±½ä¸æœºæ¢°çš„æµªæ½®ä¸­ï¼Œè°èƒ½è§¦åŠéå‡¡ï¼Ÿå†å²å’Œé»‘æš—çš„è¿·é›¾é‡Œï¼Œåˆæ˜¯è°åœ¨è€³è¯­ï¼Ÿæˆ‘ä»è¯¡ç§˜ä¸­é†’æ¥ï¼Œççœ¼çœ‹è§è¿™ä¸ªä¸–ç•Œï¼š&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;æªæ¢°ï¼Œå¤§ç‚®ï¼Œå·¨èˆ°ï¼Œé£ç©ºè‰‡ï¼Œå·®åˆ†æœºï¼›é­”è¯ï¼Œå åœï¼Œè¯…å’’ï¼Œå€’åŠäººï¼Œå°å°ç‰©â€¦â€¦å…‰æ˜ä¾æ—§ç…§è€€ï¼Œç¥ç§˜ä»æœªè¿œç¦»ï¼Œè¿™æ˜¯ä¸€æ®µâ€œæ„šè€…â€çš„ä¼ è¯´ã€‚  &quot;</span>,</span><br><span class="line">                    <span class="string">&quot;ç„¶è€Œä¸€å¥ï¼ŒåŠç¡åŠé†’ä¹‹æ—¶ï¼Œæ„å¿—æ€»æ˜¯é£˜å¿½å¦‚åŒçƒŸé›¾ï¼Œéš¾ä»¥æ§åˆ¶ï¼Œéš¾ä»¥æ”¶æŸï¼Œä»–å†æ€ä¹ˆåŠªåŠ›ï¼Œä¾æ—§å¿ä¸ä½æ€ç»´å‘æ•£ï¼Œæ‚å¿µæµ®ç°ã€‚&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;ã€€ã€€ç„¶è€Œçœ‹æ¥æˆ‘è¿˜æ²¡æœ‰çœŸé†’ï¼Œè¿˜åœ¨æ¢¦é‡Œâ€¦â€¦ç­‰ä¸‹è¯´ä¸å®šè¿˜ä¼šå‡ºç°è‡ªä»¥ä¸ºå·²ç»é†’äº†ï¼Œå®é™…ä¾ç„¶åœ¨ç¡çš„æƒ…å†µâ€¦â€¦å¯¹ç±»ä¼¼é­é‡ä¸ç®—é™Œç”Ÿçš„å‘¨æ˜ç‘ç«­åŠ›é›†ä¸­æ„å¿—ï¼Œä»¥å½»åº•æ‘†è„±é»‘æš—å’Œè¿·å¹»çš„æ¡æ¢ã€‚&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;ã€€ã€€ç…§è€€è§†çº¿å…ˆæ˜¯æ¨¡ç³Šï¼Œç»§è€Œè’™ä¸Šäº†æ·¡æ·¡çš„ç»¯çº¢ï¼Œç›®å…‰æ‰€åŠç»¯çº¢ï¼Œå‘¨æ˜ç‘çœ‹è§é¢å‰æ˜¯ä¸€å¼ åŸæœ¨è‰²æ³½çš„ä¹¦æ¡Œï¼Œæ­£ä¸­å¤®æ”¾ç€ä¸€æœ¬æ‘Šå¼€çš„ç¬”è®°ï¼Œçº¸å¼ ç²—ç³™è€Œæ³›é»„ï¼ŒæŠ¬å¤´ç”¨å¥‡æ€ªçš„å­—æ¯æ–‡å­—ä¹¦å†™ç€ä¸€å¥è¯è¯­ï¼Œå¢¨è¿¹æ·±é»‘ï¼Œé†’ç›®æ¬²æ»´ã€‚&quot;</span>]</span><br><span class="line">    transfer = TfidfVectorizer()</span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> chinese_data:</span><br><span class="line">        data.append(<span class="string">&quot; &quot;</span>.join(jieba.cut(i)))</span><br><span class="line">    datas = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(datas)</span><br><span class="line">    <span class="built_in">print</span>(transfer.get_feature_names_out())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    dict_count()</span><br><span class="line">    english_count()</span><br><span class="line">    chinese_count()</span><br><span class="line">    TF_IDF()</span><br></pre></td></tr></table></figure><h2 id="ç‰¹å¾é¢„å¤„ç†"><a href="#ç‰¹å¾é¢„å¤„ç†" class="headerlink" title="ç‰¹å¾é¢„å¤„ç†"></a>ç‰¹å¾é¢„å¤„ç†</h2><p>å°±æ˜¯é€šè¿‡ä¸€äº›è½¬æ¢å‡½æ•°å°†ç‰¹å¾æ•°æ®è½¬æ¢æˆæ›´åŠ é€‚åˆç®—æ³•æ¨¡å‹çš„ç‰¹å¾æ•°æ®çš„è¿‡ç¨‹</p><h4 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h4><ul><li>æ•°å€¼å‹æ•°æ®çš„æ— é‡çº²åŒ–ï¼š<ul><li>å½’ä¸€åŒ–</li><li>æ ‡å‡†åŒ–</li></ul></li></ul><h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklearn.preprocessing</span><br></pre></td></tr></table></figure><h4 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h4><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230604112108821.png" alt="image-20230604112108821"></p><ul><li>ä¸ºä»€ä¹ˆè¦è¿›è¡Œå½’ä¸€åŒ–/æ ‡å‡†åŒ–<ul><li>ç‰¹å¾çš„å•ä½æˆ–è€…å¤§å°ç›¸å·®è¾ƒå¤§ï¼Œæˆ–è€…æŸç‰¹å¾çš„æ–¹å·®ç›¸æ¯”å…¶ä»–çš„ç‰¹å¾è¦å¤§å‡ºæ¥å‡ ä¸ªæ•°é‡çº§ï¼Œå®¹æ˜“å½±å“åˆ†é…</li></ul></li></ul><p>å°±æ¯”å¦‚å¯¹äºè¿™æ ·ä¸€ç§æ•°æ®ï¼Œå¦‚æœä½ ç”¨KNNç®—æ³•ï¼Œé‚£ä¹ˆè¯¯å·®ä¼šæå¤§ï¼Œå› ä¸ºæ¶ˆè€—æ—¶é—´ç™¾åˆ†æ¯” ä¸ é‡Œç¨‹æ•°ä¹‹é—´ç›¸å·®å¤ªå¤§è¿™æ ·å°±ä¼šç›´æ¥æŠŠæ¶ˆè€—æ—¶é—´ç™¾åˆ†æ¯”å½“ä½œä¸€ä¸ªæ— ç”¨æ•°æ®</p><p>è€Œå½’ä¸€åŒ– å°±æ˜¯å°†è¿™äº›æ•°æ®è§„åˆ’æˆåŒç­‰é‡è¦ï¼Œå³ä¸ºæ— é‡çº²åŒ–</p><h4 id="å½’ä¸€åŒ–"><a href="#å½’ä¸€åŒ–" class="headerlink" title="å½’ä¸€åŒ–"></a>å½’ä¸€åŒ–</h4><h5 id="1-å®šä¹‰"><a href="#1-å®šä¹‰" class="headerlink" title="1.å®šä¹‰"></a>1.å®šä¹‰</h5><p>é€šè¿‡å¯¹åŸå§‹æ•°æ®è¿›è¡Œå˜æ¢æŠŠæ•°æ®æ˜ å°„åˆ°ï¼ˆé»˜è®¤[0ï¼Œ1]ï¼‰ä¹‹é—´</p><p><a href="https://baike.baidu.com/item/%E5%BD%92%E4%B8%80%E5%8C%96/2215161?fr=aladdin">ç™¾åº¦</a></p><h5 id="2-å…¬å¼"><a href="#2-å…¬å¼" class="headerlink" title="2.å…¬å¼"></a>2.å…¬å¼</h5><script type="math/tex; mode=display">å½’ä¸€åŒ–            X' = x - min/max-min                  X'' = X' * (mx - mi) + mi</script><blockquote><p>ä½œç”¨ä¸æ¯ä¸€åˆ—ï¼Œmaxä¸ºæ¯ä¸€åˆ—çš„æœ€å¤§å€¼ï¼Œminä¸ºä¸€åˆ—çš„æœ€å°å€¼ï¼Œé‚£ä¹ˆXâ€™â€™ä¸ºæœ€ç»ˆç»“æœï¼Œ</p><p>mx,miåˆ†åˆ«ä¸ºæŒ‡å®šåŒºé—´é»˜è®¤mxä¸º1ï¼Œmiä¸º0</p></blockquote><h5 id="3-API"><a href="#3-API" class="headerlink" title="3.API"></a>3.API</h5><h6 id="3-1MinMaxScaler"><a href="#3-1MinMaxScaler" class="headerlink" title="3.1MinMaxScaler"></a>3.1MinMaxScaler</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> MinMaxScaler</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å½’ä¸€åŒ–</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">minmax_demo</span>():</span><br><span class="line">    <span class="comment"># 1. è·å–æ•°æ®</span></span><br><span class="line">    data = pd.read_csv(<span class="string">&quot;E:\Code\Pywork\Machine\data\dating.txt&quot;</span>)</span><br><span class="line">    <span class="comment"># æ¯ä¸€è¡Œéƒ½è¦åªè¦å‰ä¸‰åˆ—</span></span><br><span class="line">    data = data.iloc[:, :<span class="number">3</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data:\n&quot;</span>, data)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span></span><br><span class="line">    transfer = MinMaxScaler()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3.è°ƒç”¨</span></span><br><span class="line">    data_new = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data_new:\n&quot;</span>,data_new)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">data:</span></span><br><span class="line"><span class="string">      milage     Liters  Consumtime</span></span><br><span class="line"><span class="string">0     40920   8.326976    0.953952</span></span><br><span class="line"><span class="string">1     14488   7.153469    1.673904</span></span><br><span class="line"><span class="string">2     26052   1.441871    0.805124</span></span><br><span class="line"><span class="string">3     75136  13.147394    0.428964</span></span><br><span class="line"><span class="string">4     38344   1.669788    0.134296</span></span><br><span class="line"><span class="string">..      ...        ...         ...</span></span><br><span class="line"><span class="string">995   11145   3.410627    0.631838</span></span><br><span class="line"><span class="string">996   68846   9.974715    0.669787</span></span><br><span class="line"><span class="string">997   26575  10.650102    0.866627</span></span><br><span class="line"><span class="string">998   48111   9.134528    0.728045</span></span><br><span class="line"><span class="string">999   43757   7.882601    1.332446</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[1000 rows x 3 columns]</span></span><br><span class="line"><span class="string">data_new:</span></span><br><span class="line"><span class="string"> [[0.44832535 0.39805139 0.56233353]</span></span><br><span class="line"><span class="string"> [0.15873259 0.34195467 0.98724416]</span></span><br><span class="line"><span class="string"> [0.28542943 0.06892523 0.47449629]</span></span><br><span class="line"><span class="string"> ...</span></span><br><span class="line"><span class="string"> [0.29115949 0.50910294 0.51079493]</span></span><br><span class="line"><span class="string"> [0.52711097 0.43665451 0.4290048 ]</span></span><br><span class="line"><span class="string"> [0.47940793 0.3768091  0.78571804]]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    minmax_demo()</span><br></pre></td></tr></table></figure><h5 id="4-ç¼ºé™·"><a href="#4-ç¼ºé™·" class="headerlink" title="4.ç¼ºé™·"></a>4.ç¼ºé™·</h5><p>å¼‚å¸¸å€¼ï¼šæœ€å¤§å€¼ã€æœ€å°å€¼</p><h4 id="æ ‡å‡†åŒ–"><a href="#æ ‡å‡†åŒ–" class="headerlink" title="æ ‡å‡†åŒ–"></a>æ ‡å‡†åŒ–</h4><h5 id="1-å®šä¹‰-1"><a href="#1-å®šä¹‰-1" class="headerlink" title="1.å®šä¹‰"></a>1.å®šä¹‰</h5><blockquote><p>é€šè¿‡å¯¹åŸå§‹æ•°æ®è¿›è¡Œå˜æ¢æŠŠæ•°æ®å˜æ¢åˆ°å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1èŒƒå›´å†…</p></blockquote><h5 id="2-å…¬å¼-1"><a href="#2-å…¬å¼-1" class="headerlink" title="2.å…¬å¼"></a>2.å…¬å¼</h5><script type="math/tex; mode=display">æ ‡å‡†åŒ–        X' = (x - mean) / æ ‡å‡†å·®</script><blockquote><p>ä½œç”¨äºæ¯ä¸€åˆ—ï¼Œmeanä¸ºå¹³å‡å€¼</p><p>æ ‡å‡†å·®: é›†ä¸­ç¨‹åº¦</p></blockquote><h5 id="3-API-1"><a href="#3-API-1" class="headerlink" title="3.API"></a>3.API</h5><h6 id="3-1StandardScaler"><a href="#3-1StandardScaler" class="headerlink" title="3.1StandardScaler"></a>3.1StandardScaler</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">def stand_demo():</span><br><span class="line">    # 1. è·å–æ•°æ®</span><br><span class="line">    data = pd.read_csv(&quot;E:\Code\Pywork\Machine\data\dating.txt&quot;)</span><br><span class="line">    # æ¯ä¸€è¡Œéƒ½è¦åªè¦å‰ä¸‰åˆ—</span><br><span class="line">    data = data.iloc[:, :3]</span><br><span class="line">    print(&quot;data:\n&quot;, data)</span><br><span class="line"></span><br><span class="line">    # 2. å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span><br><span class="line">    transfer = StandardScaler()</span><br><span class="line"></span><br><span class="line">    # 3.è°ƒç”¨</span><br><span class="line">    data_new = transfer.fit_transform(data)</span><br><span class="line">    print(&quot;data_new:\n&quot;,data_new)</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    data_new:</span><br><span class="line"> [[ 0.33193158  0.41660188  0.24523407]</span><br><span class="line"> [-0.87247784  0.13992897  1.69385734]</span><br><span class="line"> [-0.34554872 -1.20667094 -0.05422437]</span><br><span class="line"> ...</span><br><span class="line"> [-0.32171752  0.96431572  0.06952649]</span><br><span class="line"> [ 0.65959911  0.60699509 -0.20931587]</span><br><span class="line"> [ 0.46120328  0.31183342  1.00680598]]</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    stand_demo()</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>æ ‡å‡†åŒ–æ›´é€‚åˆç”¨äºå¤§æ•°æ®</p><h2 id="ç‰¹å¾é™ç»´"><a href="#ç‰¹å¾é™ç»´" class="headerlink" title="ç‰¹å¾é™ç»´"></a>ç‰¹å¾é™ç»´</h2><ul><li>å¤„ç†å¯¹è±¡äºŒç»´æ•°ç»„<ul><li>é™ä½ï¼ˆéšæœºå˜é‡ï¼‰ç‰¹å¾çš„ä¸ªæ•°<ul><li>å¾—åˆ°ä¸€ç»„ä¸ç›¸å…³çš„ä¸»å˜é‡çš„è¿‡ç¨‹</li></ul></li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚æœ‰ä¸€ç»„æ•°æ®ç›¸å¯¹æ¹¿åº¦ä¸é™é›¨é‡ä¹‹é—´çš„ç›¸å…³</span><br><span class="line">æˆ‘ä»¬è¦å°†è¿™ä¸¤ç»„æ•°æ®ä¹‹é—´ææˆä¸ä¸ç›¸å…³ç®¡ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ•°æ®å†—ä½™ï¼Œè®¡ç®—é‡å¤ªå¤§</span><br><span class="line">ä¼šå¯¹ç®—æ³•å­¦ä¹ çš„é¢„æµ‹å½±å“è¾ƒå¤§</span><br></pre></td></tr></table></figure><h3 id="é™ç»´æ–¹å¼"><a href="#é™ç»´æ–¹å¼" class="headerlink" title="é™ç»´æ–¹å¼"></a>é™ç»´æ–¹å¼</h3><ul><li>ç‰¹å¾é€‰æ‹©</li><li>ä¸»æˆåˆ†åˆ†æï¼ˆå¯ä»¥ç†è§£ä¸€ç§ç‰¹å¾æå–çš„æ–¹å¼ï¼‰</li></ul><h4 id="ç‰¹å¾é€‰æ‹©"><a href="#ç‰¹å¾é€‰æ‹©" class="headerlink" title="ç‰¹å¾é€‰æ‹©"></a>ç‰¹å¾é€‰æ‹©</h4><h5 id="Filterè¿‡æ»¤å¼"><a href="#Filterè¿‡æ»¤å¼" class="headerlink" title="Filterè¿‡æ»¤å¼"></a>Filterè¿‡æ»¤å¼</h5><ul><li>æ–¹å·®é€‰æ‹©æ³•ï¼šåœ°æ–¹æŸ¥ç‰¹å¾è¿‡æ»¤</li><li>ç›¸å…³ç³»æ•°<ul><li>è¡¡é‡ç‰¹å¾ä¸ç‰¹å¾ä¹‹é—´çš„ç›¸å…³æ€§</li></ul></li></ul><h5 id="EmbededåµŒå…¥å¼"><a href="#EmbededåµŒå…¥å¼" class="headerlink" title="EmbededåµŒå…¥å¼"></a>EmbededåµŒå…¥å¼</h5><ul><li>å†³ç­–æ ‘</li><li>æ­£åˆ™åŒ–</li><li>æ·±åº¦å­¦ä¹ </li></ul><h3 id="è¿‡æ»¤å¼"><a href="#è¿‡æ»¤å¼" class="headerlink" title="è¿‡æ»¤å¼"></a>è¿‡æ»¤å¼</h3><h4 id="1-æ–¹å·®é€‰æ‹©æ³•"><a href="#1-æ–¹å·®é€‰æ‹©æ³•" class="headerlink" title="1.æ–¹å·®é€‰æ‹©æ³•"></a>1.æ–¹å·®é€‰æ‹©æ³•</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> VarianceThreshold</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">variance_demo</span>():</span><br><span class="line">    data = pd.read_csv(<span class="string">r&quot;E:\Code\Pywork\Machine\data\factor_returns.csv&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data:\n&quot;</span>,data)</span><br><span class="line">    data = data.iloc[:, <span class="number">1</span>:-<span class="number">2</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data:\n&quot;</span>,data)</span><br><span class="line">    transfer = VarianceThreshold(threshold=<span class="number">5</span>)</span><br><span class="line">    data_new = transfer.fit_transform(data)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;data_new:\n&quot;</span>, data_new, data_new.shape)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">D:\Programming\anaconda3\python.exe E:/Code/Pywork/Machine/æœºå™¨å­¦ä¹ /ç‰¹å¾å·¥ç¨‹/ç‰¹å¾é™ç»´/Filterè¿‡æ»¤å¼/ä½æ–¹å·®è¿‡æ»¤/ä½æ–¹å·®è¿‡æ»¤.py</span></span><br><span class="line"><span class="string">data:</span></span><br><span class="line"><span class="string">             index  pe_ratio  pb_ratio  ...  total_expense        date    return</span></span><br><span class="line"><span class="string">0     000001.XSHE    5.9572    1.1818  ...   1.088254e+10  2012-01-31  0.027657</span></span><br><span class="line"><span class="string">1     000002.XSHE    7.0289    1.5880  ...   2.378348e+10  2012-01-31  0.082352</span></span><br><span class="line"><span class="string">2     000008.XSHE -262.7461    7.0003  ...   1.203008e+07  2012-01-31  0.099789</span></span><br><span class="line"><span class="string">3     000060.XSHE   16.4760    3.7146  ...   7.935543e+09  2012-01-31  0.121595</span></span><br><span class="line"><span class="string">4     000069.XSHE   12.5878    2.5616  ...   7.091398e+09  2012-01-31 -0.002681</span></span><br><span class="line"><span class="string"><span class="meta">... </span>          ...       ...       ...  ...            ...         ...       ...</span></span><br><span class="line"><span class="string">2313  601888.XSHG   25.0848    4.2323  ...   1.041419e+10  2012-11-30  0.060727</span></span><br><span class="line"><span class="string">2314  601901.XSHG   59.4849    1.6392  ...   1.089783e+09  2012-11-30  0.179148</span></span><br><span class="line"><span class="string">2315  601933.XSHG   39.5523    4.0052  ...   1.749295e+10  2012-11-30  0.137134</span></span><br><span class="line"><span class="string">2316  601958.XSHG   52.5408    2.4646  ...   6.009007e+09  2012-11-30  0.149167</span></span><br><span class="line"><span class="string">2317  601989.XSHG   14.2203    1.4103  ...   4.132842e+10  2012-11-30  0.183629</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2318 rows x 12 columns]</span></span><br><span class="line"><span class="string">data:</span></span><br><span class="line"><span class="string">       pe_ratio  pb_ratio  ...       revenue  total_expense</span></span><br><span class="line"><span class="string">0       5.9572    1.1818  ...  2.070140e+10   1.088254e+10</span></span><br><span class="line"><span class="string">1       7.0289    1.5880  ...  2.930837e+10   2.378348e+10</span></span><br><span class="line"><span class="string">2    -262.7461    7.0003  ...  1.167983e+07   1.203008e+07</span></span><br><span class="line"><span class="string">3      16.4760    3.7146  ...  9.189387e+09   7.935543e+09</span></span><br><span class="line"><span class="string">4      12.5878    2.5616  ...  8.951453e+09   7.091398e+09</span></span><br><span class="line"><span class="string"><span class="meta">... </span>       ...       ...  ...           ...            ...</span></span><br><span class="line"><span class="string">2313   25.0848    4.2323  ...  1.148170e+10   1.041419e+10</span></span><br><span class="line"><span class="string">2314   59.4849    1.6392  ...  1.731713e+09   1.089783e+09</span></span><br><span class="line"><span class="string">2315   39.5523    4.0052  ...  1.789082e+10   1.749295e+10</span></span><br><span class="line"><span class="string">2316   52.5408    2.4646  ...  6.465392e+09   6.009007e+09</span></span><br><span class="line"><span class="string">2317   14.2203    1.4103  ...  4.509872e+10   4.132842e+10</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[2318 rows x 9 columns]</span></span><br><span class="line"><span class="string">data_new:</span></span><br><span class="line"><span class="string"> [[ 5.95720000e+00  1.18180000e+00  8.52525509e+10 ...  1.21144486e+12</span></span><br><span class="line"><span class="string">   2.07014010e+10  1.08825400e+10]</span></span><br><span class="line"><span class="string"> [ 7.02890000e+00  1.58800000e+00  8.41133582e+10 ...  3.00252062e+11</span></span><br><span class="line"><span class="string">   2.93083692e+10  2.37834769e+10]</span></span><br><span class="line"><span class="string"> [-2.62746100e+02  7.00030000e+00  5.17045520e+08 ...  7.70517753e+08</span></span><br><span class="line"><span class="string">   1.16798290e+07  1.20300800e+07]</span></span><br><span class="line"><span class="string"> ...</span></span><br><span class="line"><span class="string"> [ 3.95523000e+01  4.00520000e+00  1.70243430e+10 ...  2.42081699e+10</span></span><br><span class="line"><span class="string">   1.78908166e+10  1.74929478e+10]</span></span><br><span class="line"><span class="string"> [ 5.25408000e+01  2.46460000e+00  3.28790988e+10 ...  3.88380258e+10</span></span><br><span class="line"><span class="string">   6.46539204e+09  6.00900728e+09]</span></span><br><span class="line"><span class="string"> [ 1.42203000e+01  1.41030000e+00  5.91108572e+10 ...  2.02066110e+11</span></span><br><span class="line"><span class="string">   4.50987171e+10  4.13284212e+10]] (2318, 8)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Process finished with exit code 0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    variance_demo()</span><br></pre></td></tr></table></figure><h4 id="2-ç›¸å…³ç³»æ•°"><a href="#2-ç›¸å…³ç³»æ•°" class="headerlink" title="2.ç›¸å…³ç³»æ•°"></a>2.ç›¸å…³ç³»æ•°</h4><ul><li>çš®å°”é€Šç›¸å…³ç³»æ•°<ul><li>ååº”å˜é‡ä¹‹é—´ç›¸å…³å…³ç³»å¯†åˆ‡ç¨‹åº¦çš„ç»Ÿè®¡æŒ‡æ ‡</li></ul></li></ul><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230604153425798.png" alt="image-20230604153425798"></p><p>çœ‹æœ€ç»ˆrçš„å€¼</p><ul><li><blockquote><p>å¤§äº 0 æ­£ç›¸å…³          å°äº 0 è´Ÿç›¸å…³</p></blockquote></li><li><blockquote><p>r = 1 å®Œå…¨ç›¸å…³          r = 0 æ¯«æ— å…³ç³»</p></blockquote></li><li><blockquote><p>0&lt;|r|&lt;1æ—¶ï¼Œå­˜åœ¨ç›¸å…³   r ~ 1çº¿æ€§å…³ç³»å¯†åˆ‡  r ~ 0 ç›¸å…³å˜å¼±</p></blockquote></li><li><blockquote><p>ä¸€èˆ¬åˆ†ä¸ºä¸‰çº§ </p><p>|r| &lt; 0.4ä½ç›¸å…³</p><p>0.4&lt;|r|&lt;0.7æ˜¾è‘—ç›¸å…³</p><p>0.7&lt;=|r|&lt;=1é«˜åº¦ç›¸å…³</p></blockquote></li></ul><h4 id="3-API-2"><a href="#3-API-2" class="headerlink" title="3.API"></a>3.API</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> scipy.status <span class="keyword">import</span> pearsone</span><br></pre></td></tr></table></figure><h4 id="4-è®¡ç®—"><a href="#4-è®¡ç®—" class="headerlink" title="4.è®¡ç®—"></a>4.è®¡ç®—</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> VarianceThreshold</span><br><span class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> pearsonr</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">variance_demo</span>():</span><br><span class="line">    data = pd.read_csv(<span class="string">r&quot;E:\Code\Pywork\Machine\data\factor_returns.csv&quot;</span>)</span><br><span class="line">    data = data.iloc[:, <span class="number">1</span>:-<span class="number">2</span>]</span><br><span class="line">    r = pearsonr(data[<span class="string">&#x27;pe_ratio&#x27;</span>],data[<span class="string">&#x27;pb_ratio&#x27;</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç›¸å…³ç³»æ•°:&quot;</span>,r)</span><br><span class="line"><span class="comment">#     ç›¸å…³ç³»æ•°: PearsonRResult(statistic=-0.004389322779936274, pvalue=0.8327205496564927)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    variance_demo()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœç‰¹å¾ä¸ç‰¹å¾ä¹‹é—´ç›¸å…³æ€§å¾ˆé«˜</p><ol><li>é€‰å–å…¶ä¸­ä¸€ä¸ª</li><li>åŠ æƒæ±‚å’Œ</li><li>ä¸»æˆåˆ†åˆ†æ</li></ol><h3 id="ä¸»æˆåˆ†åˆ†æ"><a href="#ä¸»æˆåˆ†åˆ†æ" class="headerlink" title="ä¸»æˆåˆ†åˆ†æ"></a>ä¸»æˆåˆ†åˆ†æ</h3><p>å¤šç»´è½¬æˆäºŒç»´èƒ½çœ‹å‡ºæ¥æ˜¯ä»€ä¹ˆçš„</p><blockquote><p>åšé™ç»´å°½å¯èƒ½çš„ä¿ç•™åŸæœ‰çš„ç‰¹å¾</p></blockquote><h5 id="API-1"><a href="#API-1" class="headerlink" title="API"></a>API</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sklean.decomposition.PCA(n_components=None)</span><br></pre></td></tr></table></figure><ul><li>å°†æ•°æ®é™ç»´</li><li>n_components:<ul><li>å°æ•°ï¼šä¿ç•™ç™¾åˆ†ä¹‹å¤šå°‘çš„ä¿¡æ¯</li><li>æ•´æ•°ï¼šå‡å°‘åˆ°å¤šå°‘ç‰¹å¾</li></ul></li></ul><h2 id="instacarté™ç»´æ¡ˆä¾‹"><a href="#instacarté™ç»´æ¡ˆä¾‹" class="headerlink" title="instacarté™ç»´æ¡ˆä¾‹"></a>instacarté™ç»´æ¡ˆä¾‹</h2><p>å…ˆäº†è§£å‡ ä¸ªæ¦‚å¿µ</p><ul><li><p>è”è¡¨(äº¤å‰è¡¨): <a href="http://www.zzvips.com/article/188950.html">http://www.zzvips.com/article/188950.html</a></p></li><li><p>é€è§†è¡¨: </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- æ•°æ®é€è§†è¡¨æ˜¯ä¸€ç§å¯¹å¤§é‡æ•°æ®å¿«é€Ÿæ±‡æ€»åˆ†æçš„äº¤äº’å¼åŠ¨æ€è¡¨æ ¼ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·ç»Ÿè®¡åˆ†ææ•°æ®ã€‚ç®€å•æ¥è¯´ï¼Œæ•°æ®é€è§†è¡¨ä¹Ÿå°±æ˜¯å¯¹åŸå§‹è¡¨è¿›è¡Œåˆ†ç»„èšåˆï¼Œå‹ç¼©æ•°æ®ä¿¡æ¯ï¼ŒæŠŠä¸å¿…è¦çš„ä¿¡æ¯ä»åŸå§‹æ•°æ®ä¸­å‰”é™¤ï¼Œè€Œåªå°†æˆ‘ä»¬æƒ³çœ‹åˆ°çš„æ•°æ®ä¿¡æ¯å±•ç¤ºåˆ°æˆ‘ä»¬é¢å‰ï¼</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€è·å–æ•°æ®</span></span><br><span class="line"><span class="comment"># 2ã€åˆå¹¶è¡¨</span></span><br><span class="line"><span class="comment"># 3ã€æ‰¾åˆ°user_idå’Œaisleä¹‹é—´çš„å…³ç³»</span></span><br><span class="line"><span class="comment"># 4ã€PCAé™ç»´</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1ã€è·å–æ•°æ®</span></span><br><span class="line">products = pd.read_csv(<span class="string">r&quot;C:\Users\beihai\Desktop\competition\æ•°æ®\instacart\products.csv&quot;</span>)</span><br><span class="line">order_products = pd.read_csv(<span class="string">r&quot;C:\Users\beihai\Desktop\competition\æ•°æ®\instacart\order_products__prior.csv&quot;</span>)</span><br><span class="line">orders = pd.read_csv(<span class="string">r&quot;C:\Users\beihai\Desktop\competition\æ•°æ®\instacart\orders.csv&quot;</span>)</span><br><span class="line">aisles = pd.read_csv(<span class="string">r&quot;C:\Users\beihai\Desktop\competition\æ•°æ®\instacart\aisles.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€åˆå¹¶è¡¨</span></span><br><span class="line"><span class="comment"># order_products_prior.csv: è®¢å•ä¸å•†å“ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># å­—æ®µ: order_idproduct_idadd_to_cart_orderreordered</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># products.csv: å•†å“ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># å­—æ®µï¼šproduct_idproduct_nameaisle_iddepartment_id</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># orders.csv ç”¨æˆ·çš„è®¢å•ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># å­—æ®µ: order_iduser_ideval_setorder_numberorder_doworder_hour_of_daydays_since_prior_order</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># aisles.csv: å•†å“æ‰€å±å…·ä½“ç‰©å“ç±»åˆ«</span></span><br><span class="line"><span class="comment"># å­—æ®µ: aisle_idaisle</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶aisleså’Œproducts</span></span><br><span class="line">table1 = pd.merge(aisles,products, on=[<span class="string">&quot;aisle_id&quot;</span>,<span class="string">&quot;aisle_id&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶table1å’Œorder_products</span></span><br><span class="line">table2 = pd.merge(table1, order_products, on=[<span class="string">&#x27;product_id&#x27;</span>,<span class="string">&#x27;product_id&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶table2å’Œorders</span></span><br><span class="line">table3 = pd.merge(table2,orders, on=[<span class="string">&#x27;order_id&#x27;</span>,<span class="string">&#x27;order_id&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰¾åˆ°user_idå’Œaisleä¹‹é—´çš„å…³ç³»</span></span><br><span class="line"><span class="comment"># äº¤å‰è¡¨</span></span><br><span class="line">table = pd.crosstab(table3[<span class="string">&#x27;user_id&#x27;</span>],table3[<span class="string">&#x27;aisle&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®é‡å¤ªå¤§å…ˆé€‰å–å‰10000æ¡æ•°æ®</span></span><br><span class="line">data = table[:<span class="number">10000</span>]</span><br><span class="line"><span class="comment"># ç‰¹å¾å€¼å¤ªå¤šéœ€è¦é™ç»´</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># PCA é™ç»´</span></span><br><span class="line"><span class="keyword">from</span> sklearn.decomposition <span class="keyword">import</span> PCA</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1)å®ä¾‹åŒ–ä¸€ä¸ªè½¬æ¢å™¨ç±»</span></span><br><span class="line">transfer = PCA(n_components=<span class="number">0.95</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2)è°ƒç”¨fit_transform</span></span><br><span class="line">data_new = transfer.fit_transform(data)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data_new,data_new.shape)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">(array([[-2.36456828e+01,  2.30028678e+00, -2.71706275e+00, ...,</span></span><br><span class="line"><span class="string">          8.24685231e-01, -5.20365905e-01,  2.99847178e+00],</span></span><br><span class="line"><span class="string">        [ 6.95477119e+00,  3.54966052e+01,  2.52655545e+00, ...,</span></span><br><span class="line"><span class="string">         -1.15326520e+00, -1.37969318e+00, -1.07115466e-02],</span></span><br><span class="line"><span class="string">        [-7.47792843e+00,  2.83147785e+00, -1.07306519e+01, ...,</span></span><br><span class="line"><span class="string">         -3.55104796e-01,  3.85595697e-02,  1.92318882e+00],</span></span><br><span class="line"><span class="string">        ...,</span></span><br><span class="line"><span class="string">        [-2.86664024e+01, -1.26446961e+00, -1.14908062e+00, ...,</span></span><br><span class="line"><span class="string">          1.13859569e-03,  4.14189764e-01,  4.46163585e-01],</span></span><br><span class="line"><span class="string">        [-2.88378748e+01, -1.70490822e+00, -1.47059942e+00, ...,</span></span><br><span class="line"><span class="string">         -1.62743887e-01,  6.72795951e-01,  9.64403654e-02],</span></span><br><span class="line"><span class="string">        [ 2.10412407e+02, -3.51935647e+01,  1.33671987e+01, ...,</span></span><br><span class="line"><span class="string">          1.46544596e+01,  1.56764794e+01,  1.67432890e+01]]),</span></span><br><span class="line"><span class="string"> (10000, 42))</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSMæ¡†æ¶</title>
      <link href="/2023/05/23/SSM%E6%A1%86%E6%9E%B6/"/>
      <url>/2023/05/23/SSM%E6%A1%86%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€MyBatis"><a href="#ä¸€ã€MyBatis" class="headerlink" title="ä¸€ã€MyBatis"></a>ä¸€ã€MyBatis</h1><h2 id="1-MyBatiså…¥é—¨æ¡ˆä¾‹"><a href="#1-MyBatiså…¥é—¨æ¡ˆä¾‹" class="headerlink" title="1. MyBatiså…¥é—¨æ¡ˆä¾‹"></a>1. MyBatiså…¥é—¨æ¡ˆä¾‹</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230524091416943.png" alt="image-20230524091416943"></p><h3 id="æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯-selectAll"><a href="#æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯-selectAll" class="headerlink" title="æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯-selectAll"></a>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯-selectAll</h3><p>1.å¯¼å…¥mybatis.sqlæ–‡ä»¶ï¼Œåˆå§‹åŒ–mybatisæ•°æ®åº“</p><p>2.åˆ›å»ºç©ºå·¥ç¨‹MyBatisProject,åˆ›å»ºæ¨¡å—mybatis-introï¼Œå¯¼å…¥POMåæ ‡,åœ¨é¡¹ç›®çš„ resources ç›®å½•ä¸‹å¤åˆ¶logbackçš„é…ç½®æ–‡ä»¶</p><p>POMåæ ‡ä¾èµ–é¡¹ï¼Œè¯·è¡¥å…¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- mysql é©±åŠ¨ --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- junit é©±åŠ¨ --&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ slf4jæ—¥å¿—api --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ logback-classicä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ·»åŠ logback-coreä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.åˆ›å»ºå®ä½“å±‚com.itbbj.domainï¼Œåˆ›å»ºå®ä½“ç±»User,å‚è€ƒæ•°æ®åº“å­—å…¸ç¼–ç ã€‚</p><p>å‚è€ƒä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>4.åˆ›å»ºæ•°æ®åº“æ˜ å°„å±‚com.itbbj.mapper,åˆ›å»ºæ¥å£UserMapper,ç¼–ç selectAllã€‚</p><p>å‚è€ƒä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>5.åœ¨æ¨¡å—çš„ resources ç›®å½•ä¸‹åˆ›å»ºæ˜ å°„é…ç½®æ–‡ä»¶ UserMapper.xmlï¼Œæ³¨æ„åˆ›å»ºæ–‡ä»¶å¤¹è·¯å¾„com/itbbj/mapper</p><p>å‚è€ƒä»£ç </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;org.mybatis.example.BlogMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectBlog&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Blog&quot;</span>&gt;</span></span><br><span class="line">        select * from Blog where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p>6.åœ¨æ¨¡å—çš„ resources ç›®å½•ä¸‹åˆ›å»ºmybatisçš„é…ç½®æ–‡ä»¶ mybatis-config.xml</p><p>å‚è€ƒä»£ç </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///mybatis?useSSL=false&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123456&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;org/mybatis/example/BlogMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>7.åœ¨æ¨¡å—çš„ testç›®å½•javaä¸‹åˆ›å»ºcom.itbbj.testå±‚ï¼Œåˆ›å»ºUserTestç±»ï¼Œç¼–ç ã€‚</p><p>å‚è€ƒä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSeleteAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.è¯»å–é…ç½®æ–‡ä»¶--åœ¨resourcesæ–‡ä»¶å¤¹ä¸‹å¯ä»¥ç›´æ¥è¯»åˆ°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºSqlSessionFactoryå·¥å‚</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">        <span class="comment">//3.ä½¿ç”¨å·¥å‚ç”Ÿäº§SqlSessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">//4.ä½¿ç”¨SqlSessionåˆ›å»ºDaoæ¥å£çš„ä»£ç†å¯¹è±¡</span></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">//5.ä½¿ç”¨ä»£ç†å¯¹è±¡æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        List&lt;User&gt; users = userMapper.selectAll();</span><br><span class="line">        System.out.println(users);</span><br><span class="line">        <span class="comment">//6.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-1-æ ¹æ®IdæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯-selectById"><a href="#1-1-æ ¹æ®IdæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯-selectById" class="headerlink" title="1.1 æ ¹æ®IdæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯-selectById"></a>1.1 æ ¹æ®IdæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯-selectById</h3><p>1.é‡æ„UserMapperæ¥å£ï¼ŒåŠ å…¥selectByIdæ–¹æ³•ã€‚</p><p>å®ç°ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br><span class="line">    User <span class="title function_">selectById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.é‡æ„UserMapper.xmlï¼ŒåŠ å…¥selectByIdèŠ‚ç‚¹</p><p>å®ç°ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=<span class="string">&quot;selectById&quot;</span> resultType=<span class="string">&quot;com.itbbj.domain.User&quot;</span>&gt;</span><br><span class="line">    select * from user <span class="type">where</span> <span class="variable">id</span> <span class="operator">=</span> #&#123;id&#125;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p>3.é‡æ„UserTest</p><p>å®ç°ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">teseById</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//1.è¯»å–é…ç½®æ–‡ä»¶--åœ¨resourcesæ–‡ä»¶å¤¹ä¸‹å¯ä»¥ç›´æ¥è¯»åˆ°</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">    <span class="comment">//2.åˆ›å»ºSqlSessionFactoryå·¥å‚</span></span><br><span class="line">    <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">    <span class="comment">//3.ä½¿ç”¨å·¥å‚ç”Ÿäº§SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">    <span class="comment">//4.ä½¿ç”¨SqlSessionåˆ›å»ºDaoæ¥å£çš„ä»£ç†å¯¹è±¡</span></span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    <span class="comment">//5.ä½¿ç”¨ä»£ç†å¯¹è±¡æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">42</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="comment">//6.é‡Šæ”¾èµ„æº</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">    inputStream.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-2-ä¼˜åŒ–Testæµ‹è¯•ç±»"><a href="#1-2-ä¼˜åŒ–Testæµ‹è¯•ç±»" class="headerlink" title="1.2 ä¼˜åŒ–Testæµ‹è¯•ç±»"></a>1.2 ä¼˜åŒ–Testæµ‹è¯•ç±»</h3><p>æ·»åŠ äº†Beforeå’ŒAfterï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> InputStream inputStream;</span><br><span class="line">    <span class="keyword">private</span> SqlSession sqlSession;</span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Before*********************************&quot;</span>);</span><br><span class="line">        <span class="comment">//1.è¯»å–é…ç½®æ–‡ä»¶--åœ¨resourcesæ–‡ä»¶å¤¹ä¸‹å¯ä»¥ç›´æ¥è¯»åˆ°</span></span><br><span class="line">        inputStream = Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºSqlSessionFactoryå·¥å‚</span></span><br><span class="line">        sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">        <span class="comment">//3.ä½¿ç”¨å·¥å‚ç”Ÿäº§SqlSessionå¯¹è±¡</span></span><br><span class="line">        sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">//4.ä½¿ç”¨SqlSessionåˆ›å»ºDaoæ¥å£çš„ä»£ç†å¯¹è±¡</span></span><br><span class="line">        userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destory</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        sqlSession.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSeleteAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        List&lt;User&gt; users = userMapper.selectAll();</span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">teseById</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">42</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#2-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="2. æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>2. æ ¸å¿ƒé…ç½®æ–‡ä»¶</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230524110144826.png" alt="image-20230524110144826"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>MysqlçŸ¥è¯†ç‚¹</title>
      <link href="/2023/05/21/Mysql%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
      <url>/2023/05/21/Mysql%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<ol><li><p>æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯è¡¨ä¸­çš„å¼ å§“åŒå­¦</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> å­¦ç”Ÿä¿¡æ¯è¡¨ <span class="keyword">where</span> å§“å <span class="keyword">like</span> <span class="string">&#x27;å¼ %&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯è¡¨ä¸­çš„åå­—åªæœ‰ä¸€ä¸ªå­—ç¬¦çš„å­¦ç”Ÿæƒ…å†µ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> å­¦ç”Ÿä¿¡æ¯è¡¨ <span class="keyword">where</span> å§“å <span class="keyword">like</span> <span class="string">&#x27;å¼ _&#x27;</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œç¼–ç¨‹</title>
      <link href="/2023/05/21/Request&amp;Response/"/>
      <url>/2023/05/21/Request&amp;Response/</url>
      
        <content type="html"><![CDATA[<h2 id="Request-amp-Response"><a href="#Request-amp-Response" class="headerlink" title="Request&amp;Response"></a>Request&amp;Response</h2><p><strong>ä»Šæ—¥ç›®æ ‡</strong></p><blockquote><ul><li>æŒæ¡Requestå¯¹è±¡çš„æ¦‚å¿µä¸ä½¿ç”¨</li><li>æŒæ¡Responseå¯¹è±¡çš„æ¦‚å¿µä¸ä½¿ç”¨</li><li>èƒ½å¤Ÿå®Œæˆç”¨æˆ·ç™»å½•æ³¨å†Œæ¡ˆä¾‹çš„å®ç°</li><li>èƒ½å¤Ÿå®ŒæˆSqlSessionFactoryå·¥å…·ç±»çš„æŠ½å–</li></ul></blockquote><h2 id="1ï¼ŒRequestå’ŒResponseçš„æ¦‚è¿°"><a href="#1ï¼ŒRequestå’ŒResponseçš„æ¦‚è¿°" class="headerlink" title="1ï¼ŒRequestå’ŒResponseçš„æ¦‚è¿°"></a>1ï¼ŒRequestå’ŒResponseçš„æ¦‚è¿°</h2><p>==Requestæ˜¯è¯·æ±‚å¯¹è±¡ï¼ŒResponseæ˜¯å“åº”å¯¹è±¡ã€‚==è¿™ä¸¤ä¸ªå¯¹è±¡åœ¨æˆ‘ä»¬ä½¿ç”¨Servletçš„æ—¶å€™æœ‰çœ‹åˆ°ï¼š<img src="assets/1628735216156.png" alt="1628735216156"></p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦æ€è€ƒä¸€ä¸ªé—®é¢˜requestå’Œresponseè¿™ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆ?</p><p><img src="assets/1628735746602.png" alt="1628735746602"></p><ul><li>request:==è·å–==è¯·æ±‚æ•°æ®<ul><li>æµè§ˆå™¨ä¼šå‘é€HTTPè¯·æ±‚åˆ°åå°æœåŠ¡å™¨[Tomcat]</li><li>HTTPçš„è¯·æ±‚ä¸­ä¼šåŒ…å«å¾ˆå¤šè¯·æ±‚æ•°æ®[è¯·æ±‚è¡Œ+è¯·æ±‚å¤´+è¯·æ±‚ä½“]</li><li>åå°æœåŠ¡å™¨[Tomcat]ä¼šå¯¹HTTPè¯·æ±‚ä¸­çš„æ•°æ®è¿›è¡Œè§£æå¹¶æŠŠè§£æç»“æœå­˜å…¥åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­</li><li>æ‰€å­˜å…¥çš„å¯¹è±¡å³ä¸ºrequestå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»requestå¯¹è±¡ä¸­è·å–è¯·æ±‚çš„ç›¸å…³å‚æ•°</li><li>è·å–åˆ°æ•°æ®åå°±å¯ä»¥ç»§ç»­åç»­çš„ä¸šåŠ¡ï¼Œæ¯”å¦‚è·å–ç”¨æˆ·åå’Œå¯†ç å°±å¯ä»¥å®ç°ç™»å½•æ“ä½œçš„ç›¸å…³ä¸šåŠ¡</li></ul></li><li>response:==è®¾ç½®==å“åº”æ•°æ®<ul><li>ä¸šåŠ¡å¤„ç†å®Œåï¼Œåå°å°±éœ€è¦ç»™å‰ç«¯è¿”å›ä¸šåŠ¡å¤„ç†çš„ç»“æœå³å“åº”æ•°æ®</li><li>æŠŠå“åº”æ•°æ®å°è£…åˆ°responseå¯¹è±¡ä¸­</li><li>åå°æœåŠ¡å™¨[Tomcat]ä¼šè§£æresponseå¯¹è±¡,æŒ‰ç…§[å“åº”è¡Œ+å“åº”å¤´+å“åº”ä½“]æ ¼å¼æ‹¼æ¥ç»“æœ</li><li>æµè§ˆå™¨æœ€ç»ˆè§£æç»“æœï¼ŒæŠŠå†…å®¹å±•ç¤ºåœ¨æµè§ˆå™¨ç»™ç”¨æˆ·æµè§ˆ</li></ul></li></ul><p>å¯¹äºä¸Šè¿°æ‰€è®²çš„å†…å®¹ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥åˆæ­¥ä½“éªŒä¸‹requestå’Œresponseå¯¹è±¡çš„ä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//ä½¿ç”¨requestå¯¹è±¡ è·å–è¯·æ±‚æ•°æ®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;name&quot;</span>);<span class="comment">//url?name=zhangsan</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä½¿ç”¨responseå¯¹è±¡ è®¾ç½®å“åº”æ•°æ®</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;content-type&quot;</span>,<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;&lt;h1&gt;&quot;</span>+name+<span class="string">&quot;,æ¬¢è¿æ‚¨ï¼&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Post...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æˆåŠŸåå°±å¯ä»¥é€šè¿‡æµè§ˆå™¨æ¥è®¿é—®ï¼Œå¹¶ä¸”æ ¹æ®ä¼ å…¥å‚æ•°çš„ä¸åŒå°±å¯ä»¥åœ¨é¡µé¢ä¸Šå±•ç¤ºä¸åŒçš„å†…å®¹:</p><p><img src="assets/1628738273049.png" alt="1628738273049"></p><p><strong>å°ç»“</strong></p><p>åœ¨è¿™èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦è®¤è¯†äº†ä¸‹requestå¯¹è±¡å’Œreponseå¯¹è±¡:</p><ul><li>requestå¯¹è±¡æ˜¯ç”¨æ¥å°è£…è¯·æ±‚æ•°æ®çš„å¯¹è±¡</li><li>responseå¯¹è±¡æ˜¯ç”¨æ¥å°è£…å“åº”æ•°æ®çš„å¯¹è±¡</li></ul><p>ç›®å‰æˆ‘ä»¬åªçŸ¥é“è¿™ä¸¤ä¸ªå¯¹è±¡æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Œé‚£ä¹ˆå®ƒä»¬å…·ä½“æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå°±éœ€è¦æˆ‘ä»¬ç»§ç»­æ·±å…¥çš„å­¦ä¹ ã€‚æ¥ä¸‹æ¥ï¼Œå°±å…ˆä»Requestå¯¹è±¡æ¥å­¦ä¹ ,ä¸»è¦å­¦ä¹ ä¸‹é¢è¿™äº›å†…å®¹:</p><ul><li><p>requestç»§æ‰¿ä½“ç³»</p></li><li><p>requestè·å–è¯·æ±‚å‚æ•°</p></li><li>requestè¯·æ±‚è½¬å‘</li></ul><h2 id="2ï¼ŒRequestå¯¹è±¡"><a href="#2ï¼ŒRequestå¯¹è±¡" class="headerlink" title="2ï¼ŒRequestå¯¹è±¡"></a>2ï¼ŒRequestå¯¹è±¡</h2><h3 id="2-1-Requestç»§æ‰¿ä½“ç³»"><a href="#2-1-Requestç»§æ‰¿ä½“ç³»" class="headerlink" title="2.1 Requestç»§æ‰¿ä½“ç³»"></a>2.1 Requestç»§æ‰¿ä½“ç³»</h3><p>åœ¨å­¦ä¹ è¿™èŠ‚å†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œå‰é¢åœ¨ä»‹ç»Requestå’ŒReponseå¯¹è±¡çš„æ—¶å€™ï¼Œæ¯”è¾ƒç»†å¿ƒçš„åŒå­¦å¯èƒ½å·²ç»å‘ç°ï¼š</p><ul><li>å½“æˆ‘ä»¬çš„Servletç±»å®ç°çš„æ˜¯Servletæ¥å£çš„æ—¶å€™ï¼Œserviceæ–¹æ³•ä¸­çš„å‚æ•°æ˜¯ServletRequestå’ŒServletResponse</li><li>å½“æˆ‘ä»¬çš„Servletç±»ç»§æ‰¿çš„æ˜¯HttpServletç±»çš„æ—¶å€™ï¼ŒdoGetå’ŒdoPostæ–¹æ³•ä¸­çš„å‚æ•°å°±å˜æˆHttpServletRequestå’ŒHttpServletReponse</li></ul><p>é‚£ä¹ˆï¼Œ</p><ul><li>ServletRequestå’ŒHttpServletRequestçš„å…³ç³»æ˜¯ä»€ä¹ˆ?</li><li>requestå¯¹è±¡æ˜¯æœ‰è°æ¥åˆ›å»ºçš„?</li><li>requestæä¾›äº†å“ªäº›API,è¿™äº›APIä»å“ªé‡ŒæŸ¥?</li></ul><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹Requestçš„ç»§æ‰¿ä½“ç³»:</p><p><img src="assets/1628740441008.png" alt="1628740441008"></p><p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒServletRequestå’ŒHttpServletRequestéƒ½æ˜¯Javaæä¾›çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ‰“å¼€JavaEEæä¾›çš„APIæ–‡æ¡£[å‚è€ƒ: èµ„æ–™/JavaEE7-api.chm],æ‰“å¼€åå¯ä»¥çœ‹åˆ°:</p><p><img src="assets/1628741839475.png" alt="1628741839475"></p><p>æ‰€ä»¥ServletRequestå’ŒHttpServletRequestæ˜¯ç»§æ‰¿å…³ç³»ï¼Œå¹¶ä¸”ä¸¤ä¸ªéƒ½æ˜¯æ¥å£ï¼Œæ¥å£æ˜¯æ— æ³•åˆ›å»ºå¯¹è±¡ï¼Œè¿™ä¸ªæ—¶å€™å°±å¼•å‘äº†ä¸‹é¢è¿™ä¸ªé—®é¢˜:</p><p><img src="assets/1628742224589.png" alt="1628742224589"></p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°Requestç»§æ‰¿ä½“ç³»ä¸­çš„<code>RequestFacade</code>:</p><ul><li>è¯¥ç±»å®ç°äº†HttpServletRequestæ¥å£ï¼Œä¹Ÿé—´æ¥å®ç°äº†ServletRequestæ¥å£ã€‚</li><li>Servletç±»ä¸­çš„serviceæ–¹æ³•ã€doGetæ–¹æ³•æˆ–è€…æ˜¯doPostæ–¹æ³•æœ€ç»ˆéƒ½æ˜¯ç”±WebæœåŠ¡å™¨[Tomcat]æ¥è°ƒç”¨çš„ï¼Œæ‰€ä»¥Tomcatæä¾›äº†æ–¹æ³•å‚æ•°æ¥å£çš„å…·ä½“å®ç°ç±»ï¼Œå¹¶å®Œæˆäº†å¯¹è±¡çš„åˆ›å»º</li><li>è¦æƒ³äº†è§£RequestFacadeä¸­éƒ½æä¾›äº†å“ªäº›æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥çœ‹JavaEEçš„APIæ–‡æ¡£ä¸­å…³äºServletRequestå’ŒHttpServletRequestçš„æ¥å£æ–‡æ¡£ï¼Œå› ä¸ºRequestFacadeå®ç°äº†å…¶æ¥å£å°±éœ€è¦é‡å†™æ¥å£ä¸­çš„æ–¹æ³•</li></ul><p>å¯¹äºä¸Šè¿°ç»“è®ºï¼Œè¦æƒ³éªŒè¯ï¼Œå¯ä»¥ç¼–å†™ä¸€ä¸ªServletï¼Œåœ¨æ–¹æ³•ä¸­æŠŠrequestå¯¹è±¡æ‰“å°ä¸‹ï¼Œå°±èƒ½çœ‹åˆ°æœ€ç»ˆçš„å¯¹è±¡æ˜¯ä¸æ˜¯RequestFacade,ä»£ç å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(request);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œè¿è¡Œè®¿é—®<code>http://localhost:8080/request-demo/demo2</code>,å¾—åˆ°è¿è¡Œç»“æœ:</p><p><img src="assets/1628743040046.png" alt="1628743040046"></p><p><strong>å°ç»“</strong></p><ul><li>Requestçš„ç»§æ‰¿ä½“ç³»ä¸ºServletRequestâ€”&gt;HttpServletRequestâ€”&gt;RequestFacade</li><li>Tomcatéœ€è¦è§£æè¯·æ±‚æ•°æ®ï¼Œå°è£…ä¸ºrequestå¯¹è±¡,å¹¶ä¸”åˆ›å»ºrequestå¯¹è±¡ä¼ é€’åˆ°serviceæ–¹æ³•</li><li>ä½¿ç”¨requestå¯¹è±¡ï¼Œå¯ä»¥æŸ¥é˜…JavaEE APIæ–‡æ¡£çš„HttpServletRequestæ¥å£ä¸­æ–¹æ³•è¯´æ˜</li></ul><h3 id="2-2-Requestè·å–è¯·æ±‚æ•°æ®"><a href="#2-2-Requestè·å–è¯·æ±‚æ•°æ®" class="headerlink" title="2.2 Requestè·å–è¯·æ±‚æ•°æ®"></a>2.2 Requestè·å–è¯·æ±‚æ•°æ®</h3><p>HTTPè¯·æ±‚æ•°æ®æ€»å…±åˆ†ä¸ºä¸‰éƒ¨åˆ†å†…å®¹ï¼Œåˆ†åˆ«æ˜¯==è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“==ï¼Œå¯¹äºè¿™ä¸‰éƒ¨åˆ†å†…å®¹çš„æ•°æ®ï¼Œåˆ†åˆ«è¯¥å¦‚ä½•è·å–ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆæ¥å­¦ä¹ è¯·æ±‚è¡Œæ•°æ®å¦‚ä½•è·å–?</p><h4 id="2-2-1-è·å–è¯·æ±‚è¡Œæ•°æ®"><a href="#2-2-1-è·å–è¯·æ±‚è¡Œæ•°æ®" class="headerlink" title="2.2.1 è·å–è¯·æ±‚è¡Œæ•°æ®"></a>2.2.1 è·å–è¯·æ±‚è¡Œæ•°æ®</h4><p>è¯·æ±‚è¡ŒåŒ…å«ä¸‰å—å†…å®¹ï¼Œåˆ†åˆ«æ˜¯<code>è¯·æ±‚æ–¹å¼</code>ã€<code>è¯·æ±‚èµ„æºè·¯å¾„</code>ã€<code>HTTPåè®®åŠç‰ˆæœ¬</code></p><p><img src="assets/1628748240075.png" alt="1628748240075"></p><p>å¯¹äºè¿™ä¸‰éƒ¨åˆ†å†…å®¹ï¼Œrequestå¯¹è±¡éƒ½æä¾›äº†å¯¹åº”çš„APIæ–¹æ³•æ¥è·å–ï¼Œå…·ä½“å¦‚ä¸‹:</p><ul><li>è·å–è¯·æ±‚æ–¹å¼: <code>GET</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getMethod()</span><br></pre></td></tr></table></figure><ul><li>è·å–è™šæ‹Ÿç›®å½•(é¡¹ç›®è®¿é—®è·¯å¾„): <code>/request-demo</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getContextPath()</span><br></pre></td></tr></table></figure><ul><li>è·å–URL(ç»Ÿä¸€èµ„æºå®šä½ç¬¦): <code>http://localhost:8080/request-demo/req1</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer getRequestURL()</span><br></pre></td></tr></table></figure><ul><li>è·å–URI(ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦): <code>/request-demo/req1</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getRequestURI()</span><br></pre></td></tr></table></figure><ul><li>è·å–è¯·æ±‚å‚æ•°(GETæ–¹å¼): <code>username=zhangsan&amp;password=123</code></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getQueryString()</span><br></pre></td></tr></table></figure><p>ä»‹ç»å®Œä¸Šè¿°æ–¹æ³•åï¼Œå’±ä»¬é€šè¿‡ä»£ç æŠŠä¸Šè¿°æ–¹æ³•éƒ½ä½¿ç”¨ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request è·å–è¯·æ±‚æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// String getMethod()ï¼šè·å–è¯·æ±‚æ–¹å¼ï¼š GET</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> req.getMethod();</span><br><span class="line">        System.out.println(method);<span class="comment">//GET</span></span><br><span class="line">        <span class="comment">// String getContextPath()ï¼šè·å–è™šæ‹Ÿç›®å½•(é¡¹ç›®è®¿é—®è·¯å¾„)ï¼š/request-demo</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> req.getContextPath();</span><br><span class="line">        System.out.println(contextPath);</span><br><span class="line">        <span class="comment">// StringBuffer getRequestURL(): è·å–URL(ç»Ÿä¸€èµ„æºå®šä½ç¬¦)ï¼šhttp://localhost:8080/request-demo/req1</span></span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">url</span> <span class="operator">=</span> req.getRequestURL();</span><br><span class="line">        System.out.println(url.toString());</span><br><span class="line">        <span class="comment">// String getRequestURI()ï¼šè·å–URI(ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦)ï¼š /request-demo/req1</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> req.getRequestURI();</span><br><span class="line">        System.out.println(uri);</span><br><span class="line">        <span class="comment">// String getQueryString()ï¼šè·å–è¯·æ±‚å‚æ•°ï¼ˆGETæ–¹å¼ï¼‰ï¼š username=zhangsan</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queryString</span> <span class="operator">=</span> req.getQueryString();</span><br><span class="line">        System.out.println(queryString);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯åŠ¨æœåŠ¡å™¨ï¼Œè®¿é—®<code>http://localhost:8080/request-demo/req1?username=zhangsan&amp;passwrod=123</code>ï¼Œè·å–çš„ç»“æœå¦‚ä¸‹:</p><p><img src="assets/1628762794935.png" alt="1628762794935"></p><h4 id="2-2-2-è·å–è¯·æ±‚å¤´æ•°æ®"><a href="#2-2-2-è·å–è¯·æ±‚å¤´æ•°æ®" class="headerlink" title="2.2.2 è·å–è¯·æ±‚å¤´æ•°æ®"></a>2.2.2 è·å–è¯·æ±‚å¤´æ•°æ®</h4><p>å¯¹äºè¯·æ±‚å¤´çš„æ•°æ®ï¼Œæ ¼å¼ä¸º<code>key: value</code>å¦‚ä¸‹:</p><p><img src="assets/1628768652535.png" alt="1628768652535"></p><p>æ‰€ä»¥æ ¹æ®è¯·æ±‚å¤´åç§°è·å–å¯¹åº”å€¼çš„æ–¹æ³•ä¸º:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getHeader(String name)</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œåœ¨ä»£ç ä¸­å¦‚æœæƒ³è¦è·å–å®¢æˆ·ç«¯æµè§ˆå™¨çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™å¯ä»¥ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request è·å–è¯·æ±‚æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//è·å–è¯·æ±‚å¤´: user-agent: æµè§ˆå™¨çš„ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">agent</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;user-agent&quot;</span>);</span><br><span class="line">System.out.println(agent);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨æœåŠ¡å™¨åï¼Œ<code>http://localhost:8080/request-demo/req1?username=zhangsan&amp;passwrod=123</code>ï¼Œè·å–çš„ç»“æœå¦‚ä¸‹:</p><p><img src="assets/1628769145524.png" alt="1628769145524"></p><h4 id="2-2-3-è·å–è¯·æ±‚ä½“æ•°æ®"><a href="#2-2-3-è·å–è¯·æ±‚ä½“æ•°æ®" class="headerlink" title="2.2.3 è·å–è¯·æ±‚ä½“æ•°æ®"></a>2.2.3 è·å–è¯·æ±‚ä½“æ•°æ®</h4><p>æµè§ˆå™¨åœ¨å‘é€GETè¯·æ±‚çš„æ—¶å€™æ˜¯æ²¡æœ‰è¯·æ±‚ä½“çš„ï¼Œæ‰€ä»¥éœ€è¦æŠŠè¯·æ±‚æ–¹å¼å˜æ›´ä¸ºPOSTï¼Œè¯·æ±‚ä½“ä¸­çš„æ•°æ®æ ¼å¼å¦‚ä¸‹:</p><p><img src="assets/1628768665185.png" alt="1628768665185"></p><p>å¯¹äºè¯·æ±‚ä½“ä¸­çš„æ•°æ®ï¼ŒRequestå¯¹è±¡æä¾›äº†å¦‚ä¸‹ä¸¤ç§æ–¹å¼æ¥è·å–å…¶ä¸­çš„æ•°æ®ï¼Œåˆ†åˆ«æ˜¯:</p><ul><li>è·å–å­—èŠ‚è¾“å…¥æµï¼Œå¦‚æœå‰ç«¯å‘é€çš„æ˜¯å­—èŠ‚æ•°æ®ï¼Œæ¯”å¦‚ä¼ é€’çš„æ˜¯æ–‡ä»¶æ•°æ®ï¼Œåˆ™ä½¿ç”¨è¯¥æ–¹æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServletInputStream getInputStream()</span><br><span class="line">è¯¥æ–¹æ³•å¯ä»¥è·å–å­—èŠ‚</span><br></pre></td></tr></table></figure><ul><li>è·å–å­—ç¬¦è¾“å…¥æµï¼Œå¦‚æœå‰ç«¯å‘é€çš„æ˜¯çº¯æ–‡æœ¬æ•°æ®ï¼Œåˆ™ä½¿ç”¨è¯¥æ–¹æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BufferedReader getReader()</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œå¤§å®¶éœ€è¦æ€è€ƒï¼Œè¦æƒ³è·å–åˆ°è¯·æ±‚ä½“çš„å†…å®¹è¯¥å¦‚ä½•å®ç°?</p><blockquote><p>å…·ä½“å®ç°çš„æ­¥éª¤å¦‚ä¸‹:</p><p>1.å‡†å¤‡ä¸€ä¸ªé¡µé¢ï¼Œåœ¨é¡µé¢ä¸­æ·»åŠ formè¡¨å•,ç”¨æ¥å‘é€postè¯·æ±‚</p><p>2.åœ¨Servletçš„doPostæ–¹æ³•ä¸­è·å–è¯·æ±‚ä½“æ•°æ®</p><p>3.åœ¨doPostæ–¹æ³•ä¸­ä½¿ç”¨requestçš„getReader()æˆ–è€…getInputStream()æ¥è·å–</p><p>4.è®¿é—®æµ‹è¯•</p></blockquote><ol><li>åœ¨é¡¹ç›®çš„webappç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªhtmlé¡µé¢ï¼Œåç§°ä¸ºï¼š<code>req.html</code></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    action:formè¡¨å•æäº¤çš„è¯·æ±‚åœ°å€</span></span><br><span class="line"><span class="comment">    method:è¯·æ±‚æ–¹å¼ï¼ŒæŒ‡å®šä¸ºpost</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/request-demo/req1&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>åœ¨Servletçš„doPostæ–¹æ³•ä¸­è·å–æ•°æ®</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request è·å–è¯·æ±‚æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//åœ¨æ­¤å¤„è·å–è¯·æ±‚ä½“ä¸­çš„æ•°æ®</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>è°ƒç”¨getReader()æˆ–è€…getInputStream()æ–¹æ³•ï¼Œå› ä¸ºç›®å‰å‰ç«¯ä¼ é€’çš„æ˜¯çº¯æ–‡æœ¬æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨getReader()æ–¹æ³•æ¥è·å–</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request è·å–è¯·æ±‚æ•°æ®</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">         <span class="comment">//è·å–post è¯·æ±‚ä½“ï¼šè¯·æ±‚å‚æ•°</span></span><br><span class="line">        <span class="comment">//1. è·å–å­—ç¬¦è¾“å…¥æµ</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> req.getReader();</span><br><span class="line">        <span class="comment">//2. è¯»å–æ•°æ®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">        System.out.println(line);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>==æ³¨æ„==</p><p>BufferedReaderæµæ˜¯é€šè¿‡requestå¯¹è±¡æ¥è·å–çš„ï¼Œå½“è¯·æ±‚å®Œæˆårequestå¯¹è±¡å°±ä¼šè¢«é”€æ¯ï¼Œrequestå¯¹è±¡è¢«é”€æ¯åï¼ŒBufferedReaderæµå°±ä¼šè‡ªåŠ¨å…³é—­ï¼Œæ‰€ä»¥æ­¤å¤„å°±ä¸éœ€è¦æ‰‹åŠ¨å…³é—­æµäº†ã€‚</p><ol><li>å¯åŠ¨æœåŠ¡å™¨ï¼Œé€šè¿‡æµè§ˆå™¨è®¿é—®<code>http://localhost:8080/request-demo/req.html</code></li></ol><p><img src="assets/1628770516387.png" alt="1628770516387"></p><p>ç‚¹å‡»<code>æäº¤</code>æŒ‰é’®åï¼Œå°±å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å‰ç«¯æ‰€å‘é€çš„è¯·æ±‚æ•°æ®</p><p><img src="assets/1628770585480.png" alt="1628770585480"></p><p><strong>å°ç»“</strong></p><p>HTTPè¯·æ±‚æ•°æ®ä¸­åŒ…å«äº†<code>è¯·æ±‚è¡Œ</code>ã€<code>è¯·æ±‚å¤´</code>å’Œ<code>è¯·æ±‚ä½“</code>ï¼Œé’ˆå¯¹è¿™ä¸‰éƒ¨åˆ†å†…å®¹ï¼ŒRequestå¯¹è±¡éƒ½æä¾›äº†å¯¹åº”çš„APIæ–¹æ³•æ¥è·å–å¯¹åº”çš„å€¼:</p><ul><li>è¯·æ±‚è¡Œ<ul><li>getMethod()è·å–è¯·æ±‚æ–¹å¼</li><li>getContextPath()è·å–é¡¹ç›®è®¿é—®è·¯å¾„</li><li>getRequestURL()è·å–è¯·æ±‚URL</li><li>getRequestURI()è·å–è¯·æ±‚URI</li><li>getQueryString()è·å–GETè¯·æ±‚æ–¹å¼çš„è¯·æ±‚å‚æ•°</li></ul></li><li>è¯·æ±‚å¤´<ul><li>getHeader(String name)æ ¹æ®è¯·æ±‚å¤´åç§°è·å–å…¶å¯¹åº”çš„å€¼</li></ul></li><li>è¯·æ±‚ä½“<ul><li>æ³¨æ„: ==æµè§ˆå™¨å‘é€çš„POSTè¯·æ±‚æ‰æœ‰è¯·æ±‚ä½“==</li><li>å¦‚æœæ˜¯çº¯æ–‡æœ¬æ•°æ®:getReader()</li><li>å¦‚æœæ˜¯å­—èŠ‚æ•°æ®å¦‚æ–‡ä»¶æ•°æ®:getInputStream()</li></ul></li></ul><h4 id="2-2-4-è·å–è¯·æ±‚å‚æ•°çš„é€šç”¨æ–¹å¼"><a href="#2-2-4-è·å–è¯·æ±‚å‚æ•°çš„é€šç”¨æ–¹å¼" class="headerlink" title="2.2.4 è·å–è¯·æ±‚å‚æ•°çš„é€šç”¨æ–¹å¼"></a>2.2.4 è·å–è¯·æ±‚å‚æ•°çš„é€šç”¨æ–¹å¼</h4><p>åœ¨å­¦ä¹ ä¸‹é¢å†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæå‡ºä¸¤ä¸ªé—®é¢˜:</p><ul><li>ä»€ä¹ˆæ˜¯è¯·æ±‚å‚æ•°?</li><li>è¯·æ±‚å‚æ•°å’Œè¯·æ±‚æ•°æ®çš„å…³ç³»æ˜¯ä»€ä¹ˆ?</li></ul><p>1.ä»€ä¹ˆæ˜¯è¯·æ±‚å‚æ•°?</p><p>ä¸ºäº†èƒ½æ›´å¥½çš„å›ç­”ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ‹¿ç”¨æˆ·ç™»å½•çš„ä¾‹å­æ¥è¯´æ˜</p><p>1.1 æƒ³è¦ç™»å½•ç½‘å€ï¼Œéœ€è¦è¿›å…¥ç™»å½•é¡µé¢</p><p>1.2 åœ¨ç™»å½•é¡µé¢è¾“å…¥ç”¨æˆ·åå’Œå¯†ç </p><p>1.3 å°†ç”¨æˆ·åå’Œå¯†ç æäº¤åˆ°åå°</p><p>1.4 åå°æ ¡éªŒç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®</p><p>1.5 å¦‚æœæ­£ç¡®ï¼Œåˆ™æ­£å¸¸ç™»å½•ï¼Œå¦‚æœä¸æ­£ç¡®ï¼Œåˆ™æç¤ºç”¨æˆ·åæˆ–å¯†ç é”™è¯¯</p><p>ä¸Šè¿°ä¾‹å­ä¸­ï¼Œç”¨æˆ·åå’Œå¯†ç å…¶å®å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„è¯·æ±‚å‚æ•°ã€‚</p><p>2.ä»€ä¹ˆæ˜¯è¯·æ±‚æ•°æ®?</p><p>è¯·æ±‚æ•°æ®åˆ™æ˜¯åŒ…å«è¯·æ±‚è¡Œã€è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“çš„æ‰€æœ‰æ•°æ®</p><p>3.è¯·æ±‚å‚æ•°å’Œè¯·æ±‚æ•°æ®çš„å…³ç³»æ˜¯ä»€ä¹ˆ?</p><p>3.1 è¯·æ±‚å‚æ•°æ˜¯è¯·æ±‚æ•°æ®ä¸­çš„éƒ¨åˆ†å†…å®¹</p><p>3.2 å¦‚æœæ˜¯GETè¯·æ±‚ï¼Œè¯·æ±‚å‚æ•°åœ¨è¯·æ±‚è¡Œä¸­</p><p>3.3 å¦‚æœæ˜¯POSTè¯·æ±‚ï¼Œè¯·æ±‚å‚æ•°ä¸€èˆ¬åœ¨è¯·æ±‚ä½“ä¸­</p><p>å¯¹äºè¯·æ±‚å‚æ•°çš„è·å–,å¸¸ç”¨çš„æœ‰ä»¥ä¸‹ä¸¤ç§:</p><ul><li>GETæ–¹å¼:</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getQueryString()</span><br></pre></td></tr></table></figure><ul><li>POSTæ–¹å¼:</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BufferedReader getReader();</span><br></pre></td></tr></table></figure><p>æœ‰äº†ä¸Šè¿°çš„çŸ¥è¯†å‚¨å¤‡ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªæ¡ˆä¾‹éœ€æ±‚:</p><p>ï¼ˆ1ï¼‰å‘é€ä¸€ä¸ªGETè¯·æ±‚å¹¶æºå¸¦ç”¨æˆ·åï¼Œåå°æ¥æ”¶åæ‰“å°åˆ°æ§åˆ¶å°</p><p>ï¼ˆ2ï¼‰å‘é€ä¸€ä¸ªPOSTè¯·æ±‚å¹¶æºå¸¦ç”¨æˆ·åï¼Œåå°æ¥æ”¶åæ‰“å°åˆ°æ§åˆ¶å°</p><p>æ­¤å¤„å¤§å®¶éœ€è¦æ³¨æ„çš„æ˜¯GETè¯·æ±‚å’ŒPOSTè¯·æ±‚æ¥æ”¶å‚æ•°çš„æ–¹å¼ä¸ä¸€æ ·ï¼Œå…·ä½“å®ç°çš„ä»£ç å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> req.getQueryString();</span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> req.getReader();</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯¹äºä¸Šè¿°çš„ä»£ç ï¼Œä¼šå­˜åœ¨ä»€ä¹ˆé—®é¢˜å‘¢?</li></ul><p><img src="assets/1628776252445.png" alt="1628776252445"></p><ul><li>å¦‚ä½•è§£å†³ä¸Šè¿°é‡å¤ä»£ç çš„é—®é¢˜å‘¢?</li></ul><p><img src="assets/1628776433318.png" alt="1628776433318"></p><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åœ¨doGetä¸­è°ƒç”¨doPost,åœ¨doPostä¸­å®Œæˆå‚æ•°çš„è·å–å’Œæ‰“å°,å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒdoGetå’ŒdoPostæ–¹æ³•éƒ½å¿…é¡»å­˜åœ¨ï¼Œä¸èƒ½åˆ é™¤ä»»æ„ä¸€ä¸ªã€‚</p><p>==GETè¯·æ±‚å’ŒPOSTè¯·æ±‚è·å–è¯·æ±‚å‚æ•°çš„æ–¹å¼ä¸ä¸€æ ·ï¼Œåœ¨è·å–è¯·æ±‚å‚æ•°è¿™å—è¯¥å¦‚ä½•å®ç°å‘¢?==</p><p>è¦æƒ³å®ç°ï¼Œæˆ‘ä»¬å°±éœ€è¦==æ€è€ƒ==:</p><p>GETè¯·æ±‚æ–¹å¼å’ŒPOSTè¯·æ±‚æ–¹å¼åŒºåˆ«ä¸»è¦åœ¨äºè·å–è¯·æ±‚å‚æ•°çš„æ–¹å¼ä¸ä¸€æ ·ï¼Œæ˜¯å¦å¯ä»¥æä¾›ä¸€ç§==ç»Ÿä¸€==è·å–è¯·æ±‚å‚æ•°çš„æ–¹å¼ï¼Œä»è€Œ==ç»Ÿä¸€==doGetå’ŒdoPostæ–¹æ³•å†…çš„ä»£ç ?</p><p>è§£å†³æ–¹æ¡ˆä¸€:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//è·å–è¯·æ±‚æ–¹å¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> req.getMethod();</span><br><span class="line">        <span class="comment">//è·å–è¯·æ±‚å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">params</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;GET&quot;</span>.equals(method))&#123;</span><br><span class="line">            params = req.getQueryString();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;POST&quot;</span>.equals(method))&#123;</span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> req.getReader();</span><br><span class="line">            params = reader.readLine();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å°†è¯·æ±‚å‚æ•°è¿›è¡Œæ‰“å°æ§åˆ¶å°</span></span><br><span class="line">        System.out.println(params);</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨requestçš„getMethod()æ¥è·å–è¯·æ±‚æ–¹å¼ï¼Œæ ¹æ®è¯·æ±‚æ–¹å¼çš„ä¸åŒåˆ†åˆ«è·å–è¯·æ±‚å‚æ•°å€¼ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œä½†æ˜¯ä»¥åæ¯ä¸ªServletéƒ½éœ€è¦è¿™æ ·å†™ä»£ç ï¼Œå®ç°èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™ç§æ–¹æ¡ˆæˆ‘ä»¬ä¸é‡‡ç”¨</p><p>è§£å†³æ–¹æ¡ˆäºŒ:</p><p>requestå¯¹è±¡å·²ç»å°†ä¸Šè¿°è·å–è¯·æ±‚å‚æ•°çš„æ–¹æ³•è¿›è¡Œäº†å°è£…ï¼Œå¹¶ä¸”requestæä¾›çš„æ–¹æ³•å®ç°çš„åŠŸèƒ½æ›´å¼ºå¤§ï¼Œä»¥ååªéœ€è¦è°ƒç”¨requestæä¾›çš„æ–¹æ³•å³å¯ï¼Œåœ¨requestçš„æ–¹æ³•ä¸­éƒ½å®ç°äº†å“ªäº›æ“ä½œ?</p><p>(1)æ ¹æ®ä¸åŒçš„è¯·æ±‚æ–¹å¼è·å–è¯·æ±‚å‚æ•°ï¼Œè·å–çš„å†…å®¹å¦‚ä¸‹:</p><p><img src="assets/1628778931277.png" alt="1628778931277"></p><p>(2)æŠŠè·å–åˆ°çš„å†…å®¹è¿›è¡Œåˆ†å‰²ï¼Œå†…å®¹å¦‚ä¸‹:</p><p><img src="assets/1628779067793.png" alt="1628779067793"></p><p>(3)æŠŠåˆ†å‰²åç«¯æ•°æ®ï¼Œå­˜å…¥åˆ°ä¸€ä¸ªMapé›†åˆä¸­:</p><p><img src="assets/1628779368501.png" alt="1628779368501"></p><p><strong>æ³¨æ„</strong>:å› ä¸ºå‚æ•°çš„å€¼å¯èƒ½æ˜¯ä¸€ä¸ªï¼Œä¹Ÿå¯èƒ½æœ‰å¤šä¸ªï¼Œæ‰€ä»¥Mapçš„å€¼çš„ç±»å‹ä¸ºStringæ•°ç»„ã€‚</p><p>åŸºäºä¸Šè¿°ç†è®ºï¼Œrequestå¯¹è±¡ä¸ºæˆ‘ä»¬æä¾›äº†å¦‚ä¸‹æ–¹æ³•:</p><ul><li>è·å–æ‰€æœ‰å‚æ•°Mapé›†åˆ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,String[]&gt; getParameterMap()</span><br></pre></td></tr></table></figure><ul><li>æ ¹æ®åç§°è·å–å‚æ•°å€¼ï¼ˆæ•°ç»„ï¼‰</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String[] getParameterValues(String name)</span><br></pre></td></tr></table></figure><ul><li>æ ¹æ®åç§°è·å–å‚æ•°å€¼(å•ä¸ªå€¼)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getParameter(String name)</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡æ¡ˆä¾‹æ¥æŠŠä¸Šè¿°çš„ä¸‰ä¸ªæ–¹æ³•è¿›è¡Œå®ä¾‹æ¼”ç¤º:</p><p>1.ä¿®æ”¹req.htmlé¡µé¢ï¼Œæ·»åŠ çˆ±å¥½é€‰é¡¹ï¼Œçˆ±å¥½å¯ä»¥åŒæ—¶é€‰å¤šä¸ª</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/request-demo/req2&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span> æ¸¸æ³³</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span> çˆ¬å±± <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="assets/1628780937599.png" alt="1628780937599"></p><p>2.åœ¨Servletä»£ç ä¸­è·å–é¡µé¢ä¼ é€’GETè¯·æ±‚çš„å‚æ•°å€¼</p><p> 2.1è·å–GETæ–¹å¼çš„æ‰€æœ‰è¯·æ±‚å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request é€šç”¨æ–¹å¼è·å–è¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//GETè¯·æ±‚é€»è¾‘</span></span><br><span class="line">        System.out.println(<span class="string">&quot;get....&quot;</span>);</span><br><span class="line">        <span class="comment">//1. è·å–æ‰€æœ‰å‚æ•°çš„Mapé›†åˆ</span></span><br><span class="line">        Map&lt;String, String[]&gt; map = req.getParameterMap();</span><br><span class="line">        <span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">            <span class="comment">// username:zhangsan lisi</span></span><br><span class="line">            System.out.print(key+<span class="string">&quot;:&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è·å–å€¼</span></span><br><span class="line">            String[] values = map.get(key);</span><br><span class="line">            <span class="keyword">for</span> (String value : values) &#123;</span><br><span class="line">                System.out.print(value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·å–çš„ç»“æœä¸º:</p><p><img src="assets/1628780965283.png" alt="1628780965283"></p><p> 2.2è·å–GETè¯·æ±‚å‚æ•°ä¸­çš„çˆ±å¥½ï¼Œç»“æœæ˜¯æ•°ç»„å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request é€šç”¨æ–¹å¼è·å–è¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//GETè¯·æ±‚é€»è¾‘</span></span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        System.out.println(<span class="string">&quot;------------&quot;</span>);</span><br><span class="line">        String[] hobbies = req.getParameterValues(<span class="string">&quot;hobby&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String hobby : hobbies) &#123;</span><br><span class="line">            System.out.println(hobby);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·å–çš„ç»“æœä¸º:</p><p><img src="assets/1628781031437.png" alt="1628781031437"></p><p> 2.3è·å–GETè¯·æ±‚å‚æ•°ä¸­çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œç»“æœæ˜¯å•ä¸ªå€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request é€šç”¨æ–¹å¼è·å–è¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//GETè¯·æ±‚é€»è¾‘</span></span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(username);</span><br><span class="line">        System.out.println(password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·å–çš„ç»“æœä¸º:</p><p><img src="assets/1628781176434.png" alt="1628781176434"></p><p>3.åœ¨Servletä»£ç ä¸­è·å–é¡µé¢ä¼ é€’POSTè¯·æ±‚çš„å‚æ•°å€¼</p><p> 3.1å°†req.htmlé¡µé¢formè¡¨å•çš„æäº¤æ–¹å¼æ”¹æˆpost</p><p> 3.2å°†doGetæ–¹æ³•ä¸­çš„å†…å®¹å¤åˆ¶åˆ°doPostæ–¹æ³•ä¸­å³å¯</p><p><strong>å°ç»“</strong></p><ul><li><p>req.getParameter()æ–¹æ³•ä½¿ç”¨çš„é¢‘ç‡ä¼šæ¯”è¾ƒé«˜</p></li><li><p>ä»¥åæˆ‘ä»¬å†å†™ä»£ç çš„æ—¶å€™ï¼Œå°±åªéœ€è¦æŒ‰ç…§å¦‚ä¸‹æ ¼å¼æ¥ç¼–å†™:</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class RequestDemo1 extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">       //é‡‡ç”¨requestæä¾›çš„è·å–è¯·æ±‚å‚æ•°çš„é€šç”¨æ–¹å¼æ¥è·å–è¯·æ±‚å‚æ•°</span><br><span class="line">       //ç¼–å†™å…¶ä»–çš„ä¸šåŠ¡ä»£ç ...</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        this.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-IDEAå¿«é€Ÿåˆ›å»ºServlet"><a href="#2-3-IDEAå¿«é€Ÿåˆ›å»ºServlet" class="headerlink" title="2.3 IDEAå¿«é€Ÿåˆ›å»ºServlet"></a>2.3 IDEAå¿«é€Ÿåˆ›å»ºServlet</h3><p>ä½¿ç”¨é€šç”¨æ–¹å¼è·å–è¯·æ±‚å‚æ•°åï¼Œå±è”½äº†GETå’ŒPOSTçš„è¯·æ±‚æ–¹å¼ä»£ç çš„ä¸åŒï¼Œåˆ™ä»£ç å¯ä»¥å®šä¹‰å¦‚ä¸‹æ ¼å¼:</p><p><img src="assets/1628781419752.png" alt="1628781419752"></p><p>ç”±äºæ ¼å¼å›ºå®šï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨IDEAæä¾›çš„æ¨¡æ¿æ¥åˆ¶ä½œä¸€ä¸ªServletçš„æ¨¡æ¿ï¼Œè¿™æ ·æˆ‘ä»¬åæœŸåœ¨åˆ›å»ºServletçš„æ—¶å€™å°±ä¼šæ›´é«˜æ•ˆï¼Œå…·ä½“å¦‚ä½•å®ç°:</p><p>(1)æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚ï¼Œä¿®æ”¹Servletåˆ›å»ºçš„æ¨¡æ¿å†…å®¹</p><p><img src="assets/1628781545912.png" alt="1628781545912"></p><p>ï¼ˆ2ï¼‰ä½¿ç”¨servletæ¨¡æ¿åˆ›å»ºServletç±»</p><p><img src="assets/1628782117420.png" alt="1628782117420"></p><h3 id="2-4-è¯·æ±‚å‚æ•°ä¸­æ–‡ä¹±ç é—®é¢˜"><a href="#2-4-è¯·æ±‚å‚æ•°ä¸­æ–‡ä¹±ç é—®é¢˜" class="headerlink" title="2.4 è¯·æ±‚å‚æ•°ä¸­æ–‡ä¹±ç é—®é¢˜"></a>2.4 è¯·æ±‚å‚æ•°ä¸­æ–‡ä¹±ç é—®é¢˜</h3><p>é—®é¢˜å±•ç¤º:</p><p>(1)å°†req.htmlé¡µé¢çš„è¯·æ±‚æ–¹å¼ä¿®æ”¹ä¸ºget</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;/request-demo/req2&quot; method=&quot;get&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;1&quot;&gt; æ¸¸æ³³</span><br><span class="line">    &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;2&quot;&gt; çˆ¬å±± &lt;br&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>(2)åœ¨Servletæ–¹æ³•ä¸­è·å–å‚æ•°ï¼Œå¹¶æ‰“å°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸­æ–‡ä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">//1. è·å–username</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">       System.out.println(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰å¯åŠ¨æœåŠ¡å™¨ï¼Œé¡µé¢ä¸Šè¾“å…¥ä¸­æ–‡å‚æ•°</p><p><img src="assets/1628784323297.png" alt="1628784323297"></p><p>ï¼ˆ4ï¼‰æŸ¥çœ‹æ§åˆ¶å°æ‰“å°å†…å®¹</p><p><img src="assets/1628784356157.png" alt="1628784356157"></p><p>ï¼ˆ5ï¼‰æŠŠreq.htmlé¡µé¢çš„è¯·æ±‚æ–¹å¼æ”¹æˆpost,å†æ¬¡å‘é€è¯·æ±‚å’Œä¸­æ–‡å‚æ•°</p><p><img src="assets/1628784425182.png" alt="1628784425182"></p><p>ï¼ˆ6ï¼‰æŸ¥çœ‹æ§åˆ¶å°æ‰“å°å†…å®¹ï¼Œä¾ç„¶ä¸ºä¹±ç </p><p><img src="assets/1628784356157.png" alt="1628784356157"></p><p>é€šè¿‡ä¸Šé¢çš„æ¡ˆä¾‹ï¼Œä¼šå‘ç°ï¼Œä¸ç®¡æ˜¯GETè¿˜æ˜¯POSTè¯·æ±‚ï¼Œåœ¨å‘é€çš„è¯·æ±‚å‚æ•°ä¸­å¦‚æœæœ‰ä¸­æ–‡ï¼Œåœ¨åå°æ¥æ”¶çš„æ—¶å€™ï¼Œéƒ½ä¼šå‡ºç°ä¸­æ–‡ä¹±ç çš„é—®é¢˜ã€‚å…·ä½“è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p><h4 id="2-4-1-POSTè¯·æ±‚è§£å†³æ–¹æ¡ˆ"><a href="#2-4-1-POSTè¯·æ±‚è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2.4.1 POSTè¯·æ±‚è§£å†³æ–¹æ¡ˆ"></a>2.4.1 POSTè¯·æ±‚è§£å†³æ–¹æ¡ˆ</h4><ul><li>åˆ†æå‡ºç°ä¸­æ–‡ä¹±ç çš„åŸå› ï¼š<ul><li>POSTçš„è¯·æ±‚å‚æ•°æ˜¯é€šè¿‡requestçš„getReader()æ¥è·å–æµä¸­çš„æ•°æ®</li><li>TOMCATåœ¨è·å–æµçš„æ—¶å€™é‡‡ç”¨çš„ç¼–ç æ˜¯ISO-8859-1</li><li>ISO-8859-1ç¼–ç æ˜¯ä¸æ”¯æŒä¸­æ–‡çš„ï¼Œæ‰€ä»¥ä¼šå‡ºç°ä¹±ç </li></ul></li><li>è§£å†³æ–¹æ¡ˆï¼š<ul><li>é¡µé¢è®¾ç½®çš„ç¼–ç æ ¼å¼ä¸ºUTF-8</li><li>æŠŠTOMCATåœ¨è·å–æµæ•°æ®ä¹‹å‰çš„ç¼–ç è®¾ç½®ä¸ºUTF-8</li><li>é€šè¿‡request.setCharacterEncoding(â€œUTF-8â€)è®¾ç½®ç¼–ç ,UTF-8ä¹Ÿå¯ä»¥å†™æˆå°å†™</li></ul></li></ul><p>ä¿®æ”¹åçš„ä»£ç ä¸º:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¸­æ–‡ä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. è§£å†³ä¹±ç : POST getReader()</span></span><br><span class="line">        <span class="comment">//è®¾ç½®å­—ç¬¦è¾“å…¥æµçš„ç¼–ç ï¼Œè®¾ç½®çš„å­—ç¬¦é›†è¦å’Œé¡µé¢ä¿æŒä¸€è‡´</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">       <span class="comment">//2. è·å–username</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">       System.out.println(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡æ–°å‘é€POSTè¯·æ±‚ï¼Œå°±ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°æ­£å¸¸å±•ç¤ºçš„ä¸­æ–‡ç»“æœã€‚</p><p>è‡³æ­¤POSTè¯·æ±‚ä¸­æ–‡ä¹±ç çš„é—®é¢˜å°±å·²ç»è§£å†³ï¼Œä½†æ˜¯è¿™ç§æ–¹æ¡ˆä¸é€‚ç”¨äºGETè¯·æ±‚ï¼Œè¿™ä¸ªåŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Œå’±ä»¬ä¸‹é¢å†åˆ†æã€‚</p><h4 id="2-4-2-GETè¯·æ±‚è§£å†³æ–¹æ¡ˆ"><a href="#2-4-2-GETè¯·æ±‚è§£å†³æ–¹æ¡ˆ" class="headerlink" title="2.4.2 GETè¯·æ±‚è§£å†³æ–¹æ¡ˆ"></a>2.4.2 GETè¯·æ±‚è§£å†³æ–¹æ¡ˆ</h4><p>åˆšæ‰æåˆ°ä¸€ä¸ªé—®é¢˜æ˜¯<code>POSTè¯·æ±‚çš„ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ¡ˆä¸ºä»€ä¹ˆä¸é€‚ç”¨GETè¯·æ±‚ï¼Ÿ</code></p><ul><li>GETè¯·æ±‚è·å–è¯·æ±‚å‚æ•°çš„æ–¹å¼æ˜¯<code>request.getQueryString()</code></li><li>POSTè¯·æ±‚è·å–è¯·æ±‚å‚æ•°çš„æ–¹å¼æ˜¯<code>request.getReader()</code></li><li>request.setCharacterEncoding(â€œutf-8â€)æ˜¯è®¾ç½®requestå¤„ç†æµçš„ç¼–ç </li><li>getQueryStringæ–¹æ³•å¹¶æ²¡æœ‰é€šè¿‡æµçš„æ–¹å¼è·å–æ•°æ®</li></ul><p>æ‰€ä»¥GETè¯·æ±‚ä¸èƒ½ç”¨è®¾ç½®ç¼–ç çš„æ–¹å¼æ¥è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œé‚£é—®é¢˜åˆæ¥äº†ï¼Œå¦‚ä½•è§£å†³GETè¯·æ±‚çš„ä¸­æ–‡ä¹±ç å‘¢? </p><ol><li><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆåˆ†æä¸‹GETè¯·æ±‚å‡ºç°ä¹±ç çš„åŸå› :</p><p><img src="assets/1628829610823.png" alt="1628829610823"></p></li></ol><p>(1)æµè§ˆå™¨é€šè¿‡HTTPåè®®å‘é€è¯·æ±‚å’Œæ•°æ®ç»™åå°æœåŠ¡å™¨ï¼ˆTomcat)</p><p>(2)æµè§ˆå™¨åœ¨å‘é€HTTPçš„è¿‡ç¨‹ä¸­ä¼šå¯¹ä¸­æ–‡æ•°æ®è¿›è¡ŒURL==ç¼–ç ==</p><p>(3)åœ¨è¿›è¡ŒURLç¼–ç çš„æ—¶å€™ä¼šé‡‡ç”¨é¡µé¢<code>&lt;meta&gt;</code>æ ‡ç­¾æŒ‡å®šçš„UTF-8çš„æ–¹å¼è¿›è¡Œç¼–ç ï¼Œ<code>å¼ ä¸‰</code>ç¼–ç åçš„ç»“æœä¸º<code>%E5%BC%A0%E4%B8%89</code></p><p>(4)åå°æœåŠ¡å™¨(Tomcat)æ¥æ”¶åˆ°<code>%E5%BC%A0%E4%B8%89</code>åä¼šé»˜è®¤æŒ‰ç…§<code>ISO-8859-1</code>è¿›è¡ŒURL==è§£ç ==</p><p>(5)ç”±äºå‰åç¼–ç ä¸è§£ç é‡‡ç”¨çš„æ ¼å¼ä¸ä¸€æ ·ï¼Œå°±ä¼šå¯¼è‡´åå°è·å–åˆ°çš„æ•°æ®ä¸ºä¹±ç ã€‚</p><p>æ€è€ƒ: å¦‚æœæŠŠ<code>req.html</code>é¡µé¢çš„<code>&lt;meta&gt;</code>æ ‡ç­¾çš„charsetå±æ€§æ”¹æˆ<code>ISO-8859-1</code>,åå°ä¸åšæ“ä½œï¼Œèƒ½è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ä¹ˆ?</p><p>ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸º<code>ISO-8859-1</code>æœ¬èº«æ˜¯ä¸æ”¯æŒä¸­æ–‡å±•ç¤ºçš„ï¼Œæ‰€ä»¥æ”¹äº†<meta>æ ‡ç­¾çš„charsetå±æ€§åï¼Œä¼šå¯¼è‡´é¡µé¢ä¸Šçš„ä¸­æ–‡å†…å®¹éƒ½æ— æ³•æ­£å¸¸å±•ç¤ºã€‚</p><p>åˆ†æå®Œä¸Šé¢çš„é—®é¢˜åï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªæˆ‘ä»¬ä¸ç†Ÿæ‚‰çš„å†…å®¹å°±æ˜¯==URLç¼–ç ==å’Œ==URLè§£ç ==ï¼Œä»€ä¹ˆæ˜¯URLç¼–ç ï¼Œä»€ä¹ˆåˆæ˜¯URLè§£ç å‘¢?</p><p><strong>URLç¼–ç </strong></p><p>è¿™å—çŸ¥è¯†æˆ‘ä»¬åªéœ€è¦äº†è§£ä¸‹å³å¯,å…·ä½“ç¼–ç è¿‡ç¨‹åˆ†ä¸¤æ­¥ï¼Œåˆ†åˆ«æ˜¯:</p><p>(1)å°†å­—ç¬¦ä¸²æŒ‰ç…§ç¼–ç æ–¹å¼è½¬ä¸ºäºŒè¿›åˆ¶</p><p>(2)æ¯ä¸ªå­—èŠ‚è½¬ä¸º2ä¸ª16è¿›åˆ¶æ•°å¹¶åœ¨å‰è¾¹åŠ ä¸Š%</p><p><code>å¼ ä¸‰</code>æŒ‰ç…§UTF-8çš„æ–¹å¼è½¬æ¢æˆäºŒè¿›åˆ¶çš„ç»“æœä¸º:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1110 0101 1011 1100 1010 0000 1110 0100 1011 1000 1000 1001</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç»“æœæ˜¯å¦‚ä½•è®¡ç®—çš„?</p><p>ä½¿ç”¨<code>http://www.mytju.com/classcode/tools/encode_utf8.asp</code>ï¼Œè¾“å…¥<code>å¼ ä¸‰</code></p><p><img src="assets/1628833310473.png" alt="1628833310473"></p><p>å°±å¯ä»¥è·å–å¼ å’Œä¸‰åˆ†åˆ«å¯¹åº”çš„10è¿›åˆ¶ï¼Œç„¶ååœ¨ä½¿ç”¨è®¡ç®—å™¨ï¼Œé€‰æ‹©ç¨‹åºå‘˜æ¨¡å¼ï¼Œè®¡ç®—å‡ºå¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®ç»“æœ:</p><p><img src="assets/1628833496171.png" alt="1628833496171"></p><p>åœ¨è®¡ç®—çš„åå…­è¿›åˆ¶ç»“æœä¸­ï¼Œæ¯ä¸¤ä½å‰é¢åŠ ä¸€ä¸ª%,å°±å¯ä»¥è·å–åˆ°<code>%E5%BC%A0%E4%B8%89</code>ã€‚</p><p>å½“ç„¶ä½ ä»ä¸Šé¢æ‰€æä¾›çš„ç½‘ç«™ä¸­å°±å·²ç»èƒ½çœ‹åˆ°ç¼–ç 16è¿›åˆ¶çš„ç»“æœäº†:</p><p><img src="assets/1628833310474.png" alt="1628833310473"></p><p>ä½†æ˜¯å¯¹äºä¸Šé¢çš„è®¡ç®—è¿‡ç¨‹ï¼Œå¦‚æœæ²¡æœ‰å·¥å…·ï¼Œçº¯æ‰‹å·¥è®¡ç®—çš„è¯ï¼Œç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦è¿›è¡Œæ‰‹åŠ¨è®¡ç®—ï¼Œåœ¨Javaä¸­å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ç¼–ç å’Œè§£ç çš„APIå·¥å…·ç±»å¯ä»¥è®©æˆ‘ä»¬æ›´å¿«é€Ÿçš„è¿›è¡Œç¼–ç å’Œè§£ç :</p><p>ç¼–ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.net.URLEncoder.encode(<span class="string">&quot;éœ€è¦è¢«ç¼–ç çš„å†…å®¹&quot;</span>,<span class="string">&quot;å­—ç¬¦é›†(UTF-8)&quot;</span>)</span><br></pre></td></tr></table></figure><p>è§£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.net.URLDecoder.decode(<span class="string">&quot;éœ€è¦è¢«è§£ç çš„å†…å®¹&quot;</span>,<span class="string">&quot;å­—ç¬¦é›†(UTF-8)&quot;</span>)</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å’±ä»¬å¯¹<code>å¼ ä¸‰</code>æ¥è¿›è¡Œç¼–ç å’Œè§£ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class URLDemo &#123;</span><br><span class="line"></span><br><span class="line">  public static void main(String[] args) throws UnsupportedEncodingException &#123;</span><br><span class="line">        String username = &quot;å¼ ä¸‰&quot;;</span><br><span class="line">        //1. URLç¼–ç </span><br><span class="line">        String encode = URLEncoder.encode(username, &quot;utf-8&quot;);</span><br><span class="line">        System.out.println(encode); //æ‰“å°:%E5%BC%A0%E4%B8%89</span><br><span class="line"></span><br><span class="line">       //2. URLè§£ç </span><br><span class="line">       //String decode = URLDecoder.decode(encode, &quot;utf-8&quot;);//æ‰“å°:å¼ ä¸‰</span><br><span class="line">       String decode = URLDecoder.decode(encode, &quot;ISO-8859-1&quot;);//æ‰“å°:`Ã¥Â¼Â Ã¤Â¸ `</span><br><span class="line">       System.out.println(decode);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ°è¿™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ†æå‡ºGETè¯·æ±‚ä¸­æ–‡å‚æ•°å‡ºç°ä¹±ç çš„åŸå› äº†ï¼Œ</p><ul><li>æµè§ˆå™¨æŠŠä¸­æ–‡å‚æ•°æŒ‰ç…§<code>UTF-8</code>è¿›è¡ŒURLç¼–ç </li><li>Tomcatå¯¹è·å–åˆ°çš„å†…å®¹è¿›è¡Œäº†<code>ISO-8859-1</code>çš„URLè§£ç </li><li>åœ¨æ§åˆ¶å°å°±ä¼šå‡ºç°ç±»ä¸Š<code>Ã¥Â¼ Ã¤Â¸Â‰</code>çš„ä¹±ç ï¼Œæœ€åä¸€ä½æ˜¯ä¸ªç©ºæ ¼</li></ul><ol><li>æ¸…æ¥šäº†å‡ºç°ä¹±ç çš„åŸå› ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦æƒ³åŠæ³•è¿›è¡Œè§£å†³</li></ol><p><img src="assets/1628846824194.png" alt="1628846824194"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹ä½ï¼Œ</p><ul><li><p>åœ¨è¿›è¡Œç¼–ç å’Œè§£ç çš„æ—¶å€™ï¼Œä¸ç®¡ä½¿ç”¨çš„æ˜¯å“ªä¸ªå­—ç¬¦é›†ï¼Œä»–ä»¬å¯¹åº”çš„<code>%E5%BC%A0%E4%B8%89</code>æ˜¯ä¸€è‡´çš„</p></li><li><p>é‚£ä»–ä»¬å¯¹åº”çš„äºŒè¿›åˆ¶å€¼ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸º:</p><ul><li>```<br>1110 0101 1011 1100 1010 0000 1110 0100 1011 1000 1000 1001<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* ä¸ºæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘æŠŠ`Ã¥Â¼ Ã¤Â¸Â‰`è½¬æ¢æˆå­—èŠ‚ï¼Œåœ¨æŠŠå­—èŠ‚è½¬æ¢æˆ`å¼ ä¸‰`ï¼Œåœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­æ˜¯å®ƒä»¬çš„ç¼–ç ä¸€è‡´ï¼Œå°±å¯ä»¥è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ã€‚</span><br><span class="line"></span><br><span class="line">å…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</span><br><span class="line"></span><br><span class="line">&gt;1.æŒ‰ç…§ISO-8859-1ç¼–ç è·å–ä¹±ç `Ã¥Â¼ Ã¤Â¸Â‰`å¯¹åº”çš„å­—èŠ‚æ•°ç»„</span><br><span class="line">&gt;</span><br><span class="line">&gt;2.æŒ‰ç…§UTF-8ç¼–ç è·å–å­—èŠ‚æ•°ç»„å¯¹åº”çš„å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">å®ç°ä»£ç å¦‚ä¸‹:</span><br><span class="line"></span><br></pre></td></tr></table></figure>public class URLDemo {</li></ul><p>public static void main(String[] args) throws UnsupportedEncodingException {</p><pre><code>  String username = &quot;å¼ ä¸‰&quot;;  //1. URLç¼–ç   String encode = URLEncoder.encode(username, &quot;utf-8&quot;);  System.out.println(encode);  //2. URLè§£ç   String decode = URLDecoder.decode(encode, &quot;ISO-8859-1&quot;);  System.out.println(decode); //æ­¤å¤„æ‰“å°çš„æ˜¯å¯¹åº”çš„ä¹±ç æ•°æ®  //3. è½¬æ¢ä¸ºå­—èŠ‚æ•°æ®,ç¼–ç   byte[] bytes = decode.getBytes(&quot;ISO-8859-1&quot;);  for (byte b : bytes) &#123;      System.out.print(b + &quot; &quot;);  &#125;  //æ­¤å¤„æ‰“å°çš„æ˜¯:-27 -68 -96 -28 -72 -119  //4. å°†å­—èŠ‚æ•°ç»„è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œè§£ç   String s = new String(bytes, &quot;utf-8&quot;);  System.out.println(s); //æ­¤å¤„æ‰“å°çš„æ˜¯å¼ ä¸‰</code></pre><p>  }<br>}</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**è¯´æ˜**:åœ¨ç¬¬18è¡Œä¸­æ‰“å°çš„æ•°æ®æ˜¯`-27 -68 -96 -28 -72 -119`å’Œ`å¼ ä¸‰`è½¬æ¢æˆçš„äºŒè¿›åˆ¶æ•°æ®`1110 0101 1011 1100 1010 0000 1110 0100 1011 1000 1000 1001`ä¸ºä»€ä¹ˆä¸ä¸€æ ·å‘¢ï¼Ÿ</span><br><span class="line"></span><br><span class="line">å…¶å®æ‰“å°å‡ºæ¥çš„æ˜¯åè¿›åˆ¶æ•°æ®ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨è®¡ç®—æœºæ¢ç®—ä¸‹å°±èƒ½å¾—åˆ°ä»–ä»¬çš„å¯¹åº”å…³ç³»ï¼Œå¦‚ä¸‹å›¾:</span><br><span class="line"></span><br><span class="line">![1628849231208](assets/1628849231208.png)</span><br><span class="line"></span><br><span class="line">è‡³æ­¤å¯¹äºGETè¯·æ±‚ä¸­æ–‡ä¹±ç çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å°±å·²ç»åˆ†æå®Œäº†ï¼Œæœ€ååœ¨ä»£ç ä¸­å»å®ç°ä¸‹:</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">/**</span><br><span class="line"> * ä¸­æ–‡ä¹±ç é—®é¢˜è§£å†³æ–¹æ¡ˆ</span><br><span class="line"> */</span><br><span class="line">@WebServlet(&quot;/req4&quot;)</span><br><span class="line">public class RequestDemo4 extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        //1. è§£å†³ä¹±ç ï¼šPOSTï¼ŒgetReader()</span><br><span class="line">        //request.setCharacterEncoding(&quot;UTF-8&quot;);//è®¾ç½®å­—ç¬¦è¾“å…¥æµçš„ç¼–ç </span><br><span class="line"></span><br><span class="line">        //2. è·å–username</span><br><span class="line">        String username = request.getParameter(&quot;username&quot;);</span><br><span class="line">        System.out.println(&quot;è§£å†³ä¹±ç å‰ï¼š&quot;+username);</span><br><span class="line"></span><br><span class="line">        //3. GET,è·å–å‚æ•°çš„æ–¹å¼ï¼šgetQueryString</span><br><span class="line">        // ä¹±ç åŸå› ï¼štomcatè¿›è¡ŒURLè§£ç ï¼Œé»˜è®¤çš„å­—ç¬¦é›†ISO-8859-1</span><br><span class="line">       /* //3.1 å…ˆå¯¹ä¹±ç æ•°æ®è¿›è¡Œç¼–ç ï¼šè½¬ä¸ºå­—èŠ‚æ•°ç»„</span><br><span class="line">        byte[] bytes = username.getBytes(StandardCharsets.ISO_8859_1);</span><br><span class="line">        //3.2 å­—èŠ‚æ•°ç»„è§£ç </span><br><span class="line">        username = new String(bytes, StandardCharsets.UTF_8);*/</span><br><span class="line"></span><br><span class="line">        username  = new String(username.getBytes(StandardCharsets.ISO_8859_1),StandardCharsets.UTF_8);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;è§£å†³ä¹±ç åï¼š&quot;+username);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;</span><br><span class="line">        this.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>æ³¨æ„</strong></p><ul><li>æŠŠ<code>request.setCharacterEncoding(&quot;UTF-8&quot;)</code>ä»£ç æ³¨é‡Šæ‰åï¼Œä¼šå‘ç°GETè¯·æ±‚å‚æ•°ä¹±ç è§£å†³æ–¹æ¡ˆåŒæ—¶ä¹Ÿå¯ä¹ŸæŠŠPOSTè¯·æ±‚å‚æ•°ä¹±ç çš„é—®é¢˜ä¹Ÿè§£å†³äº†</li><li>åªä¸è¿‡å¯¹äºPOSTè¯·æ±‚å‚æ•°ä¸€èˆ¬éƒ½ä¼šæ¯”è¾ƒå¤šï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼è§£å†³ä¹±ç èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥å¯¹äºPOSTè¯·æ±‚è¿˜æ˜¯å»ºè®®ä½¿ç”¨è®¾ç½®ç¼–ç çš„æ–¹å¼è¿›è¡Œã€‚</li></ul><p>å¦å¤–éœ€è¦è¯´æ˜ä¸€ç‚¹çš„æ˜¯==Tomcat8.0ä¹‹åï¼Œå·²å°†GETè¯·æ±‚ä¹±ç é—®é¢˜è§£å†³ï¼Œè®¾ç½®é»˜è®¤çš„è§£ç æ–¹å¼ä¸ºUTF-8==</p><p><strong>å°ç»“</strong></p><ol><li>ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ¡ˆ</li></ol><ul><li><p>POSTè¯·æ±‚å’ŒGETè¯·æ±‚çš„å‚æ•°ä¸­å¦‚æœæœ‰ä¸­æ–‡ï¼Œåå°æ¥æ”¶æ•°æ®å°±ä¼šå‡ºç°ä¸­æ–‡ä¹±ç é—®é¢˜</p><p>GETè¯·æ±‚åœ¨Tomcat8.0ä»¥åçš„ç‰ˆæœ¬å°±ä¸ä¼šå‡ºç°äº†</p></li><li><p>POSTè¯·æ±‚è§£å†³æ–¹æ¡ˆæ˜¯:è®¾ç½®è¾“å…¥æµçš„ç¼–ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">request.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">æ³¨æ„:è®¾ç½®çš„å­—ç¬¦é›†è¦å’Œé¡µé¢ä¿æŒä¸€è‡´</span><br></pre></td></tr></table></figure></li><li><p>é€šç”¨æ–¹å¼ï¼ˆGET/POSTï¼‰ï¼šéœ€è¦å…ˆè§£ç ï¼Œå†ç¼–ç </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new String(username.getBytes(&quot;ISO-8859-1&quot;),&quot;UTF-8&quot;);</span><br></pre></td></tr></table></figure></li></ul><ol><li>URLç¼–ç å®ç°æ–¹å¼:</li></ol><ul><li><p>ç¼–ç :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URLEncoder.encode(str,&quot;UTF-8&quot;);</span><br></pre></td></tr></table></figure></li><li><p>è§£ç :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URLDecoder.decode(s,&quot;ISO-8859-1&quot;);</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-5-Requestè¯·æ±‚è½¬å‘"><a href="#2-5-Requestè¯·æ±‚è½¬å‘" class="headerlink" title="2.5 Requestè¯·æ±‚è½¬å‘"></a>2.5 Requestè¯·æ±‚è½¬å‘</h3><ol><li>==è¯·æ±‚è½¬å‘(forward):ä¸€ç§åœ¨æœåŠ¡å™¨å†…éƒ¨çš„èµ„æºè·³è½¬æ–¹å¼ã€‚==</li></ol><p><img src="assets/1628851404283.png" alt="1628851404283"></p><p>(1)æµè§ˆå™¨å‘é€è¯·æ±‚ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¸­å¯¹åº”çš„èµ„æºAæ¥æ”¶åˆ°è¯·æ±‚</p><p>(2)èµ„æºAå¤„ç†å®Œè¯·æ±‚åå°†è¯·æ±‚å‘ç»™èµ„æºB</p><p>(3)èµ„æºBå¤„ç†å®Œåå°†ç»“æœå“åº”ç»™æµè§ˆå™¨</p><p>(4)è¯·æ±‚ä»èµ„æºAåˆ°èµ„æºBçš„è¿‡ç¨‹å°±å«==è¯·æ±‚è½¬å‘==</p><ol><li>è¯·æ±‚è½¬å‘çš„å®ç°æ–¹å¼:</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.getRequestDispatcher(&quot;èµ„æºBè·¯å¾„&quot;).forward(req,resp);</span><br></pre></td></tr></table></figure><p>å…·ä½“å¦‚ä½•æ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹éœ€æ±‚:</p><p><img src="assets/1628854783523.png" alt="1628854783523"></p><p>é’ˆå¯¹ä¸Šè¿°éœ€æ±‚ï¼Œå…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</p><blockquote><p>1.åˆ›å»ºä¸€ä¸ªRequestDemo5ç±»ï¼Œæ¥æ”¶/req5çš„è¯·æ±‚ï¼Œåœ¨doGetæ–¹æ³•ä¸­æ‰“å°<code>demo5</code></p><p>2.åˆ›å»ºä¸€ä¸ªRequestDemo6ç±»ï¼Œæ¥æ”¶/req6çš„è¯·æ±‚ï¼Œåœ¨doGetæ–¹æ³•ä¸­æ‰“å°<code>demo6</code></p><p>3.åœ¨RequestDemo5çš„æ–¹æ³•ä¸­ä½¿ç”¨</p><p>â€‹    req.getRequestDispatcher(â€œ/req6â€).forward(req,resp)è¿›è¡Œè¯·æ±‚è½¬å‘</p><p>4.å¯åŠ¨æµ‹è¯•</p></blockquote><p>(1)åˆ›å»ºRequestDemo5ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚è½¬å‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo5...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)åˆ›å»ºRequestDemo6ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚è½¬å‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req6&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo6</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo6...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3)åœ¨RequestDemo5çš„doGetæ–¹æ³•ä¸­è¿›è¡Œè¯·æ±‚è½¬å‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚è½¬å‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo5...&quot;</span>);</span><br><span class="line">        <span class="comment">//è¯·æ±‚è½¬å‘</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/req6&quot;</span>).forward(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(4)å¯åŠ¨æµ‹è¯•</p><p>è®¿é—®<code>http://localhost:8080/request-demo/req5</code>,å°±å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹å†…å®¹:</p><p><img src="assets/1628855192876.png" alt="1628855192876"></p><p>è¯´æ˜è¯·æ±‚å·²ç»è½¬å‘åˆ°äº†<code>/req6</code></p><ol><li>è¯·æ±‚è½¬å‘èµ„æºé—´å…±äº«æ•°æ®:ä½¿ç”¨Requestå¯¹è±¡</li></ol><p>æ­¤å¤„ä¸»è¦è§£å†³çš„é—®é¢˜æ˜¯æŠŠè¯·æ±‚ä»<code>/req5</code>è½¬å‘åˆ°<code>/req6</code>çš„æ—¶å€™ï¼Œå¦‚ä½•ä¼ é€’æ•°æ®ç»™<code>/req6</code>ã€‚</p><p>éœ€è¦ä½¿ç”¨requestå¯¹è±¡æä¾›çš„ä¸‰ä¸ªæ–¹æ³•:</p><ul><li>å­˜å‚¨æ•°æ®åˆ°requeståŸŸ[èŒƒå›´,æ•°æ®æ˜¯å­˜å‚¨åœ¨requestå¯¹è±¡]ä¸­</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void setAttribute(String name,Object o);</span><br></pre></td></tr></table></figure><ul><li>æ ¹æ®keyè·å–å€¼</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object getAttribute(String name);</span><br></pre></td></tr></table></figure><ul><li>æ ¹æ®keyåˆ é™¤è¯¥é”®å€¼å¯¹</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void removeAttribute(String name);</span><br></pre></td></tr></table></figure><p>æ¥ç€ä¸Šä¸ªéœ€æ±‚æ¥:</p><p><img src="assets/1628856995417.png" alt="1628856995417"></p><blockquote><p>1.åœ¨RequestDemo5çš„doGetæ–¹æ³•ä¸­è½¬å‘è¯·æ±‚ä¹‹å‰ï¼Œå°†æ•°æ®å­˜å…¥requeståŸŸå¯¹è±¡ä¸­</p><p>2.åœ¨RequestDemo6çš„doGetæ–¹æ³•ä»requeståŸŸå¯¹è±¡ä¸­è·å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®æ‰“å°åˆ°æ§åˆ¶å°</p><p>3.å¯åŠ¨è®¿é—®æµ‹è¯•</p></blockquote><p>(1)ä¿®æ”¹RequestDemo5ä¸­çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/req5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo5...&quot;</span>);</span><br><span class="line">        <span class="comment">//å­˜å‚¨æ•°æ®</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="comment">//è¯·æ±‚è½¬å‘</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/req6&quot;</span>).forward(request,response);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)ä¿®æ”¹RequestDemo6ä¸­çš„æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚è½¬å‘</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req6&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo6</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo6...&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å–æ•°æ®</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">msg</span> <span class="operator">=</span> request.getAttribute(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line">        System.out.println(msg);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3)å¯åŠ¨æµ‹è¯•</p><p>è®¿é—®<code>http://localhost:8080/request-demo/req5</code>,å°±å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹å†…å®¹:</p><p><img src="assets/1628857213364.png" alt="1628857213364"></p><p>æ­¤æ—¶å°±å¯ä»¥å®ç°åœ¨è½¬å‘å¤šä¸ªèµ„æºä¹‹é—´å…±äº«æ•°æ®ã€‚</p><ol><li>è¯·æ±‚è½¬å‘çš„ç‰¹ç‚¹</li></ol><ul><li><p>æµè§ˆå™¨åœ°å€æ è·¯å¾„ä¸å‘ç”Ÿå˜åŒ–</p><p>è™½ç„¶åå°ä»<code>/req5</code>è½¬å‘åˆ°<code>/req6</code>,ä½†æ˜¯æµè§ˆå™¨çš„åœ°å€ä¸€ç›´æ˜¯<code>/req5</code>,æœªå‘ç”Ÿå˜åŒ–</p><p><img src="assets/1628857365153.png" alt="1628857365153"></p></li><li><p>åªèƒ½è½¬å‘åˆ°å½“å‰æœåŠ¡å™¨çš„å†…éƒ¨èµ„æº</p><p>ä¸èƒ½ä»ä¸€ä¸ªæœåŠ¡å™¨é€šè¿‡è½¬å‘è®¿é—®å¦ä¸€å°æœåŠ¡å™¨</p></li><li><p>ä¸€æ¬¡è¯·æ±‚ï¼Œå¯ä»¥åœ¨è½¬å‘èµ„æºé—´ä½¿ç”¨requestå…±äº«æ•°æ®</p><p>è™½ç„¶åå°ä»<code>/req5</code>è½¬å‘åˆ°<code>/req6</code>ï¼Œä½†æ˜¯è¿™ä¸ª==åªæœ‰ä¸€æ¬¡è¯·æ±‚==</p></li></ul><h2 id="3ï¼ŒResponseå¯¹è±¡"><a href="#3ï¼ŒResponseå¯¹è±¡" class="headerlink" title="3ï¼ŒResponseå¯¹è±¡"></a>3ï¼ŒResponseå¯¹è±¡</h2><p>å‰é¢è®²è§£å®ŒRequestå¯¹è±¡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å›åˆ°åˆšå¼€å§‹çš„é‚£å¼ å›¾:</p><p><img src="assets/1628857632899.png" alt="1628857632899"></p><ul><li>Request:ä½¿ç”¨requestå¯¹è±¡æ¥==è·å–==è¯·æ±‚æ•°æ®</li><li>Response:ä½¿ç”¨responseå¯¹è±¡æ¥==è®¾ç½®==å“åº”æ•°æ®</li></ul><p>Reponseçš„ç»§æ‰¿ä½“ç³»å’ŒRequestçš„ç»§æ‰¿ä½“ç³»ä¹Ÿéå¸¸ç›¸ä¼¼:</p><p><img src="assets/1628857761317.png" alt="1628857761317"></p><p> ä»‹ç»å®ŒResponseçš„ç›¸å…³ä½“ç³»ç»“æ„åï¼Œæ¥ä¸‹æ¥å¯¹äºResponseæˆ‘ä»¬éœ€è¦å­¦ä¹ å¦‚ä¸‹å†…å®¹:</p><ul><li>Responseè®¾ç½®å“åº”æ•°æ®çš„åŠŸèƒ½ä»‹ç»</li><li>Responseå®Œæˆé‡å®šå‘</li><li>Responseå“åº”å­—ç¬¦æ•°æ®</li><li>Responseå“åº”å­—èŠ‚æ•°æ®</li></ul><h3 id="3-1-Responseè®¾ç½®å“åº”æ•°æ®åŠŸèƒ½ä»‹ç»"><a href="#3-1-Responseè®¾ç½®å“åº”æ•°æ®åŠŸèƒ½ä»‹ç»" class="headerlink" title="3.1 Responseè®¾ç½®å“åº”æ•°æ®åŠŸèƒ½ä»‹ç»"></a>3.1 Responseè®¾ç½®å“åº”æ•°æ®åŠŸèƒ½ä»‹ç»</h3><p>HTTPå“åº”æ•°æ®æ€»å…±åˆ†ä¸ºä¸‰éƒ¨åˆ†å†…å®¹ï¼Œåˆ†åˆ«æ˜¯==å“åº”è¡Œã€å“åº”å¤´ã€å“åº”ä½“==ï¼Œå¯¹äºè¿™ä¸‰éƒ¨åˆ†å†…å®¹çš„æ•°æ®ï¼Œresponeå¯¹è±¡éƒ½æä¾›äº†å“ªäº›æ–¹æ³•æ¥è¿›è¡Œè®¾ç½®?</p><ol><li>å“åº”è¡Œ</li></ol><p><img src="assets/1628858926498.png" alt="1628858926498"></p><p>å¯¹äºå“åº”å¤´ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„å°±æ˜¯è®¾ç½®å“åº”çŠ¶æ€ç :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void setStatus(int sc);</span><br></pre></td></tr></table></figure><ol><li>å“åº”å¤´</li></ol><p><img src="assets/1628859051368.png" alt="1628859051368"></p><p>è®¾ç½®å“åº”å¤´é”®å€¼å¯¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void setHeader(String name,String value);</span><br></pre></td></tr></table></figure><ol><li>å“åº”ä½“</li></ol><p><img src="assets/1628859268095.png" alt="1628859268095"></p><p>å¯¹äºå“åº”ä½“ï¼Œæ˜¯é€šè¿‡å­—ç¬¦ã€å­—èŠ‚è¾“å‡ºæµçš„æ–¹å¼å¾€æµè§ˆå™¨å†™ï¼Œ</p><p>è·å–å­—ç¬¦è¾“å‡ºæµ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PrintWriter getWriter();</span><br></pre></td></tr></table></figure><p>è·å–å­—èŠ‚è¾“å‡ºæµ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServletOutputStream getOutputStream();</span><br></pre></td></tr></table></figure><p>ä»‹ç»å®Œè¿™äº›æ–¹æ³•åï¼Œåé¢æˆ‘ä»¬ä¼šé€šè¿‡æ¡ˆä¾‹æŠŠè¿™äº›æ–¹æ³•éƒ½ç”¨ä¸€ç”¨ï¼Œé¦–å…ˆå…ˆæ¥å®Œæˆä¸‹é‡å®šå‘çš„åŠŸèƒ½å¼€å‘ã€‚</p><h3 id="3-2-Responesè¯·æ±‚é‡å®šå‘"><a href="#3-2-Responesè¯·æ±‚é‡å®šå‘" class="headerlink" title="3.2 Responesè¯·æ±‚é‡å®šå‘"></a>3.2 Responesè¯·æ±‚é‡å®šå‘</h3><ol><li>==Responseé‡å®šå‘(redirect):ä¸€ç§èµ„æºè·³è½¬æ–¹å¼ã€‚==</li></ol><p><img src="assets/1628859860279.png" alt="1628859860279"></p><p>(1)æµè§ˆå™¨å‘é€è¯·æ±‚ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¸­å¯¹åº”çš„èµ„æºAæ¥æ”¶åˆ°è¯·æ±‚</p><p>(2)èµ„æºAç°åœ¨æ— æ³•å¤„ç†è¯¥è¯·æ±‚ï¼Œå°±ä¼šç»™æµè§ˆå™¨å“åº”ä¸€ä¸ª302çš„çŠ¶æ€ç +locationçš„ä¸€ä¸ªè®¿é—®èµ„æºBçš„è·¯å¾„</p><p>(3)æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”çŠ¶æ€ç ä¸º302å°±ä¼šé‡æ–°å‘é€è¯·æ±‚åˆ°locationå¯¹åº”çš„è®¿é—®åœ°å€å»è®¿é—®èµ„æºB</p><p>(4)èµ„æºBæ¥æ”¶åˆ°è¯·æ±‚åè¿›è¡Œå¤„ç†å¹¶æœ€ç»ˆç»™æµè§ˆå™¨å“åº”ç»“æœï¼Œè¿™æ•´ä¸ªè¿‡ç¨‹å°±å«==é‡å®šå‘==</p><ol><li>é‡å®šå‘çš„å®ç°æ–¹å¼:</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">resp.setStatus(302);</span><br><span class="line">resp.setHeader(&quot;location&quot;,&quot;èµ„æºBçš„è®¿é—®è·¯å¾„&quot;);</span><br></pre></td></tr></table></figure><p>å…·ä½“å¦‚ä½•æ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹éœ€æ±‚:</p><p><img src="assets/1628861030429.png" alt="1628861030429"></p><p>é’ˆå¯¹ä¸Šè¿°éœ€æ±‚ï¼Œå…·ä½“çš„å®ç°æ­¥éª¤ä¸º:</p><blockquote><p>1.åˆ›å»ºä¸€ä¸ªResponseDemo1ç±»ï¼Œæ¥æ”¶/resp1çš„è¯·æ±‚ï¼Œåœ¨doGetæ–¹æ³•ä¸­æ‰“å°<code>resp1....</code></p><p>2.åˆ›å»ºä¸€ä¸ªResponseDemo2ç±»ï¼Œæ¥æ”¶/resp2çš„è¯·æ±‚ï¼Œåœ¨doGetæ–¹æ³•ä¸­æ‰“å°<code>resp2....</code></p><p>3.åœ¨ResponseDemo1çš„æ–¹æ³•ä¸­ä½¿ç”¨</p><p>â€‹    response.setStatus(302);</p><p>â€‹    response.setHeader(â€œLocationâ€,â€/request-demo/resp2â€) æ¥ç»™å‰ç«¯å“åº”ç»“æœæ•°æ®</p><p>4.å¯åŠ¨æµ‹è¯•</p></blockquote><p>(1)åˆ›å»ºResponseDemo1ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/resp1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;resp1....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(2)åˆ›å»ºResponseDemo2ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/resp2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;resp2....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(3)åœ¨ResponseDemo1çš„doGetæ–¹æ³•ä¸­ç»™å‰ç«¯å“åº”æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/resp1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;resp1....&quot;</span>);</span><br><span class="line">        <span class="comment">//é‡å®šå‘</span></span><br><span class="line">        <span class="comment">//1.è®¾ç½®å“åº”çŠ¶æ€ç  302</span></span><br><span class="line">        response.setStatus(<span class="number">302</span>);</span><br><span class="line">        <span class="comment">//2. è®¾ç½®å“åº”å¤´ Location</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;Location&quot;</span>,<span class="string">&quot;/request-demo/resp2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>(4)å¯åŠ¨æµ‹è¯•</p><p>è®¿é—®<code>http://localhost:8080/request-demo/resp1</code>,å°±å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹å†…å®¹:</p><p><img src="assets/1628861404699.png" alt="1628861404699"></p><p>è¯´æ˜<code>/resp1</code>å’Œ<code>/resp2</code>éƒ½è¢«è®¿é—®åˆ°äº†ã€‚åˆ°è¿™é‡å®šå‘å°±å·²ç»å®Œæˆäº†ã€‚</p><p>è™½ç„¶åŠŸèƒ½å·²ç»å®ç°ï¼Œä½†æ˜¯ä»è®¾ç½®é‡å®šå‘çš„ä¸¤è¡Œä»£ç æ¥çœ‹ï¼Œä¼šå‘ç°é™¤äº†é‡å®šå‘çš„åœ°å€ä¸ä¸€æ ·ï¼Œå…¶ä»–çš„å†…å®¹éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥requestå¯¹è±¡ç»™æˆ‘ä»¬æä¾›äº†ç®€åŒ–çš„ç¼–å†™æ–¹å¼ä¸º:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resposne.sendRedirect(&quot;/request-demo/resp2&quot;)</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ç¬¬3æ­¥ä¸­çš„ä»£ç å°±å¯ä»¥ç®€åŒ–ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/resp1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;resp1....&quot;</span>);</span><br><span class="line">        <span class="comment">//é‡å®šå‘</span></span><br><span class="line">        resposne.sendRedirect(<span class="string">&quot;/request-demo/resp2&quot;</span>)ï¼›</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>é‡å®šå‘çš„ç‰¹ç‚¹</li></ol><ul><li><p>æµè§ˆå™¨åœ°å€æ è·¯å¾„å‘é€å˜åŒ–</p><p>å½“è¿›è¡Œé‡å®šå‘è®¿é—®çš„æ—¶å€™ï¼Œç”±äºæ˜¯ç”±æµè§ˆå™¨å‘é€çš„ä¸¤æ¬¡è¯·æ±‚ï¼Œæ‰€ä»¥åœ°å€ä¼šå‘ç”Ÿå˜åŒ–</p><p><img src="assets/1628861893130.png" alt="1628861893130"></p></li><li><p>å¯ä»¥é‡å®šå‘åˆ°ä»»ä½•ä½ç½®çš„èµ„æº(æœåŠ¡å†…å®¹ã€å¤–éƒ¨å‡å¯)</p><p>å› ä¸ºç¬¬ä¸€æ¬¡å“åº”ç»“æœä¸­åŒ…å«äº†æµè§ˆå™¨ä¸‹æ¬¡è¦è·³è½¬çš„è·¯å¾„ï¼Œæ‰€ä»¥è¿™ä¸ªè·¯å¾„æ˜¯å¯ä»¥ä»»æ„ä½ç½®èµ„æºã€‚</p></li><li><p>ä¸¤æ¬¡è¯·æ±‚ï¼Œä¸èƒ½åœ¨å¤šä¸ªèµ„æºä½¿ç”¨requestå…±äº«æ•°æ®</p><p>å› ä¸ºæµè§ˆå™¨å‘é€äº†ä¸¤æ¬¡è¯·æ±‚ï¼Œæ˜¯ä¸¤ä¸ªä¸åŒçš„requestå¯¹è±¡ï¼Œå°±æ— æ³•é€šè¿‡requestå¯¹è±¡è¿›è¡Œå…±äº«æ•°æ®</p></li></ul><p>ä»‹ç»å®Œ==è¯·æ±‚é‡å®šå‘==å’Œ==è¯·æ±‚è½¬å‘==ä»¥åï¼Œæ¥ä¸‹æ¥éœ€è¦æŠŠè¿™ä¸¤ä¸ªæ”¾åœ¨ä¸€å—å¯¹æ¯”ä¸‹:</p><p><img src="assets/1628862170296.png" alt="1628862170296"></p><p>ä»¥ååˆ°åº•ç”¨å“ªä¸ªï¼Œè¿˜æ˜¯éœ€è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡æ¥å†³å®šã€‚</p><h3 id="3-3-è·¯å¾„é—®é¢˜"><a href="#3-3-è·¯å¾„é—®é¢˜" class="headerlink" title="3.3 è·¯å¾„é—®é¢˜"></a>3.3 è·¯å¾„é—®é¢˜</h3><ol><li>é—®é¢˜1ï¼šè½¬å‘çš„æ—¶å€™è·¯å¾„ä¸Šæ²¡æœ‰åŠ <code>/request-demo</code>è€Œé‡å®šå‘åŠ äº†ï¼Œé‚£ä¹ˆåˆ°åº•ä»€ä¹ˆæ—¶å€™éœ€è¦åŠ ï¼Œä»€ä¹ˆæ—¶å€™ä¸éœ€è¦åŠ å‘¢?</li></ol><p><img src="assets/1628862652700.png" alt="1628862652700"></p><p>å…¶å®åˆ¤æ–­çš„ä¾æ®å¾ˆç®€å•ï¼Œåªéœ€è¦è®°ä½ä¸‹é¢çš„è§„åˆ™å³å¯:</p><ul><li>æµè§ˆå™¨ä½¿ç”¨:éœ€è¦åŠ è™šæ‹Ÿç›®å½•(é¡¹ç›®è®¿é—®è·¯å¾„)</li><li>æœåŠ¡ç«¯ä½¿ç”¨:ä¸éœ€è¦åŠ è™šæ‹Ÿç›®å½•</li></ul><p>å¯¹äºè½¬å‘æ¥è¯´ï¼Œå› ä¸ºæ˜¯åœ¨æœåŠ¡ç«¯è¿›è¡Œçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ è™šæ‹Ÿç›®å½•</p><p>å¯¹äºé‡å®šå‘æ¥è¯´ï¼Œè·¯å¾„æœ€ç»ˆæ˜¯ç”±æµè§ˆå™¨æ¥å‘é€è¯·æ±‚ï¼Œå°±éœ€è¦æ·»åŠ è™šæ‹Ÿç›®å½•ã€‚</p><p>æŒæ¡äº†è¿™ä¸ªè§„åˆ™ï¼Œæ¥ä¸‹æ¥å°±é€šè¿‡ä¸€äº›ç»ƒä¹ æ¥å¼ºåŒ–ä¸‹çŸ¥è¯†çš„å­¦ä¹ :</p><ul><li><code>&lt;a href=&#39;è·¯åŠ²&#39;&gt;</code></li><li><code>&lt;form action=&#39;è·¯å¾„&#39;&gt;</code></li><li>req.getRequestDispatcher(â€œè·¯å¾„â€)</li><li>resp.sendRedirect(â€œè·¯å¾„â€)</li></ul><p>ç­”æ¡ˆ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.è¶…é“¾æ¥ï¼Œä»æµè§ˆå™¨å‘é€ï¼Œéœ€è¦åŠ </span><br><span class="line">2.è¡¨å•ï¼Œä»æµè§ˆå™¨å‘é€ï¼Œéœ€è¦åŠ </span><br><span class="line">3.è½¬å‘ï¼Œæ˜¯ä»æœåŠ¡å™¨å†…éƒ¨è·³è½¬ï¼Œä¸éœ€è¦åŠ </span><br><span class="line">4.é‡å®šå‘ï¼Œæ˜¯ç”±æµè§ˆå™¨è¿›è¡Œè·³è½¬ï¼Œéœ€è¦åŠ ã€‚</span><br></pre></td></tr></table></figure><ol><li>é—®é¢˜2ï¼šåœ¨é‡å®šå‘çš„ä»£ç ä¸­ï¼Œ<code>/request-demo</code>æ˜¯å›ºå®šç¼–ç çš„ï¼Œå¦‚æœåæœŸé€šè¿‡Tomcatæ’ä»¶é…ç½®äº†é¡¹ç›®çš„è®¿é—®è·¯å¾„ï¼Œé‚£ä¹ˆæ‰€æœ‰éœ€è¦é‡å®šå‘çš„åœ°æ–¹éƒ½éœ€è¦é‡æ–°ä¿®æ”¹ï¼Œè¯¥å¦‚ä½•ä¼˜åŒ–?</li></ol><p><img src="assets/1628863270545.png" alt="1628863270545"></p><p>ç­”æ¡ˆä¹Ÿæ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­åŠ¨æ€å»è·å–é¡¹ç›®è®¿é—®çš„è™šæ‹Ÿç›®å½•ï¼Œå…·ä½“å¦‚ä½•è·å–ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©å‰é¢å’±ä»¬æ‰€å­¦ä¹ çš„requestå¯¹è±¡ä¸­çš„getContextPath()æ–¹æ³•ï¼Œä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/resp1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;resp1....&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç®€åŒ–æ–¹å¼å®Œæˆé‡å®šå‘</span></span><br><span class="line">        <span class="comment">//åŠ¨æ€è·å–è™šæ‹Ÿç›®å½•</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">        response.sendRedirect(contextPath+<span class="string">&quot;/resp2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨è®¿é—®æµ‹è¯•ï¼ŒåŠŸèƒ½ä¾ç„¶èƒ½å¤Ÿå®ç°ï¼Œæ­¤æ—¶å°±å¯ä»¥åŠ¨æ€è·å–é¡¹ç›®è®¿é—®çš„è™šæ‹Ÿè·¯å¾„ï¼Œä»è€Œé™ä½ä»£ç çš„è€¦åˆåº¦ã€‚</p><h3 id="3-4-Responseå“åº”å­—ç¬¦æ•°æ®"><a href="#3-4-Responseå“åº”å­—ç¬¦æ•°æ®" class="headerlink" title="3.4 Responseå“åº”å­—ç¬¦æ•°æ®"></a>3.4 Responseå“åº”å­—ç¬¦æ•°æ®</h3><p>è¦æƒ³å°†å­—ç¬¦æ•°æ®å†™å›åˆ°æµè§ˆå™¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæ­¥éª¤:</p><ul><li><p>é€šè¿‡Responseå¯¹è±¡è·å–å­—ç¬¦è¾“å‡ºæµï¼š PrintWriter writer = resp.getWriter();</p></li><li><p>é€šè¿‡å­—ç¬¦è¾“å‡ºæµå†™æ•°æ®: writer.write(â€œaaaâ€);</p></li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°é€šè¿‡äº›æ¡ˆä¾‹æŠŠå“åº”å­—ç¬¦æ•°æ®ç»™å®é™…åº”ç”¨ä¸‹:</p><ol><li>è¿”å›ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²<code>aaa</code></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å“åº”å­—ç¬¦æ•°æ®ï¼šè®¾ç½®å­—ç¬¦æ•°æ®çš„å“åº”ä½“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/resp3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//1. è·å–å­—ç¬¦è¾“å‡ºæµ</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line"> writer.write(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="assets/1628863905362.png" alt="1628863905362"></p><ol><li>è¿”å›ä¸€ä¸²htmlå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”èƒ½è¢«æµè§ˆå™¨è§£æ</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PrintWriter writer = response.getWriter();</span><br><span class="line">//content-typeï¼Œå‘Šè¯‰æµè§ˆå™¨è¿”å›çš„æ•°æ®ç±»å‹æ˜¯HTMLç±»å‹æ•°æ®ï¼Œè¿™æ ·æµè§ˆå™¨æ‰ä¼šè§£æHTMLæ ‡ç­¾</span><br><span class="line">response.setHeader(&quot;content-type&quot;,&quot;text/html&quot;);</span><br><span class="line">writer.write(&quot;&lt;h1&gt;aaa&lt;/h1&gt;&quot;);</span><br></pre></td></tr></table></figure><p><img src="assets/1628864140820.png" alt="1628864140820"></p><p>==æ³¨æ„:==ä¸€æ¬¡è¯·æ±‚å“åº”ç»“æŸåï¼Œresponseå¯¹è±¡å°±ä¼šè¢«é”€æ¯æ‰ï¼Œæ‰€ä»¥ä¸è¦æ‰‹åŠ¨å…³é—­æµã€‚</p><ol><li>è¿”å›ä¸€ä¸ªä¸­æ–‡çš„å­—ç¬¦ä¸²<code>ä½ å¥½</code>ï¼Œéœ€è¦æ³¨æ„è®¾ç½®å“åº”æ•°æ®çš„ç¼–ç ä¸º<code>utf-8</code></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//è®¾ç½®å“åº”çš„æ•°æ®æ ¼å¼åŠæ•°æ®çš„ç¼–ç </span><br><span class="line">response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line">writer.write(&quot;ä½ å¥½&quot;);</span><br></pre></td></tr></table></figure><p><img src="assets/1628864390263.png" alt="1628864390263"></p><h3 id="3-3-Responseå“åº”å­—èŠ‚æ•°æ®"><a href="#3-3-Responseå“åº”å­—èŠ‚æ•°æ®" class="headerlink" title="3.3 Responseå“åº”å­—èŠ‚æ•°æ®"></a>3.3 Responseå“åº”å­—èŠ‚æ•°æ®</h3><p>è¦æƒ³å°†å­—èŠ‚æ•°æ®å†™å›åˆ°æµè§ˆå™¨ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæ­¥éª¤:</p><ul><li><p>é€šè¿‡Responseå¯¹è±¡è·å–å­—èŠ‚è¾“å‡ºæµï¼šServletOutputStream outputStream = resp.getOutputStream();</p></li><li><p>é€šè¿‡å­—èŠ‚è¾“å‡ºæµå†™æ•°æ®: outputStream.write(å­—èŠ‚æ•°æ®);</p></li></ul><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°é€šè¿‡äº›æ¡ˆä¾‹æŠŠå“åº”å­—ç¬¦æ•°æ®ç»™å®é™…åº”ç”¨ä¸‹:</p><ol><li>è¿”å›ä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶åˆ°æµè§ˆå™¨</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å“åº”å­—èŠ‚æ•°æ®ï¼šè®¾ç½®å­—èŠ‚æ•°æ®çš„å“åº”ä½“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/resp4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. è¯»å–æ–‡ä»¶</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d://a.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//2. è·å–responseå­—èŠ‚è¾“å‡ºæµ</span></span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">        <span class="comment">//3. å®Œæˆæµçš„copy</span></span><br><span class="line">        <span class="type">byte</span>[] buff = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ((len = fis.read(buff))!= -<span class="number">1</span>)&#123;</span><br><span class="line">            os.write(buff,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="assets/1628864883564.png" alt="1628864883564"></p><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œå¯¹äºæµçš„copyçš„ä»£ç è¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ«äººæä¾›å¥½çš„æ–¹æ³•æ¥ç®€åŒ–ä»£ç çš„å¼€å‘ï¼Œå…·ä½“çš„æ­¥éª¤æ˜¯:</p><p>(1)pom.xmlæ·»åŠ ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(2)è°ƒç”¨å·¥å…·ç±»æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//fis:è¾“å…¥æµ</span><br><span class="line">//os:è¾“å‡ºæµ</span><br><span class="line">IOUtils.copy(fis,os);</span><br></pre></td></tr></table></figure><p>ä¼˜åŒ–åçš„ä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å“åº”å­—èŠ‚æ•°æ®ï¼šè®¾ç½®å­—èŠ‚æ•°æ®çš„å“åº”ä½“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/resp4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. è¯»å–æ–‡ä»¶</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d://a.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//2. è·å–responseå­—èŠ‚è¾“å‡ºæµ</span></span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">        <span class="comment">//3. å®Œæˆæµçš„copy</span></span><br><span class="line">      IOUtils.copy(fis,os);</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4ï¼Œç”¨æˆ·æ³¨å†Œç™»å½•æ¡ˆä¾‹"><a href="#4ï¼Œç”¨æˆ·æ³¨å†Œç™»å½•æ¡ˆä¾‹" class="headerlink" title="4ï¼Œç”¨æˆ·æ³¨å†Œç™»å½•æ¡ˆä¾‹"></a>4ï¼Œç”¨æˆ·æ³¨å†Œç™»å½•æ¡ˆä¾‹</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªæ¯”è¾ƒå¸¸è§çš„æ¡ˆä¾‹ï¼Œä¸€ä¸ªæ˜¯==æ³¨å†Œ==ï¼Œä¸€ä¸ªæ˜¯==ç™»å½•==æ¥å¯¹ä»Šå¤©å­¦ä¹ çš„å†…å®¹è¿›è¡Œä¸€ä¸ªå®æˆ˜æ¼”ç»ƒï¼Œé¦–å…ˆæ¥å®ç°ç”¨æˆ·ç™»å½•ã€‚</p><h3 id="4-1-ç”¨æˆ·ç™»å½•"><a href="#4-1-ç”¨æˆ·ç™»å½•" class="headerlink" title="4.1 ç”¨æˆ·ç™»å½•"></a>4.1 ç”¨æˆ·ç™»å½•</h3><h4 id="4-1-1-éœ€æ±‚åˆ†æ"><a href="#4-1-1-éœ€æ±‚åˆ†æ" class="headerlink" title="4.1.1 éœ€æ±‚åˆ†æ"></a>4.1.1 éœ€æ±‚åˆ†æ</h4><p><img src="assets/1628865728305.png" alt="1628865728305"></p><ol><li>ç”¨æˆ·åœ¨ç™»å½•é¡µé¢è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œæäº¤è¯·æ±‚ç»™LoginServlet</li><li>åœ¨LoginServletä¸­æ¥æ”¶è¯·æ±‚å’Œæ•°æ®[ç”¨æˆ·åå’Œå¯†ç ]</li><li>åœ¨LoginServltä¸­é€šè¿‡Mybatiså®ç°è°ƒç”¨UserMapperæ¥æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢æ•°æ®åº“è¡¨</li><li>å°†æŸ¥è¯¢çš„ç»“æœå°è£…åˆ°Userå¯¹è±¡ä¸­è¿›è¡Œè¿”å›</li><li>åœ¨LoginServletä¸­åˆ¤æ–­è¿”å›çš„Userå¯¹è±¡æ˜¯å¦ä¸ºnull</li><li>å¦‚æœä¸ºnulï¼Œè¯´æ˜æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æ²¡æœ‰æŸ¥è¯¢åˆ°ç”¨æˆ·ï¼Œåˆ™ç™»å½•å¤±è´¥ï¼Œè¿”å›â€ç™»å½•å¤±è´¥â€æ•°æ®ç»™å‰ç«¯</li><li>å¦‚æœä¸ä¸ºnull,åˆ™è¯´æ˜ç”¨æˆ·å­˜åœ¨å¹¶ä¸”å¯†ç æ­£ç¡®ï¼Œåˆ™ç™»å½•æˆåŠŸï¼Œè¿”å›â€ç™»å½•æˆåŠŸâ€æ•°æ®ç»™å‰ç«¯</li></ol><h4 id="4-1-2-ç¯å¢ƒå‡†å¤‡"><a href="#4-1-2-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.1.2 ç¯å¢ƒå‡†å¤‡"></a>4.1.2 ç¯å¢ƒå‡†å¤‡</h4><ol><li>å¤åˆ¶èµ„æ–™ä¸­çš„é™æ€é¡µé¢åˆ°é¡¹ç›®çš„webappç›®å½•ä¸‹</li></ol><p>å‚è€ƒ<code>èµ„æ–™\1. ç™»é™†æ³¨å†Œæ¡ˆä¾‹\1. é™æ€é¡µé¢</code>,æ‹·è´å®Œæ•ˆæœå¦‚ä¸‹:</p><p><img src="assets/1628866248169.png" alt="1628866248169"></p><ol><li>åˆ›å»ºdb1æ•°æ®åº“ï¼Œåˆ›å»ºtb_userè¡¨ï¼Œåˆ›å»ºUserå®ä½“ç±»</li></ol><p>2.1 å°†<code>èµ„æ–™\1. ç™»é™†æ³¨å†Œæ¡ˆä¾‹\2. MyBatisç¯å¢ƒ\tb_user.sql</code>ä¸­çš„sqlè¯­å¥æ‰§è¡Œä¸‹:</p><p><img src="assets/1628866403891.png" alt="1628866403891"></p><p> 2.2 å°†<code>èµ„æ–™\1. ç™»é™†æ³¨å†Œæ¡ˆä¾‹\2. MyBatisç¯å¢ƒ\User.java</code>æ‹·è´åˆ°com.itheima.pojo</p><p><img src="assets/1628866560738.png" alt="1628866560738"></p><ol><li>åœ¨é¡¹ç›®çš„pom.xmlå¯¼å…¥Mybatiså’ŒMysqlé©±åŠ¨åæ ‡</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.34<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>åˆ›å»ºmybatis-config.xmlæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ŒUserMapper.xmlæ˜ å°„æ–‡ä»¶,UserMapperæ¥å£</li></ol><p>4.1  å°†<code>èµ„æ–™\1. ç™»é™†æ³¨å†Œæ¡ˆä¾‹\2. MyBatisç¯å¢ƒ\mybatis-config.xml</code>æ‹·è´åˆ°resourcesç›®å½•ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--èµ·åˆ«å--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">                    useSSL:å…³é—­SSLå®‰å…¨è¿æ¥ æ€§èƒ½æ›´é«˜</span></span><br><span class="line"><span class="comment">                    useServerPrepStmts:å¼€å¯é¢„ç¼–è¯‘åŠŸèƒ½</span></span><br><span class="line"><span class="comment">                    &amp;amp; ç­‰åŒäº &amp; ,xmlé…ç½®æ–‡ä»¶ä¸­ä¸èƒ½ç›´æ¥å†™ &amp;ç¬¦å·</span></span><br><span class="line"><span class="comment">                --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///db1?useSSL=false<span class="symbol">&amp;amp;</span>useServerPrepStmts=true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1234&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ‰«æmapper--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.itheima.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4.2 åœ¨com.itheima.mapperåŒ…ä¸‹åˆ›å»ºUserMapperæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.3 å°†<code>èµ„æ–™\1. ç™»é™†æ³¨å†Œæ¡ˆä¾‹\2. MyBatisç¯å¢ƒ\UserMapper.xml</code>æ‹·è´åˆ°resourcesç›®å½•ä¸‹</p><p>==æ³¨æ„ï¼šåœ¨resourcesä¸‹åˆ›å»ºUserMapper.xmlçš„ç›®å½•æ—¶ï¼Œè¦ä½¿ç”¨/åˆ†å‰²==</p><p><img src="assets/1628867237329.png" alt="1628867237329"></p><p>è‡³æ­¤æˆ‘ä»¬æ‰€éœ€è¦çš„ç¯å¢ƒå°±éƒ½å·²ç»å‡†å¤‡å¥½äº†ï¼Œå…·ä½“è¯¥å¦‚ä½•å®ç°?</p><h4 id="4-1-3-ä»£ç å®ç°"><a href="#4-1-3-ä»£ç å®ç°" class="headerlink" title="4.1.3 ä»£ç å®ç°"></a>4.1.3 ä»£ç å®ç°</h4><ol><li>åœ¨UserMapperæ¥å£ä¸­æä¾›ä¸€ä¸ªæ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢ç”¨æˆ·å¯¹è±¡çš„æ–¹æ³•</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tb_user where username = #&#123;username&#125; and password = #&#123;password&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">select</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username,<span class="meta">@Param(&quot;password&quot;)</span>  String password)</span>;</span><br></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>@Paramæ³¨è§£çš„ä½œç”¨:ç”¨äºä¼ é€’å‚æ•°,æ˜¯æ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸SQLä¸­çš„å­—æ®µåç›¸å¯¹åº”ã€‚</p><ol><li>ä¿®æ”¹loign.html</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;css/login.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;loginDiv&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/request-demo/loginServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">id</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;loginMsg&quot;</span>&gt;</span>LOGIN IN<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Username:<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Password:<span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;subDiv&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;login up&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">class</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;reset&quot;</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;register.html&quot;</span>&gt;</span>æ²¡æœ‰è´¦å·ï¼Ÿç‚¹å‡»æ³¨å†Œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>ç¼–å†™LoginServlet</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/loginServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. æ¥æ”¶ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. è°ƒç”¨MyBatiså®ŒæˆæŸ¥è¯¢</span></span><br><span class="line">        <span class="comment">//2.1 è·å–SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">        <span class="comment">//2.2 è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">//2.3 è·å–Mapper</span></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">//2.4 è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.select(username, password);</span><br><span class="line">        <span class="comment">//2.5 é‡Šæ”¾èµ„æº</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–å­—ç¬¦è¾“å‡ºæµï¼Œå¹¶è®¾ç½®content type</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="comment">//3. åˆ¤æ–­useré‡Šæ”¾ä¸ºnull</span></span><br><span class="line">        <span class="keyword">if</span>(user != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">// ç™»é™†æˆåŠŸ</span></span><br><span class="line">            writer.write(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ç™»é™†å¤±è´¥</span></span><br><span class="line">            writer.write(<span class="string">&quot;ç™»é™†å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>å¯åŠ¨æœåŠ¡å™¨æµ‹è¯•</li></ol><p>4.1 å¦‚æœç”¨æˆ·åå’Œå¯†ç è¾“å…¥é”™è¯¯ï¼Œåˆ™</p><p><img src="assets/1628867761245.png" alt="1628867761245"></p><p>4.2 å¦‚æœç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ­£ç¡®ï¼Œåˆ™</p><p><img src="assets/1628867801708.png" alt="1628867801708"></p><p>è‡³æ­¤ç”¨æˆ·çš„ç™»å½•åŠŸèƒ½å°±å·²ç»å®Œæˆäº†~</p><h3 id="4-2-ç”¨æˆ·æ³¨å†Œ"><a href="#4-2-ç”¨æˆ·æ³¨å†Œ" class="headerlink" title="4.2 ç”¨æˆ·æ³¨å†Œ"></a>4.2 ç”¨æˆ·æ³¨å†Œ</h3><h4 id="4-2-1-éœ€æ±‚åˆ†æ"><a href="#4-2-1-éœ€æ±‚åˆ†æ" class="headerlink" title="4.2.1 éœ€æ±‚åˆ†æ"></a>4.2.1 éœ€æ±‚åˆ†æ</h4><p><img src="assets/1628867904783.png" alt="1628867904783"></p><ol><li>ç”¨æˆ·åœ¨æ³¨å†Œé¡µé¢è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œæäº¤è¯·æ±‚ç»™RegisterServlet</li><li>åœ¨RegisterServletä¸­æ¥æ”¶è¯·æ±‚å’Œæ•°æ®[ç”¨æˆ·åå’Œå¯†ç ]</li><li>åœ¨RegisterServletä¸­é€šè¿‡Mybatiså®ç°è°ƒç”¨UserMapperæ¥æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢æ•°æ®åº“è¡¨</li><li>å°†æŸ¥è¯¢çš„ç»“æœå°è£…åˆ°Userå¯¹è±¡ä¸­è¿›è¡Œè¿”å›</li><li>åœ¨RegisterServletä¸­åˆ¤æ–­è¿”å›çš„Userå¯¹è±¡æ˜¯å¦ä¸ºnull</li><li>å¦‚æœä¸ºnulï¼Œè¯´æ˜æ ¹æ®ç”¨æˆ·åå¯ç”¨ï¼Œåˆ™è°ƒç”¨UserMapperæ¥å®ç°æ·»åŠ ç”¨æˆ·</li><li>å¦‚æœä¸ä¸ºnull,åˆ™è¯´æ˜ç”¨æˆ·ä¸å¯ä»¥ï¼Œè¿”å›â€ç”¨æˆ·åå·²å­˜åœ¨â€æ•°æ®ç»™å‰ç«¯</li></ol><h4 id="4-2-2-ä»£ç ç¼–å†™"><a href="#4-2-2-ä»£ç ç¼–å†™" class="headerlink" title="4.2.2 ä»£ç ç¼–å†™"></a>4.2.2 ä»£ç ç¼–å†™</h4><ol><li>ç¼–å†™UserMapperæä¾›æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·æ•°æ®æ–¹æ³•å’Œæ·»åŠ ç”¨æˆ·æ–¹æ³•</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Select(&quot;select * from tb_user where username = #&#123;username&#125;&quot;)</span></span><br><span class="line">User <span class="title function_">selectByUsername</span><span class="params">(String username)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ·»åŠ ç”¨æˆ·</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Insert(&quot;insert into tb_user values(null,#&#123;username&#125;,#&#123;password&#125;)&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span>;</span><br></pre></td></tr></table></figure><ol><li>ä¿®æ”¹register.html</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ¬¢è¿æ³¨å†Œ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;css/register.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-div&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;reg-content&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ¬¢è¿æ³¨å†Œ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>å·²æœ‰å¸å·ï¼Ÿ<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;login.html&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;reg-form&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/request-demo/registerServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>ç”¨æˆ·å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;inputs&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;username_err&quot;</span> <span class="attr">class</span>=<span class="string">&quot;err_msg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: none&quot;</span>&gt;</span>ç”¨æˆ·åä¸å¤ªå—æ¬¢è¿<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¯†ç <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&quot;inputs&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;password_err&quot;</span> <span class="attr">class</span>=<span class="string">&quot;err_msg&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: none&quot;</span>&gt;</span>å¯†ç æ ¼å¼æœ‰è¯¯<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;buttons&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;æ³¨ å†Œ&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;reg_btn&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> <span class="attr">class</span>=<span class="string">&quot;clear&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ol><li>åˆ›å»ºRegisterServletç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/registerServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegisterServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. æ¥æ”¶ç”¨æˆ·æ•°æ®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°è£…ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setUsername(username);</span><br><span class="line">        user.setPassword(password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. è°ƒç”¨mapper æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·å¯¹è±¡</span></span><br><span class="line">        <span class="comment">//2.1 è·å–SqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">        <span class="comment">//2.2 è·å–SqlSessionå¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="comment">//2.3 è·å–Mapper</span></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.4 è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> userMapper.selectByUsername(username);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. åˆ¤æ–­ç”¨æˆ·å¯¹è±¡é‡Šæ”¾ä¸ºnull</span></span><br><span class="line">        <span class="keyword">if</span>( u == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">// ç”¨æˆ·åä¸å­˜åœ¨ï¼Œæ·»åŠ ç”¨æˆ·</span></span><br><span class="line">            userMapper.add(user);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æäº¤äº‹åŠ¡</span></span><br><span class="line">            sqlSession.commit();</span><br><span class="line">            <span class="comment">// é‡Šæ”¾èµ„æº</span></span><br><span class="line">            sqlSession.close();</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// ç”¨æˆ·åå­˜åœ¨ï¼Œç»™å‡ºæç¤ºä¿¡æ¯</span></span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">            response.getWriter().write(<span class="string">&quot;ç”¨æˆ·åå·²å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>å¯åŠ¨æœåŠ¡å™¨è¿›è¡Œæµ‹è¯•</li></ol><p>4.1 å¦‚æœæµ‹è¯•æˆåŠŸï¼Œåˆ™åœ¨æ•°æ®åº“ä¸­å°±èƒ½æŸ¥çœ‹åˆ°æ–°æ³¨å†Œçš„æ•°æ®</p><p>4.2 å¦‚æœç”¨æˆ·å·²ç»å­˜åœ¨ï¼Œåˆ™åœ¨é¡µé¢ä¸Šå±•ç¤º <code>ç”¨æˆ·åå·²å­˜åœ¨</code> çš„æç¤ºä¿¡æ¯</p><h3 id="4-3-SqlSessionFactoryå·¥å…·ç±»æŠ½å–"><a href="#4-3-SqlSessionFactoryå·¥å…·ç±»æŠ½å–" class="headerlink" title="4.3 SqlSessionFactoryå·¥å…·ç±»æŠ½å–"></a>4.3 SqlSessionFactoryå·¥å…·ç±»æŠ½å–</h3><p>ä¸Šé¢ä¸¤ä¸ªåŠŸèƒ½å·²ç»å®ç°ï¼Œä½†æ˜¯åœ¨å†™Servletçš„æ—¶å€™ï¼Œå› ä¸ºéœ€è¦ä½¿ç”¨Mybatisæ¥å®Œæˆæ•°æ®åº“çš„æ“ä½œï¼Œæ‰€ä»¥å¯¹äºMybatisçš„åŸºç¡€æ“ä½œå°±å‡ºç°äº†äº›é‡å¤ä»£ç ï¼Œå¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line"><span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br></pre></td></tr></table></figure><p>æœ‰äº†è¿™äº›é‡å¤ä»£ç å°±ä¼šé€ æˆä¸€äº›é—®é¢˜:</p><ul><li>é‡å¤ä»£ç ä¸åˆ©äºåæœŸçš„ç»´æŠ¤</li><li>SqlSessionFactoryå·¥å‚ç±»è¿›è¡Œé‡å¤åˆ›å»º<ul><li>å°±ç›¸å½“äºæ¯æ¬¡ä¹°æ‰‹æœºéƒ½éœ€è¦é‡æ–°åˆ›å»ºä¸€ä¸ªæ‰‹æœºç”Ÿäº§å·¥å‚æ¥ç»™ä½ åˆ¶é€ ä¸€ä¸ªæ‰‹æœºä¸€æ ·ï¼Œèµ„æºæ¶ˆè€—éå¸¸å¤§ä½†æ€§èƒ½å´éå¸¸ä½ã€‚æ‰€ä»¥è¿™ä¹ˆåšæ˜¯ä¸å…è®¸çš„ã€‚</li></ul></li></ul><p>é‚£å¦‚ä½•æ¥ä¼˜åŒ–å‘¢ï¼Ÿ</p><ul><li>ä»£ç é‡å¤å¯ä»¥æŠ½å–å·¥å…·ç±»</li><li>å¯¹æŒ‡å®šä»£ç åªéœ€è¦æ‰§è¡Œä¸€æ¬¡å¯ä»¥ä½¿ç”¨é™æ€ä»£ç å—</li></ul><p>æœ‰äº†è¿™ä¸¤ä¸ªæ–¹å‘åï¼Œä»£ç å…·ä½“è¯¥å¦‚ä½•ç¼–å†™?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionFactoryUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//é™æ€ä»£ç å—ä¼šéšç€ç±»çš„åŠ è½½è€Œè‡ªåŠ¨æ‰§è¡Œï¼Œä¸”åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSessionFactory <span class="title function_">getSqlSessionFactory</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å·¥å…·ç±»æŠ½å–ä»¥åï¼Œä»¥ååœ¨å¯¹Mybatisçš„SqlSessionè¿›è¡Œæ“ä½œçš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span>SqlSessionFactoryUtils.getSqlSessionFactory();</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥å¾ˆå¥½çš„è§£å†³ä¸Šé¢æ‰€è¯´çš„ä»£ç é‡å¤å’Œé‡å¤åˆ›å»ºå·¥å‚å¯¼è‡´æ€§èƒ½ä½çš„é—®é¢˜äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰å±‚æ¶æ„</title>
      <link href="/2023/05/21/%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84/"/>
      <url>/2023/05/21/%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸¤å±‚æ¶æ„æ¡ˆä¾‹"><a href="#ä¸¤å±‚æ¶æ„æ¡ˆä¾‹" class="headerlink" title="ä¸¤å±‚æ¶æ„æ¡ˆä¾‹"></a>ä¸¤å±‚æ¶æ„æ¡ˆä¾‹</h1><h2 id="ä¸€ã€å®ç°ç™»å½•åŠŸèƒ½"><a href="#ä¸€ã€å®ç°ç™»å½•åŠŸèƒ½" class="headerlink" title="ä¸€ã€å®ç°ç™»å½•åŠŸèƒ½"></a>ä¸€ã€å®ç°ç™»å½•åŠŸèƒ½</h2><ul><li>æ­¥éª¤1:åˆ›å»ºé¡¹ç›®å·¥ç¨‹ï¼Œå·¥ç¨‹åç§°:CO8_Structrueï¼Œè¿›è¡Œwebé¡¹ç›®åˆå§‹åŒ–é…ç½®</li><li>æ­¥éª¤2:å¤åˆ¶CO7é¡¹ç›®èµ„æ–™åŠwebèµ„æ–™ï¼Œå¹¶æµ‹è¯•é¡¹ç›®è¿è¡Œã€‚</li><li>æ­¥éª¤3:åˆ›å»ºcom.itbbj.edu.servletåŒ…ï¼Œå¹¶åˆ›å»ºUserLoginServletæ­¥éª¤4:é‡æ„login.jspä¸userList.jspé¡µé¢</li></ul><h3 id="1-1-UserLogin-Servlet"><a href="#1-1-UserLogin-Servlet" class="headerlink" title="1.1 UserLogin-Servlet"></a>1.1 UserLogin-Servlet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.impl.UserDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/Login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserLoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.login(userName, password);</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">Cookie</span> <span class="variable">cookieUserName</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;userName&quot;</span>, userName);</span><br><span class="line">            cookieUserName.setMaxAge(<span class="number">60</span> * <span class="number">10</span>);</span><br><span class="line">            response.addCookie(cookieUserName);</span><br><span class="line">            response.sendRedirect(contextPath + <span class="string">&quot;/userList.jsp&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">            session.setAttribute(<span class="string">&quot;mes&quot;</span>,<span class="string">&quot;è´¦å·æˆ–è€…å¯†ç ä¸æ­£ç¡®&quot;</span>);</span><br><span class="line">            response.sendRedirect(contextPath+<span class="string">&quot;/login.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-2-UserDao-interface"><a href="#1-2-UserDao-interface" class="headerlink" title="1.2 UserDao-interface"></a>1.2 UserDao-interface</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(User user)</span>;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br><span class="line">    User <span class="title function_">login</span><span class="params">(String paramUserName,String paramPwd)</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">existUserName</span><span class="params">(String userName)</span>;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">existEmail</span><span class="params">(String email)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-3-UserDaoImpl-impl"><a href="#1-3-UserDaoImpl-impl" class="headerlink" title="1.3 UserDaoImpl-impl"></a>1.3 UserDaoImpl-impl</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.util.DbUtil;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.util.DsUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="type">DbUtil</span> <span class="variable">dbUtil</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DbUtil</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//    DsUtil dbUtil = new DsUtil();</span></span><br><span class="line">    <span class="comment">//å¼‚å¸¸å¤„ç†---&gt;ç›´æ¥æŠ›å‡º</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update user set password = ? where id = ?&quot;</span>;</span><br><span class="line">        Object[] params = &#123;user.getPassword(), user.getId()&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> dbUtil.executeUpdate(sql, params);</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insert</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into user(userName,password,email,userType) values (?,?,?,?)&quot;</span>;</span><br><span class="line">        Object[] params = &#123;user.getUserName(), user.getPassword(), user.getEmail(), user.getUserType()&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> dbUtil.executeUpdate(sql, params);</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dbUtil.getConnection();</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        List&lt;User&gt; userList = <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user&quot;</span>;</span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            rs = preparedStatement.executeQuery();</span><br><span class="line">            <span class="comment">//å®ä¾‹åŒ–ç”¨æˆ·é›†åˆ</span></span><br><span class="line">            userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">userType</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;userType&quot;</span>);</span><br><span class="line">                user = <span class="keyword">new</span> <span class="title class_">User</span>(id, userName, password, email, userType);</span><br><span class="line">                userList.add(user);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            dbUtil.closeAll(connection, preparedStatement, rs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String paramUserName, String paramPwd)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dbUtil.getConnection();</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where userName = ? and password = ?&quot;</span>;</span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>, paramUserName);</span><br><span class="line">            preparedStatement.setString(<span class="number">2</span>, paramPwd);</span><br><span class="line">            rs = preparedStatement.executeQuery();</span><br><span class="line">            user = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">userType</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;userType&quot;</span>);</span><br><span class="line">                user = <span class="keyword">new</span> <span class="title class_">User</span>(id, userName, password, email, userType);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            dbUtil.closeAll(connection, preparedStatement, rs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">existUserName</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dbUtil.getConnection();</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isExit</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where userName = ?&quot;</span>;</span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>, userName);</span><br><span class="line">            rs = preparedStatement.executeQuery();</span><br><span class="line">            isExit = rs.next();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            dbUtil.closeAll(connection, preparedStatement, rs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> isExit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">existEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dbUtil.getConnection();</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isExit</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where email = ?&quot;</span>;</span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>, email);</span><br><span class="line">            rs = preparedStatement.executeQuery();</span><br><span class="line">            isExit = rs.next();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            dbUtil.closeAll(connection, preparedStatement, rs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> isExit;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-4-Util"><a href="#1-4-Util" class="headerlink" title="1.4 Util"></a>1.4 Util</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DbUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String user;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> DbUtil.class.getClassLoader().getResourceAsStream(<span class="string">&quot;database.properties&quot;</span>);</span><br><span class="line">            properties.load(inputStream);</span><br><span class="line">            driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.è·å–é“¾æ¥å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            connection = DriverManager.getConnection(url, user, password);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">closeAll</span><span class="params">(Connection connection, Statement statement,ResultSet resultSet)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (resultSet != <span class="literal">null</span>) &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (statement != <span class="literal">null</span>) &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sql,Object[] params)</span> &#123;</span><br><span class="line">        connection = getConnection();</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">                preparedStatement.setObject(i+<span class="number">1</span>,params[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            num = preparedStatement.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        closeAll(connection,preparedStatement,<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update user set userName = ?,password = ?,email = ?,userType = ? where id = ?&quot;</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        Object[] params = &#123;user.getUserName(),user.getPassword(),user.getEmail(),user.getUserType(),user.getId()&#125;;</span><br><span class="line">        <span class="type">DbUtil</span> <span class="variable">dbUtil</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DbUtil</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> dbUtil.executeUpdate(sql,params);</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-5-login-jsp"><a href="#1-5-login-jsp" class="headerlink" title="1.5 login.jsp"></a>1.5 login.jsp</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;utf-8&quot;</span>/&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>/&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>/&gt;</span><br><span class="line">    &lt;title&gt;ç®¡ç†å‘˜ç™»å½•&lt;/title&gt;</span><br><span class="line">    &lt;!-- <span class="number">1.</span> å¯¼å…¥CSSçš„å…¨å±€æ ·å¼ --&gt;</span><br><span class="line">    &lt;link href=<span class="string">&quot;css/bootstrap.min.css&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span>&gt;</span><br><span class="line">    &lt;!-- <span class="number">2.</span> jQueryå¯¼å…¥ï¼Œå»ºè®®ä½¿ç”¨<span class="number">1.9</span>ä»¥ä¸Šçš„ç‰ˆæœ¬ --&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;js/jquery-2.1.0.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;!-- <span class="number">3.</span> å¯¼å…¥bootstrapçš„jsæ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;js/bootstrap.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=<span class="string">&quot;container&quot;</span> style=<span class="string">&quot;width: 400px;&quot;</span>&gt;</span><br><span class="line">    &lt;h3 style=<span class="string">&quot;text-align: center;&quot;</span>&gt;ç®¡ç†å‘˜ç™»å½•&lt;/h3&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/Login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;user&quot;</span>&gt;ç”¨æˆ·åï¼š&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userName&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;user&quot;</span> placeholder=<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span>/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;password&quot;</span>&gt;å¯†ç ï¼š&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;password&quot;</span> placeholder=<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span>/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span> style=<span class="string">&quot;text-align: center; padding: 0 20px&quot;</span>&gt;</span><br><span class="line">            &lt;input class=<span class="string">&quot;btn btn btn-primary&quot;</span> type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;ç™»å½•&quot;</span>&gt; &lt;a class=<span class="string">&quot;btn btn-primary&quot;</span> href=<span class="string">&quot;userAdd.jsp&quot;</span>&gt;æ³¨å†Œ&lt;/a&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;!-- å‡ºé”™æ˜¾ç¤ºçš„ä¿¡æ¯æ¡† --&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;alert alert-warning alert-dismissible&quot;</span>  role=<span class="string">&quot;alert&quot;</span>&gt;</span><br><span class="line">        &lt;button type=<span class="string">&quot;button&quot;</span> class=<span class="string">&quot;close&quot;</span> data-dismiss=<span class="string">&quot;alert&quot;</span> &gt;</span><br><span class="line">            &lt;span&gt;&amp;times;&lt;/span&gt;</span><br><span class="line">        &lt;/button&gt;</span><br><span class="line">        &lt;strong&gt;&lt;%=session.getAttribute(<span class="string">&quot;mes&quot;</span>)%&gt;&gt;&lt;/strong&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="äºŒã€å®ç°æ³¨å†ŒåŠŸèƒ½"><a href="#äºŒã€å®ç°æ³¨å†ŒåŠŸèƒ½" class="headerlink" title="äºŒã€å®ç°æ³¨å†ŒåŠŸèƒ½"></a>äºŒã€å®ç°æ³¨å†ŒåŠŸèƒ½</h2><h3 id="UserAdd-Servlet"><a href="#UserAdd-Servlet" class="headerlink" title="UserAdd-Servlet"></a>UserAdd-Servlet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.impl.UserDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/userAdd&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAddServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">userType</span> <span class="operator">=</span> Integer.parseInt(request.getParameter(<span class="string">&quot;userType&quot;</span>));</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(userName, password, email, userType);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">isExistUserName</span> <span class="operator">=</span> userDao.existUserName(userName);</span><br><span class="line">        <span class="type">boolean</span> isExistEmail= userDao.existEmail(email);</span><br><span class="line">        <span class="keyword">if</span> (isExistUserName) &#123;</span><br><span class="line">            request.setAttribute(<span class="string">&quot;info&quot;</span>,<span class="string">&quot;è´¦å·å·²å­˜åœ¨ï¼Œæ³¨å†Œå¤±è´¥&quot;</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;userAdd.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (isExistEmail) &#123;</span><br><span class="line">            request.setAttribute(<span class="string">&quot;info&quot;</span>,<span class="string">&quot;ç”µå­é‚®ç®±å·²å­˜åœ¨ï¼Œæ³¨å†Œå¤±è´¥&quot;</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;userAdd.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> userDao.insert(user);</span><br><span class="line">            <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">            session.setAttribute(<span class="string">&quot;mes&quot;</span>,<span class="string">&quot;æ–°ç”¨æˆ·æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•&quot;</span>);</span><br><span class="line">            response.sendRedirect(contextPath+<span class="string">&quot;/login.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å®ç°æ³¨é”€åŠŸèƒ½"><a href="#ä¸‰ã€å®ç°æ³¨é”€åŠŸèƒ½" class="headerlink" title="ä¸‰ã€å®ç°æ³¨é”€åŠŸèƒ½"></a>ä¸‰ã€å®ç°æ³¨é”€åŠŸèƒ½</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.impl.UserDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/Logout&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserLogoutServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        <span class="keyword">if</span> (cookies != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">              cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        response.sendRedirect(contextPath+<span class="string">&quot;/login.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ä¸‰å±‚æ¶æ„"><a href="#ä¸‰å±‚æ¶æ„" class="headerlink" title="ä¸‰å±‚æ¶æ„"></a>ä¸‰å±‚æ¶æ„</h1><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230522160938580.png" alt="image-20230522160938580"></p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230522161151749.png" alt="image-20230522161151749"></p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230522161311282.png" alt="image-20230522161311282"></p><h3 id="1-æœåŠ¡å±‚"><a href="#1-æœåŠ¡å±‚" class="headerlink" title="1. æœåŠ¡å±‚"></a>1. æœåŠ¡å±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.impl.UserDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.service.UserService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.update(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">register</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> user.getUserName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> user.getEmail();</span><br><span class="line">        <span class="keyword">if</span> (userDao.existUserName(userName))&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(userDao.existEmail(email))&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> userDao.insert(user);</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.getUserList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String paramUserName, String paramPwd)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.login(paramUserName,paramPwd);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">existUserName</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">existEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-Servletå±‚"><a href="#2-Servletå±‚" class="headerlink" title="2. Servletå±‚"></a>2. Servletå±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.impl.UserDaoImpl;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.service.impl.UserServiceImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/userAdd&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAddServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        UserDao userDao = new UserDaoImpl();</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">userType</span> <span class="operator">=</span> Integer.parseInt(request.getParameter(<span class="string">&quot;userType&quot;</span>));</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(userName, password, email, userType);</span><br><span class="line"><span class="comment">//        boolean isExistUserName = userDao.existUserName(userName);</span></span><br><span class="line"><span class="comment">//        boolean isExistEmail= userDao.existEmail(email);</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">registerNum</span> <span class="operator">=</span> userService.register(user);</span><br><span class="line">        <span class="keyword">if</span> (registerNum == -<span class="number">1</span>) &#123;</span><br><span class="line">            request.setAttribute(<span class="string">&quot;info&quot;</span>,<span class="string">&quot;è´¦å·å·²å­˜åœ¨ï¼Œæ³¨å†Œå¤±è´¥&quot;</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;userAdd.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (registerNum == -<span class="number">2</span>) &#123;</span><br><span class="line">            request.setAttribute(<span class="string">&quot;info&quot;</span>,<span class="string">&quot;ç”µå­é‚®ç®±å·²å­˜åœ¨ï¼Œæ³¨å†Œå¤±è´¥&quot;</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;userAdd.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">            session.setAttribute(<span class="string">&quot;mes&quot;</span>,<span class="string">&quot;æ–°ç”¨æˆ·æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•&quot;</span>);</span><br><span class="line">            response.sendRedirect(contextPath+<span class="string">&quot;/login.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>JSPåŠ¨æ€ç½‘é¡µå¼€å‘</title>
      <link href="/2023/05/19/JSP%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E5%BC%80%E5%8F%91/"/>
      <url>/2023/05/19/JSP%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç½‘é¡µæ—¢å¯ä»¥å†™htmlä»£ç ï¼Œåˆå¯ä»¥å†™javaä»£ç </span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æ³¨é‡Š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: $&#123;USER&#125;</span><br><span class="line">  Date: $&#123;DATE&#125;</span><br><span class="line">  Time: $&#123;TIME&#125;</span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br></pre></td></tr></table></figure><h2 id="1-è¯­æ³•"><a href="#1-è¯­æ³•" class="headerlink" title="1.è¯­æ³•"></a>1.è¯­æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰€æœ‰çš„Javaä»£ç éƒ½éœ€è¦åœ¨</span></span><br><span class="line">&lt;%</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line">ä¸­å†™å…¥,åªå†™å…¥</span><br></pre></td></tr></table></figure><h3 id="1-1-pageæŒ‡ä»¤"><a href="#1-1-pageæŒ‡ä»¤" class="headerlink" title="1.1 pageæŒ‡ä»¤"></a>1.1 pageæŒ‡ä»¤</h3><p>å®šä¹‰æ•´ä¸ªé¡µé¢çš„å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230520204550112.png" alt="image-20230520204550112"></p><h3 id="1-2-é“¾å¼ç¼–ç¨‹"><a href="#1-2-é“¾å¼ç¼–ç¨‹" class="headerlink" title="1.2 é“¾å¼ç¼–ç¨‹"></a>1.2 é“¾å¼ç¼–ç¨‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤šä½¿ç”¨åŒ¿åå˜é‡</span></span><br><span class="line">System.out.println(<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyy-MM-dd&quot;</span>).format(<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br></pre></td></tr></table></figure><h3 id="1-3-includeæŒ‡ä»¤"><a href="#1-3-includeæŒ‡ä»¤" class="headerlink" title="1.3 includeæŒ‡ä»¤"></a>1.3 includeæŒ‡ä»¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å°±æ˜¯åœ¨ä¸€ä¸ªjspé¡µé¢å†åµŒå…¥ä¸€ä¸ªjspé¡µé¢</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.text.SimpleDateFormat&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.Date&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;%<span class="meta">@include</span> file=<span class="string">&quot;topheader.jsp&quot;</span>%&gt;</span><br><span class="line">  &lt;h1&gt;å†…å®¹éƒ¨åˆ†&lt;/h1&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230520205813553.png" alt="image-20230520205813553"></p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230520205835126.png" alt="image-20230520205835126"></p><h2 id="2-è„šæœ¬åº”ç”¨"><a href="#2-è„šæœ¬åº”ç”¨" class="headerlink" title="2. è„šæœ¬åº”ç”¨"></a>2. è„šæœ¬åº”ç”¨</h2><ul><li><p>1-ç›¸å½“äºå†SRCä¸‹å†™çš„Javaä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;% JAVAä»£ç  %&gt;</span><br></pre></td></tr></table></figure></li><li><p>2-åœ¨HTMLé¡µé¢ä¸Šæ˜¾ç¤ºå˜é‡çš„æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%= JAVAå˜é‡ %&gt;</span><br></pre></td></tr></table></figure></li><li><p>3-å£°æ˜æ–¹æ³•æˆ–å…¨å±€å˜é‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%! å£°æ˜æ–¹æ³•åŠå…¨å±€å˜é‡ %&gt;</span><br></pre></td></tr></table></figure></li></ul><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.text.SimpleDateFormat&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.Date&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">    <span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">systemDate</span> <span class="operator">=</span> simpleDateFormat.format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">  %&gt;</span><br><span class="line">  &lt;%!</span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> num1,<span class="type">int</span> num2)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> num1 + num2;</span><br><span class="line">    &#125;</span><br><span class="line">  %&gt;</span><br><span class="line">  &lt;%= systemDate%&gt;&lt;br&gt;</span><br><span class="line">  &lt;h1&gt;è°ƒç”¨æ–¹æ³•:&lt;%= add(<span class="number">55</span>,<span class="number">66</span>)%&gt;&lt;/h1&gt;</span><br><span class="line">  &lt;h1&gt;num=&lt;%=num%&gt;&lt;/h1&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230520211135277.png" alt="image-20230520211135277"></p><h2 id="3-æ¡ˆä¾‹"><a href="#3-æ¡ˆä¾‹" class="headerlink" title="3. æ¡ˆä¾‹"></a>3. æ¡ˆä¾‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.text.SimpleDateFormat&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.Date&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;%!</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">findYear</span><span class="params">(<span class="type">int</span> year)</span> &#123;</span><br><span class="line">      <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">if</span>((year %<span class="number">4</span> ==<span class="number">0</span> &amp;&amp; year %<span class="number">100</span> != <span class="number">0</span>) || year %<span class="number">400</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        flag = <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> flag = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">return</span> flag;</span><br><span class="line">    &#125;</span><br><span class="line">  %&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2000</span>; i &lt;= <span class="number">2023</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (findYear(i)) &#123;</span><br><span class="line">        out.println(i);</span><br><span class="line">        count++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  %&gt;</span><br><span class="line">  &lt;br&gt;</span><br><span class="line">  ä»<span class="number">2000</span>å¹´åˆ°<span class="number">2023</span>å¹´å…±æœ‰&lt;%=count%&gt;ä¸ªé—°å¹´</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œæœ‰ä¸ªç‚¹è¦æ³¨æ„ï¼Œoutæ–¹æ³•éœ€è¦å¯¼å…¥tomcatçš„ä¾èµ–åŒ…</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230520212013053.png" alt="image-20230520212013053"></p><h2 id="4-æ³¨é‡Š"><a href="#4-æ³¨é‡Š" class="headerlink" title="4. æ³¨é‡Š"></a>4. æ³¨é‡Š</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230520212618180.png" alt="image-20230520212618180"></p><h1 id="Tomact"><a href="#Tomact" class="headerlink" title="Tomact"></a>Tomact</h1><h2 id="1-éƒ¨ç½²"><a href="#1-éƒ¨ç½²" class="headerlink" title="1.éƒ¨ç½²"></a>1.éƒ¨ç½²</h2><h4 id="1-1-1-å…ˆææ¸…æ¥šç›®å½•æ–‡ä»¶"><a href="#1-1-1-å…ˆææ¸…æ¥šç›®å½•æ–‡ä»¶" class="headerlink" title="1.1.1 å…ˆææ¸…æ¥šç›®å½•æ–‡ä»¶"></a>1.1.1 å…ˆææ¸…æ¥šç›®å½•æ–‡ä»¶</h4><ul><li>bin: ç¯å¢ƒå˜é‡</li><li>conf: é…ç½®æ–‡ä»¶</li><li>lib: ç¬¬ä¸‰æ–¹çš„jaråŒ…</li><li>logs: æ—¥å¿—æ–‡ä»¶</li><li>temp: ä¸´æ—¶ç¼“å­˜æ–‡ä»¶</li><li>webapps: å­˜æ”¾é¡¹ç›®â€”â€”&gt; ç½‘ç«™</li><li>work: è¿è¡Œç¨‹åºäº§ç”Ÿä¸é‡è¦</li></ul><p>ææ¸…æ¥šè¿™äº›ï¼Œå°±å¯¹éƒ¨ç½²æœ‰äº†ä¸ªå¤§æ¦‚çš„äº†è§£, é‡è¦çš„åœ°æ–¹è¿˜æ˜¯webappsæ–‡ä»¶å¤¹</p><p>åªéœ€è¦å°†é¡¹ç›®æ–‡ä»¶æ”¾åœ¨webappsç›®å½•ä¸‹</p><p><img src="https://beihaibei.eu.org/img/JSP/jsp1.webp" alt=""></p><h4 id="1-1-2-è¿è¡Œé¡¹ç›®"><a href="#1-1-2-è¿è¡Œé¡¹ç›®" class="headerlink" title="1.1.2 è¿è¡Œé¡¹ç›®"></a>1.1.2 è¿è¡Œé¡¹ç›®</h4><ol><li>è¿è¡ŒtomcatæœåŠ¡å™¨</li><li>åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€ï¼Œä¾‹å¦‚ï¼š<a href="http://localhost:8080/onOpen/">http://localhost:8080/onOpen/</a></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œæ¯”è¾ƒé‡è¦çš„ç‚¹æ˜¯ï¼ŒtomcatæœåŠ¡ä¼šè‡ªåŠ¨æŸ¥è¯¢ç›®å½•ä¸‹çš„index.htmlæ–‡ä»¶</span><br></pre></td></tr></table></figure><h2 id="2-waråŒ…åº”ç”¨"><a href="#2-waråŒ…åº”ç”¨" class="headerlink" title="2. waråŒ…åº”ç”¨"></a>2. waråŒ…åº”ç”¨</h2><p>åœ¨é¡¹ç›®ç›®å½•ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jar -cvf beihai.war *</span><br></pre></td></tr></table></figure><ol><li>å¦‚æœå°†waråŒ…æ”¾åœ¨ä¸Šé¢1.1.2æ‰€è®²çš„webappsç›®å½•ä¸‹ï¼Œç„¶åå¼€å¯tomcatï¼Œè¿™ä¸ªwaråŒ…ä¼šè‡ªåŠ¨è§£å‹</li><li>å¦‚æœå°†waråŒ…åœ¨webappsç›®å½•ä¸‹åˆ å»ä¼šç›´æ¥åˆ å»åˆšæ‰è§£å‹çš„ç›®å½•</li></ol><h2 id="3-IDEAä¸­é…ç½®Tomcat"><a href="#3-IDEAä¸­é…ç½®Tomcat" class="headerlink" title="3.IDEAä¸­é…ç½®Tomcat"></a>3.IDEAä¸­é…ç½®Tomcat</h2><p>ideaç‰ˆæœ¬: 2021.1.3</p><p><img src="https://beihaibei.eu.org/img/JSP/jsp2.webp" alt="image-20230519213030172"></p><p><img src="https://beihaibei.eu.org/img/JSP/jsp3.webp" alt="image-20230519213046942"></p><p><img src="https://beihaibei.eu.org/img/JSP/jsp4.webp" alt="image-20230519213104202"></p><p><img src="https://beihaibei.eu.org/img/JSP/jsp5.webp" alt="image-20230519213122303"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œçš„Deploymentæœ‰ç‚¹æ··æ·†</span><br><span class="line">ç¬¬ä¸€ç§æ˜¯war exploded</span><br><span class="line">ç¬¬äºŒç§æ˜¯war</span><br></pre></td></tr></table></figure><h3 id="Tomcatéƒ¨ç½²æ—¶warå’Œwar-explodedåŒºåˆ«"><a href="#Tomcatéƒ¨ç½²æ—¶warå’Œwar-explodedåŒºåˆ«" class="headerlink" title="Tomcatéƒ¨ç½²æ—¶warå’Œwar explodedåŒºåˆ«"></a>Tomcatéƒ¨ç½²æ—¶warå’Œwar explodedåŒºåˆ«</h3><p><a href="https://baijiahao.baidu.com/s?id=1597444322591083981&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1597444322591083981&amp;wfr=spider&amp;for=pc</a></p><h2 id="4-Tomcatå†…ç½®å‡½æ•°"><a href="#4-Tomcatå†…ç½®å‡½æ•°" class="headerlink" title="4. Tomcatå†…ç½®å‡½æ•°"></a>4. Tomcatå†…ç½®å‡½æ•°</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆéœ€è¦å¯¼å…¥tomcatä¾èµ–</span><br><span class="line">File-&gt;Project Structure-&gt;Module-&gt;Dependencies</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">    <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">    <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">    out.println(<span class="string">&quot;è¯·æ±‚æ–¹å¼ï¼š&quot;</span>+method+<span class="string">&quot;&lt;br&gt;&quot;</span>+<span class="string">&quot;ä¼ é€’å‚æ•°å€¼:&quot;</span>+userName);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure><p>å°±è®°ä½ä¸€äº›å¸¸ç”¨çš„å°±å¤Ÿäº†</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521145313321.png" alt="image-20230521145313321"></p><h2 id="5-å¸¸è§é—®é¢˜"><a href="#5-å¸¸è§é—®é¢˜" class="headerlink" title="5. å¸¸è§é—®é¢˜"></a>5. å¸¸è§é—®é¢˜</h2><ol><li><p>æœ‰æ—¶å€™ä¼šé‡åˆ°JSPæ–‡ä»¶ä¸­æ— æ³•ä½¿ç”¨requestæ–¹æ³•ï¼ˆideaï¼‰</p><p><a href="https://blog.csdn.net/qq_45953233/article/details/114445607">https://blog.csdn.net/qq_45953233/article/details/114445607</a></p></li></ol><h1 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h1><h2 id="1-éƒ¨ç½²-1"><a href="#1-éƒ¨ç½²-1" class="headerlink" title="1.éƒ¨ç½²"></a>1.éƒ¨ç½²</h2><ol><li><p>åœ¨javaä¸­æ–°å»ºç±»å®ç°Servletæ¥å£</p><p><img src="https://beihaibei.eu.org/img/JSP/jsp6.webp" alt="image-20230519215227970"></p></li></ol><p>â€‹    </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tutu.web.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ç°äº†æ¥å£Servlet</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo01</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é‡å†™æŠ½è±¡æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;serviceæ–¹æ³•è¢«è§¦å‘&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li><p>åœ¨webappç›®å½•ä¸‹çš„WEB-INFä¸­çš„web.xmlå¼•å…¥Servlet</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.tutu.web.servlet.ServletDemo01<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  servletçš„æ˜ å°„  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é€šè¿‡localhost:8080/web/demo01å°±ä¼šè¢«è®¿é—®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>å®ç°é“¾æ¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/web/demo1</span><br></pre></td></tr></table></figure><p><img src="https://beihaibei.eu.org/img/JSP/jsp7.webp" alt="image-20230519215618672"></p></li></ol><h2 id="2-åŸç†"><a href="#2-åŸç†" class="headerlink" title="2.åŸç†"></a>2.åŸç†</h2><p><img src="E:\Hexo-Blog\piccode\PicCode\img\JSP\jsp8.webp" alt="image-20230519220133801" style="zoom: 67%;" /></p><h2 id="3-ç”Ÿå‘½å‘¨æœŸ"><a href="#3-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3. ç”Ÿå‘½å‘¨æœŸ"></a>3. ç”Ÿå‘½å‘¨æœŸ</h2><h3 id="3-1-1-init"><a href="#3-1-1-init" class="headerlink" title="3.1.1 init"></a>3.1.1 init</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ServletDemo1--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.tutu.web.servlet.ServletDemo1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--init--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é»˜è®¤å€¼æ˜¯-1,è´Ÿæ•°: ç¬¬ä¸€æ¬¡è®¿é—®servletèµ„æºæ—¶è¢«è§¦å‘--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--0æˆ–è€…æ­£æ•´æ•°: å½“æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™è¢«è§¦å‘--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--servletçš„æ˜ å°„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é€šè¿‡localhost:8080/web/demo01å°±ä¼šè¢«è®¿é—®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://beihaibei.eu.org/img/JSP/jsp9.webp" alt="image-20230519221349866"></p><h3 id="3-1-2-destroy"><a href="#3-1-2-destroy" class="headerlink" title="3.1.2 destroy"></a>3.1.2 destroy</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å½“æœåŠ¡å™¨æ­£å¸¸å…³é—­æ—¶,è§¦å‘</span><br></pre></td></tr></table></figure><h2 id="4-Servletæ³¨è§£"><a href="#4-Servletæ³¨è§£" class="headerlink" title="4. Servletæ³¨è§£"></a>4. Servletæ³¨è§£</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ¯æ¬¡åŠ å…¥ä¸€ä¸ªjavaçš„Servletéƒ½è¦åœ¨web.xmlä¸­å†™å…¥ä¸€äº›ä¸œè¥¿ï¼Œè¿™æ˜¯å°±å¯ä»¥ç”¨æ³¨é‡Šæ¥ç®€åŒ–</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå°±ç”¨@WebServletæ³¨è§£æ¥ç®€åŒ–æ˜ å°„çš„é“¾æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo1/haha&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo1</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçœ‹ä¸€ä¸‹WebServletçš„åº•å±‚æºç å°±å¯ä»¥çŸ¥é“valueçš„å…ƒç´ å¯ä»¥ç›´æ¥ç®€åŒ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> WebServlet &#123;</span><br><span class="line">    String <span class="title function_">name</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String[] value() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    String[] urlPatterns() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">loadOnStartup</span><span class="params">()</span> <span class="keyword">default</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    WebInitParam[] initParams() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">asyncSupported</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">smallIcon</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">largeIcon</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">description</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">displayName</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœä¸ºæ˜ å°„å¤šä¸ªåœ°å€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo1&quot;,&quot;/hehe&quot;)</span></span><br></pre></td></tr></table></figure><p>éšä¾¿æ˜ å°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/*&quot;)</span></span><br><span class="line"><span class="comment">//ä¸ç®¡localhost:8080/web2/åé¢å¸¦çš„ä»€ä¹ˆéƒ½ä¼šæ˜ å°„å‡ºæ¥</span></span><br></pre></td></tr></table></figure><p>é™åˆ¶æ€§æ˜ å°„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;*.do&quot;)</span></span><br><span class="line"><span class="comment">//ä¸ç®¡å‰é¢å†™çš„ä»€ä¹ˆåé¢å¿…é¡»æ˜¯.do</span></span><br></pre></td></tr></table></figure><h2 id="5-Servletç»§æ‰¿ä½“ç³»"><a href="#5-Servletç»§æ‰¿ä½“ç³»" class="headerlink" title="5.Servletç»§æ‰¿ä½“ç³»"></a>5.Servletç»§æ‰¿ä½“ç³»</h2><p><img src="https://beihaibei.eu.org/img/JSP/jsp10.webp" alt=""></p><p>è¿™é‡Œå°±ä¸éœ€è¦å®ç°Servletçš„æ¥å£æ–¹æ³•ï¼Œè€Œåªéœ€è¦ç»§æ‰¿æŠ½è±¡ç±»</p><ol><li><p>GenericServletæŠ½è±¡ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tutu.web.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.GenericServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo2</span> <span class="keyword">extends</span> <span class="title class_">GenericServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Demo2çš„serviceè¢«è§¦å‘&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><ol><li><p>HttpServletæŠ½è±¡ç±»</p><p>è¿™é‡Œå¦‚æœæƒ³è¦å®ç°æŠ½è±¡ç±»éœ€è¦åœ¨è¡¨å•ä¸­è¿›è¡Œæäº¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tutu.web.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/demo3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯postè¯·æ±‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘æ˜¯getè¯·æ±‚&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>login.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»å½•çª—å£<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/web2/demo3&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h2 id="6-ä½¿ç”¨"><a href="#6-ä½¿ç”¨" class="headerlink" title="6.ä½¿ç”¨"></a>6.ä½¿ç”¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å°†jspé¡µé¢å˜æˆäº†ä»£ç </span><br></pre></td></tr></table></figure><p>åœ¨jspé¡µé¢ä¸­</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">action=<span class="string">&quot;&lt;%= requests.getContextPath()%&gt;/login&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>åœ¨servletä¸­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/login&quot;)</span></span><br></pre></td></tr></table></figure><h1 id="çƒ­éƒ¨ç½²"><a href="#çƒ­éƒ¨ç½²" class="headerlink" title="çƒ­éƒ¨ç½²"></a>çƒ­éƒ¨ç½²</h1><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><ol><li>æˆ‘å…ˆæ–°å»ºäº†ä¸€ä¸ªlogin.htmlçš„æ–‡ä»¶ä¸ºç™»å½•é¡µé¢</li><li>å¼€å¯classes and resources</li></ol><p><img src="https://beihaibei.eu.org/img/JSP/jsp11.webp" alt="image-20230519230212086"></p><ol><li><p>è¿™æ ·å°±èƒ½åŒæ­¥æ›´æ–°ï¼Œä¸éœ€è¦é‡æ–°å¼€å¯æœåŠ¡å™¨ï¼Œç±»ä¼¼äºvscodeçš„ä¸€ä¸ªæ’ä»¶Live Server</p></li><li><p>æ³¨æ„ä¸€ç‚¹å¦‚æœjavaçš„Servletä¹Ÿéœ€è¦å®æ—¶æ›´æ–°é‚£ä¹ˆéœ€è¦Debugæ–¹å¼å¼€å¯ï¼Œè€Œä¸æ˜¯Run</p></li></ol><h1 id="HTTPæ•°æ®ä¼ è¾“"><a href="#HTTPæ•°æ®ä¼ è¾“" class="headerlink" title="HTTPæ•°æ®ä¼ è¾“"></a>HTTPæ•°æ®ä¼ è¾“</h1><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521145234136.png" alt="image-20230521145234136"></p><h2 id="1-è¯·æ±‚æ•°æ®æ ¼å¼"><a href="#1-è¯·æ±‚æ•°æ®æ ¼å¼" class="headerlink" title="1.è¯·æ±‚æ•°æ®æ ¼å¼"></a>1.è¯·æ±‚æ•°æ®æ ¼å¼</h2><h3 id="1-1-è¯·æ±‚è¡Œ"><a href="#1-1-è¯·æ±‚è¡Œ" class="headerlink" title="1.1.è¯·æ±‚è¡Œ"></a>1.1.è¯·æ±‚è¡Œ</h3><h4 id="1-1-1-Getè¯·æ±‚"><a href="#1-1-1-Getè¯·æ±‚" class="headerlink" title="1.1.1 Getè¯·æ±‚"></a>1.1.1 Getè¯·æ±‚</h4><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230520184157667.png" alt="image-20230520184157667"></p><h4 id="1-1-2-Postè¯·æ±‚"><a href="#1-1-2-Postè¯·æ±‚" class="headerlink" title="1.1.2 Postè¯·æ±‚"></a>1.1.2 Postè¯·æ±‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¡¨å•æäº¤</span><br><span class="line">&lt;form action=<span class="string">&quot;/LoginServlet&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;æäº¤&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230520184524979.png" alt="image-20230520184524979"></p><h3 id="1-2-è¯·æ±‚å¤´"><a href="#1-2-è¯·æ±‚å¤´" class="headerlink" title="1.2 è¯·æ±‚å¤´"></a>1.2 è¯·æ±‚å¤´</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230520184839729.png" alt="image-20230520184839729"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œæœ‰ä¸ªreferï¼šæ„æ€å°±æ˜¯æˆ‘åœ¨localhost/login.htmlä¸­æ”¾ç½®äº†ä¸€ä¸ªè¶…é“¾æ¥è½¬åˆ°æ·˜å®ï¼Œé‚£ä¹ˆæ·˜å®çš„referå¤„å°±ä¼šæ˜¾ç¤ºæˆ‘ä»¬çš„åœ°å€</span><br></pre></td></tr></table></figure><h2 id="2-Requestså¯¹è±¡"><a href="#2-Requestså¯¹è±¡" class="headerlink" title="2.Requestså¯¹è±¡"></a>2.Requestså¯¹è±¡</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230520190930557.png" alt="image-20230520190930557"></p><h3 id="2-1-è·å–è¯·æ±‚è¡Œæ•°æ®"><a href="#2-1-è·å–è¯·æ±‚è¡Œæ•°æ®" class="headerlink" title="2.1 è·å–è¯·æ±‚è¡Œæ•°æ®"></a>2.1 è·å–è¯·æ±‚è¡Œæ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tutu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(name = &quot;LoginServlet&quot;, value = &quot;/LoginServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doPost(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·æ±‚æ–¹å¼:&quot;</span> + method);</span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">        System.out.println(<span class="string">&quot;è™šæ‹Ÿè·¯å¾„:&quot;</span> + contextPath);</span><br><span class="line">        <span class="type">String</span> <span class="variable">servletPath</span> <span class="operator">=</span> request.getServletPath();</span><br><span class="line">        System.out.println(<span class="string">&quot;èµ„æºè·¯å¾„:&quot;</span> + servletPath);</span><br><span class="line">        <span class="type">String</span> <span class="variable">queryString</span> <span class="operator">=</span> request.getQueryString();</span><br><span class="line">        System.out.println(<span class="string">&quot;getå‚æ•°:&quot;</span> + servletPath);</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        System.out.println(<span class="string">&quot;è™šæ‹Ÿè·¯å¾„ + èµ„æºè·¯å¾„:&quot;</span> + requestURI);</span><br><span class="line">        <span class="type">String</span> <span class="variable">protocol</span> <span class="operator">=</span> request.getProtocol();</span><br><span class="line">        System.out.println(<span class="string">&quot;HTTPç‰ˆæœ¬:&quot;</span> + protocol);</span><br><span class="line">        <span class="type">String</span> <span class="variable">remoteAddr</span> <span class="operator">=</span> request.getRemoteAddr();</span><br><span class="line">        System.out.println(<span class="string">&quot;IPåœ°å€&quot;</span> + remoteAddr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-è·å–è¯·æ±‚å¤´æ•°æ®"><a href="#2-2-è·å–è¯·æ±‚å¤´æ•°æ®" class="headerlink" title="2.2 è·å–è¯·æ±‚å¤´æ•°æ®"></a>2.2 è·å–è¯·æ±‚å¤´æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">   <span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">agent</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;user-agent&quot;</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot;è·å–user-agent&quot;</span> + agent);</span><br><span class="line">       Enumeration&lt;String&gt; headerNames = request.getHeaderNames();</span><br><span class="line">       <span class="keyword">while</span> (headerNames.hasMoreElements()) &#123;</span><br><span class="line">           <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> headerNames.nextElement();</span><br><span class="line">           <span class="type">String</span> <span class="variable">header</span> <span class="operator">=</span> request.getHeader(name);</span><br><span class="line">           System.out.println(name + <span class="string">&quot;:&quot;</span> + header);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-è·å–è¯·æ±‚ä½“æ•°æ®"><a href="#2-3-è·å–è¯·æ±‚ä½“æ•°æ®" class="headerlink" title="2.3 è·å–è¯·æ±‚ä½“æ•°æ®"></a>2.3 è·å–è¯·æ±‚ä½“æ•°æ®</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> request.getReader();</span><br><span class="line">    <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">while</span> ((line = br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">        System.out.println(line);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//username=1604252677%40qq.com&amp;password=cascac</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-è·å–è¾“å…¥å‚æ•°å€¼"><a href="#2-4-è·å–è¾“å…¥å‚æ•°å€¼" class="headerlink" title="2.4 è·å–è¾“å…¥å‚æ•°å€¼"></a>2.4 è·å–è¾“å…¥å‚æ•°å€¼</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;username&quot;</span> + username + <span class="string">&#x27;\t&#x27;</span> + <span class="string">&quot;password&quot;</span> + password);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//username1604252677@qq.compasswordluiluilui</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        Map&lt;String, String[]&gt; map = request.getParameterMap();</span><br><span class="line">        Set&lt;String&gt; keySet = map.keySet();</span><br><span class="line">        <span class="keyword">for</span> (String name : keySet) &#123;</span><br><span class="line">            String[] values = map.get(name);</span><br><span class="line">            System.out.println(<span class="string">&quot;name&quot;</span>+name+<span class="string">&quot; values:&quot;</span>+ Arrays.toString(values));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">nameusername values:[1604252677@qq.com]</span></span><br><span class="line"><span class="comment">namepassword values:[123456]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="3-Responseå¯¹è±¡"><a href="#3-Responseå¯¹è±¡" class="headerlink" title="3. Responseå¯¹è±¡"></a>3. Responseå¯¹è±¡</h2><h4 id="3-1-ä¸­æ–‡ä¹±ç "><a href="#3-1-ä¸­æ–‡ä¹±ç " class="headerlink" title="3.1.ä¸­æ–‡ä¹±ç "></a>3.1.ä¸­æ–‡ä¹±ç </h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="3-2-é‡å®šå‘"><a href="#3-2-é‡å®šå‘" class="headerlink" title="3.2 é‡å®šå‘"></a>3.2 é‡å®šå‘</h4><h5 id="3-2-1-ç™»å½•ç•Œé¢"><a href="#3-2-1-ç™»å½•ç•Œé¢" class="headerlink" title="3.2.1 ç™»å½•ç•Œé¢"></a>3.2.1 ç™»å½•ç•Œé¢</h5><p>login.jsp</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;info.jsp&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>  <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sub&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-2-2-é‡å®šå‘ä»£ç åŒºâ€”-gt-åå°å¯†ç éªŒè¯ä¸­è½¬ç«™"><a href="#3-2-2-é‡å®šå‘ä»£ç åŒºâ€”-gt-åå°å¯†ç éªŒè¯ä¸­è½¬ç«™" class="headerlink" title="3.2.2 é‡å®šå‘ä»£ç åŒºâ€”-&gt;åå°å¯†ç éªŒè¯ä¸­è½¬ç«™"></a>3.2.2 é‡å®šå‘ä»£ç åŒºâ€”-&gt;åå°å¯†ç éªŒè¯ä¸­è½¬ç«™</h5><p>do_login.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">    out.print(method);</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">    out.print(username);</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">    out.print(pwd);</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">&quot;beihai&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;beihai&quot;</span>.equals(pwd)) &#123;</span><br><span class="line">        response.sendRedirect(<span class="string">&quot;welcome.jsp&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        response.sendRedirect(<span class="string">&quot;input.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="3-2-3-æˆåŠŸç™»å½•ç•Œé¢"><a href="#3-2-3-æˆåŠŸç™»å½•ç•Œé¢" class="headerlink" title="3.2.3 æˆåŠŸç™»å½•ç•Œé¢"></a>3.2.3 æˆåŠŸç™»å½•ç•Œé¢</h5><p>welcome.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;æ¬¢è¿è¿›å…¥åå°&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-3-è½¬å‘"><a href="#3-3-è½¬å‘" class="headerlink" title="3.3 è½¬å‘"></a>3.3 è½¬å‘</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è§£å†³é‡å®šå‘å¯¼è‡´çš„requestsä¸¢å¤±</span><br></pre></td></tr></table></figure><p>åœ¨é‡å®šå‘ä»£ç æ”¹ç‰ˆä¸€ä¸‹</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">    out.print(method);</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">    out.print(username);</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">    out.print(pwd);</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">&quot;beihai&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;beihai&quot;</span>.equals(pwd)) &#123;</span><br><span class="line">        <span class="comment">// ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;welcome.jsp&quot;</span>).forward(request,response);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        response.sendRedirect(<span class="string">&quot;input.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-Session"><a href="#4-Session" class="headerlink" title="4. Session"></a>4. Session</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç»˜ç”»æœŸé—´ï¼Œæ¢ä¸€ä¸ªæµè§ˆå™¨å°±ä¸å¯ä»¥äº†</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521142403387.png" alt="image-20230521142403387"></p><h3 id="1-ç¤ºä¾‹"><a href="#1-ç¤ºä¾‹" class="headerlink" title="1. ç¤ºä¾‹"></a>1. ç¤ºä¾‹</h3><p>session.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    session.setAttribute(<span class="string">&quot;userName&quot;</span>,<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> session.getId();</span><br><span class="line">    <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">    out.print(<span class="string">&quot;sessionId:&quot;</span> + id + <span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">    out.print(<span class="string">&quot;userName:&quot;</span> + userName + <span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;session2.jsp&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;POSTæäº¤&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p>session2.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> session.getId();</span><br><span class="line">    <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">    out.print(<span class="string">&quot;sessionId:&quot;</span> + id + <span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">    out.print(<span class="string">&quot;userName:&quot;</span> + userName + <span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;session3.jsp&quot;</span>&gt;è·³è½¬åˆ°sessioné¡µé¢&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p>session3.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> session.getId();</span><br><span class="line">    <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">    out.print(<span class="string">&quot;sessionId:&quot;</span> + id + <span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">    out.print(<span class="string">&quot;userName:&quot;</span> + userName + <span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="2-Sessioné‡æ„ç™»å½•æ¡ˆä¾‹"><a href="#2-Sessioné‡æ„ç™»å½•æ¡ˆä¾‹" class="headerlink" title="2. Sessioné‡æ„ç™»å½•æ¡ˆä¾‹"></a>2. Sessioné‡æ„ç™»å½•æ¡ˆä¾‹</h3><p>login.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span> action=<span class="string">&quot;do_login.jsp&quot;</span>&gt;</span><br><span class="line">  &lt;table border=<span class="string">&quot;0&quot;</span> align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">      &lt;td&gt;ç”¨æˆ·åï¼š&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userName&quot;</span>&gt;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">      &lt;td colspan=<span class="string">&quot;2&quot;</span> align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;password&quot;</span>  name=<span class="string">&quot;pwd&quot;</span>&gt;</span><br><span class="line">      &lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">      &lt;td align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> name=<span class="string">&quot;sub&quot;</span>&gt;</span><br><span class="line">      &lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">  &lt;/table&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>do_login.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">    out.print(method);</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">    out.print(username);</span><br><span class="line">    <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">    out.print(pwd);</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">&quot;beihai&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;beihai&quot;</span>.equals(pwd)) &#123;</span><br><span class="line">        session.setAttribute(<span class="string">&quot;userName&quot;</span>,<span class="string">&quot;beihai&quot;</span>);</span><br><span class="line">        response.sendRedirect(<span class="string">&quot;welcome.jsp&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        response.sendRedirect(<span class="string">&quot;input.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>welcome.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;&lt;%=userName%&gt;æ¬¢è¿è¿›å…¥åå°&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-Sessionå¯¹è±¡è¶…æ—¶å¤±æ•ˆè®¾ç½®"><a href="#3-Sessionå¯¹è±¡è¶…æ—¶å¤±æ•ˆè®¾ç½®" class="headerlink" title="3. Sessionå¯¹è±¡è¶…æ—¶å¤±æ•ˆè®¾ç½®"></a>3. Sessionå¯¹è±¡è¶…æ—¶å¤±æ•ˆè®¾ç½®</h3><h4 id="3-1-ä¼˜å…ˆçº§æœ€é«˜"><a href="#3-1-ä¼˜å…ˆçº§æœ€é«˜" class="headerlink" title="3.1 ä¼˜å…ˆçº§æœ€é«˜"></a>3.1 ä¼˜å…ˆçº§æœ€é«˜</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å•ä½æ˜¯ç§’ï¼Œä¾‹å¦‚:60ç§’</span></span><br><span class="line">session.setMaxInactiveInterval(<span class="number">60</span>);</span><br></pre></td></tr></table></figure><h4 id="3-2-åœ¨WEB-INFä¸‹web-xmlæ–‡ä»¶é…ç½®"><a href="#3-2-åœ¨WEB-INFä¸‹web-xmlæ–‡ä»¶é…ç½®" class="headerlink" title="3.2 åœ¨WEB-INFä¸‹web.xmlæ–‡ä»¶é…ç½®"></a>3.2 åœ¨WEB-INFä¸‹web.xmlæ–‡ä»¶é…ç½®</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å•ä½åˆ†é’Ÿï¼Œä¾‹å¦‚:10åˆ†é’Ÿ</span><br><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>10<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-3-Tomcatç›®å½•ä¸‹-conf-web-xml"><a href="#3-3-Tomcatç›®å½•ä¸‹-conf-web-xml" class="headerlink" title="3.3 Tomcatç›®å½•ä¸‹/conf/web.xml"></a>3.3 Tomcatç›®å½•ä¸‹/conf/web.xml</h4><p>é»˜è®¤30åˆ†é’Ÿ</p><h3 id="4-applicationå¯¹è±¡"><a href="#4-applicationå¯¹è±¡" class="headerlink" title="4. applicationå¯¹è±¡"></a>4. applicationå¯¹è±¡</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521144454883.png" alt="image-20230521144454883"></p><p>å°±æ˜¯è¯´æˆ‘æœ‰ä¸€ä¸ªæŒä¹…æ€§çš„çª—å£ï¼Œä½ è®¿é—®æˆ‘æµè§ˆå™¨å¤šå°‘æ¬¡ä¼šæœ‰è®°å½•ï¼Œæ¢ä¸ªæµè§ˆå™¨ï¼Œä¼šåœ¨ä¹‹å‰çš„æµè§ˆå™¨ä¸Šé¢ç»§ç»­ç´¯åŠ ï¼Œè€Œä¸åƒSessionå¯¹è±¡é‚£æ ·ç»˜ç”»çŸ­</p><p>ç®€å•è¯´å°±æ˜¯ï¼šåœ¨ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨èŒƒå›´å†…æœ‰æ•ˆ</p><h1 id="ä½œç”¨åŸŸä¸Cookie"><a href="#ä½œç”¨åŸŸä¸Cookie" class="headerlink" title="ä½œç”¨åŸŸä¸Cookie"></a>ä½œç”¨åŸŸä¸Cookie</h1><h2 id="1-å„å¯¹è±¡ä½œç”¨åŸŸèŒƒå›´"><a href="#1-å„å¯¹è±¡ä½œç”¨åŸŸèŒƒå›´" class="headerlink" title="1. å„å¯¹è±¡ä½œç”¨åŸŸèŒƒå›´"></a>1. å„å¯¹è±¡ä½œç”¨åŸŸèŒƒå›´</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521145552646.png" alt="image-20230521145552646"></p><h2 id="2-Cookieä»‹ç»"><a href="#2-Cookieä»‹ç»" class="headerlink" title="2. Cookieä»‹ç»"></a>2. Cookieä»‹ç»</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521151512887.png" alt="image-20230521151512887"></p><h2 id="3-Cookieå¯¹è±¡çš„åˆ›å»ºä¸è·å–"><a href="#3-Cookieå¯¹è±¡çš„åˆ›å»ºä¸è·å–" class="headerlink" title="3. Cookieå¯¹è±¡çš„åˆ›å»ºä¸è·å–"></a>3. Cookieå¯¹è±¡çš„åˆ›å»ºä¸è·å–</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521151854496.png" alt="image-20230521151854496"></p><p>addCookie.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;userName&quot;</span>, <span class="string">&quot;jack&quot;</span>);</span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    response.addCookie(cookie1);</span><br><span class="line">    response.addCookie(cookie2);</span><br><span class="line">    response.sendRedirect(<span class="string">&quot;getCookie.jsp&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>getCookie.jsp</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    Cookie[] cookies = request.getCookies();</span><br><span class="line">    <span class="keyword">if</span>(cookies != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;password&quot;</span>.equals(cookie.getName()))&#123;</span><br><span class="line">                cookie.setValue(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            out.print(cookie.getName()+<span class="string">&quot;:&quot;</span>+cookie.getValue()+<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-Cookieæœ‰æ•ˆæœŸè®¾ç½®"><a href="#4-Cookieæœ‰æ•ˆæœŸè®¾ç½®" class="headerlink" title="4. Cookieæœ‰æ•ˆæœŸè®¾ç½®"></a>4. Cookieæœ‰æ•ˆæœŸè®¾ç½®</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521153122344.png" alt="image-20230521153122344"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ—¶é—´ä¸ºç§’</span><br><span class="line">cookie1.setMaxAge(60);</span><br></pre></td></tr></table></figure><h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><h2 id="1-å…¥é—¨æ¡ˆä¾‹"><a href="#1-å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="1. å…¥é—¨æ¡ˆä¾‹"></a>1. å…¥é—¨æ¡ˆä¾‹</h2><h3 id="1-1-ä¿®æ”¹å¯†ç "><a href="#1-1-ä¿®æ”¹å¯†ç " class="headerlink" title="1.1 ä¿®æ”¹å¯†ç "></a>1.1 ä¿®æ”¹å¯†ç </h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521203833777.png" alt="image-20230521203833777"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="comment">//å¼‚å¸¸å¤„ç†---&gt;ç›´æ¥æŠ›å‡º</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//2.è·å–æ•°æ®åº“è¿æ¥å¯¹è±¡ Connection.</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/edudb&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">//3.å®šä¹‰sql</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update user set password = &#x27;123456&#x27; where id = 3&quot;</span>;</span><br><span class="line">        <span class="comment">//4.è·å–æ‰§è¡Œsqlè¯­å¥çš„å¯¹è±¡ Statment</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">        <span class="comment">//5.æ‰§è¡Œsqlï¼Œæ¥æ”¶è¿”å›ç»“æœï¼Œè¾“å‡ºç»“æœï¼ˆæ•°æ®åº“å½±å“çš„è¡Œæ•°ï¼‰</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> statement.executeUpdate(sql);</span><br><span class="line">        <span class="comment">//6.é‡Šæ”¾èµ„æº</span></span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testupdate</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDao</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> userDao.update();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ•°æ®åº“å—å½±å“çš„è¡Œæ•°ï¼š&quot;</span> + num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="1-2-æ–°å¢ç”¨æˆ·"><a href="#1-2-æ–°å¢ç”¨æˆ·" class="headerlink" title="1.2 æ–°å¢ç”¨æˆ·"></a>1.2 æ–°å¢ç”¨æˆ·</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521211911350.png" alt="image-20230521211911350"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insert</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/edudb&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into user(userName,password,email,userType) values (&#x27;jack&#x27;,&#x27;123456&#x27;,&#x27;jack@163.com&#x27;,1)&quot;</span>;</span><br><span class="line">    <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> statement.executeUpdate(sql);</span><br><span class="line">    statement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-3-æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"><a href="#1-3-æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="1.3 æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯"></a>1.3 æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521212946560.png" alt="image-20230521212946560"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUserList</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/edudb&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user&quot;</span>;</span><br><span class="line">    <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> statement.executeQuery(sql);</span><br><span class="line">    <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">userType</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;userType&quot;</span>);</span><br><span class="line">        System.out.println(id+<span class="string">&quot; &quot;</span>+password+<span class="string">&quot; &quot;</span>+email+<span class="string">&quot; &quot;</span>+userType);</span><br><span class="line">    &#125;</span><br><span class="line">    statement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-4-ç™»å½•"><a href="#1-4-ç™»å½•" class="headerlink" title="1.4 ç™»å½•"></a>1.4 ç™»å½•</h3><p>userdao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String paramUserName,String paramPwd)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/edudb&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where userName = &#x27;&quot;</span>+paramUserName+<span class="string">&quot;&#x27;and password = &#x27;&quot;</span>+paramPwd+<span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">    <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> statement.executeQuery(sql);</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">userType</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;userType&quot;</span>);</span><br><span class="line">        user = <span class="keyword">new</span> <span class="title class_">User</span>(id,userName,password,email,userType);</span><br><span class="line">    &#125;</span><br><span class="line">    statement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>usertest</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testLogin</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.login(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (user !=<span class="literal">null</span>)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™»å½•æˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç™»å½•å¤±è´¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-JDBCå¯¹è±¡"><a href="#2-JDBCå¯¹è±¡" class="headerlink" title="2. JDBCå¯¹è±¡"></a>2. JDBCå¯¹è±¡</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230521214441483.png" alt="image-20230521214441483"></p><h2 id="3-JavaBeanæ•°æ®å°è£…"><a href="#3-JavaBeanæ•°æ®å°è£…" class="headerlink" title="3. JavaBeanæ•°æ®å°è£…"></a>3. JavaBeanæ•°æ®å°è£…</h2><ol><li>Userç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> userType;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserName</span><span class="params">(String userName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getEmail</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setEmail</span><span class="params">(String email)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUserType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserType</span><span class="params">(<span class="type">int</span> userType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userType = userType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String userName, String password, String email, <span class="type">int</span> userType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userName = userName;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">        <span class="built_in">this</span>.userType = userType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, String userName, String password, String email, <span class="type">int</span> userType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.userName = userName;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">        <span class="built_in">this</span>.userType = userType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, userName=&#x27;&quot;</span> + userName + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, email=&#x27;&quot;</span> + email + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, userType=&quot;</span> + userType +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li>UserDao</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/edudb&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user&quot;</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> statement.executeQuery(sql);</span><br><span class="line">        <span class="comment">//å®ä¾‹åŒ–ç”¨æˆ·é›†åˆ</span></span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">userType</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;userType&quot;</span>);</span><br><span class="line"><span class="comment">//            System.out.println(id+&quot; &quot;+password+&quot; &quot;+email+&quot; &quot;+userType);</span></span><br><span class="line">            user = <span class="keyword">new</span> <span class="title class_">User</span>(id,userName,password,email,userType);</span><br><span class="line">            userList.add(user);</span><br><span class="line">        &#125;</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ol><li>UserTest</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testquery</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    List&lt;User&gt; userList = userDao.getUserList();</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-SQLæ³¨å…¥"><a href="#4-SQLæ³¨å…¥" class="headerlink" title="4. SQLæ³¨å…¥"></a>4. SQLæ³¨å…¥</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230522082007209.png" alt="image-20230522082007209"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where userName = &#x27;&quot;</span>+paramUserName+<span class="string">&quot;&#x27;and password = &#x27;&quot;</span>+paramPwd+<span class="string">&quot;&#x27; or &#x27;1&#x27; = &#x27;1&#x27;&quot;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userDao.login(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;admin&#x27; or &#x27;1&#x27; = &#x27;1&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="5-é˜²æ­¢SQLæ³¨å…¥"><a href="#5-é˜²æ­¢SQLæ³¨å…¥" class="headerlink" title="5. é˜²æ­¢SQLæ³¨å…¥"></a>5. é˜²æ­¢SQLæ³¨å…¥</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230522082621741.png" alt="image-20230522082621741"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String paramUserName,String paramPwd)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/edudb&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where userName = ? and password = ?&quot;</span>;</span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(sql);</span><br><span class="line">    preparedStatement.setString(<span class="number">1</span>,paramUserName);</span><br><span class="line">    preparedStatement.setString(<span class="number">2</span>,paramPwd);</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> preparedStatement.executeQuery();</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">userType</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;userType&quot;</span>);</span><br><span class="line">        user = <span class="keyword">new</span> <span class="title class_">User</span>(id,userName,password,email,userType);</span><br><span class="line">    &#125;</span><br><span class="line">    preparedStatement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-1-æ’å…¥æ¡ˆä¾‹"><a href="#5-1-æ’å…¥æ¡ˆä¾‹" class="headerlink" title="5.1 æ’å…¥æ¡ˆä¾‹"></a>5.1 æ’å…¥æ¡ˆä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insert</span><span class="params">(User user)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">    <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/edudb&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into user(userName,password,email,userType) values (?,?,?,?)&quot;</span>;</span><br><span class="line">    <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(sql);</span><br><span class="line">    preparedStatement.setObject(<span class="number">1</span>,user.getUserName());</span><br><span class="line">    preparedStatement.setObject(<span class="number">2</span>,user.getPassword());</span><br><span class="line">    preparedStatement.setObject(<span class="number">3</span>,user.getEmail());</span><br><span class="line">    preparedStatement.setObject(<span class="number">4</span>,user.getUserType());</span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> preparedStatement.executeUpdate();</span><br><span class="line">    preparedStatement.close();</span><br><span class="line">    connection.close();</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testinsert</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;beihai&quot;</span>, <span class="string">&quot;woaini&quot;</span>, <span class="string">&quot;1604252677@qq.com&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> userDao.insert(user);</span><br><span class="line">    System.out.println(<span class="string">&quot;æ•°æ®åº“å—å½±å“çš„è¡Œæ•°ï¼š&quot;</span> + num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-DbUtilå·¥å…·ç±»"><a href="#6-DbUtilå·¥å…·ç±»" class="headerlink" title="6. DbUtilå·¥å…·ç±»"></a>6. DbUtilå·¥å…·ç±»</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230522085700967.png" alt="image-20230522085700967"></p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230522091003146.png" alt="image-20230522091003146"></p><p>æˆ‘ä¸‹é¢ä¸¾ä¾‹ä¸€ä¸ªä¸ç”¨Dbutilsä¸€ä¸ªç”¨å¯ä»¥çœ‹å‡ºæ¥Dbutilséå¸¸æ–¹ä¾¿</p><ol><li>å°è£…Dbutilså·¥å…·ç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DbUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/edudb&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//1.è·å–é“¾æ¥å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">            connection = DriverManager.getConnection(url, user, password);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.connection;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">closeAll</span><span class="params">(Connection connection, Statement statement,ResultSet resultSet)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (resultSet != <span class="literal">null</span>) &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (statement != <span class="literal">null</span>) &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sql,Object[] params)</span> &#123;</span><br><span class="line">        connection = getConnection();</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; params.length; i++) &#123;</span><br><span class="line">                preparedStatement.setObject(i+<span class="number">1</span>,params[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            num = preparedStatement.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        closeAll(connection,preparedStatement,<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update user set userName = ?,password = ?,email = ?,userType = ? where id = ?&quot;</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        Object[] params = &#123;user.getUserName(),user.getPassword(),user.getEmail(),user.getUserType(),user.getId()&#125;;</span><br><span class="line">        <span class="type">DbUtil</span> <span class="variable">dbUtil</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DbUtil</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> dbUtil.executeUpdate(sql,params);</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li>ä½¿ç”¨Dbutils</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.util.DbUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="type">DbUtil</span> <span class="variable">dbUtil</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DbUtil</span>();</span><br><span class="line">    <span class="comment">//å¼‚å¸¸å¤„ç†---&gt;ç›´æ¥æŠ›å‡º</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update user set password = ? where id = ?&quot;</span>;</span><br><span class="line">        Object[] params = &#123;user.getPassword(),user.getId()&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> dbUtil.executeUpdate(sql, params);</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insert</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into user(userName,password,email,userType) values (?,?,?,?)&quot;</span>;</span><br><span class="line">        Object[] params = &#123;user.getUserName(),user.getPassword(),user.getEmail(),user.getUserType()&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> dbUtil.executeUpdate(sql, params);</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dbUtil.getConnection();</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        List&lt;User&gt; userList = <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user&quot;</span>;</span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            rs = preparedStatement.executeQuery();</span><br><span class="line">            <span class="comment">//å®ä¾‹åŒ–ç”¨æˆ·é›†åˆ</span></span><br><span class="line">            userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">userType</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;userType&quot;</span>);</span><br><span class="line">                user = <span class="keyword">new</span> <span class="title class_">User</span>(id, userName, password, email, userType);</span><br><span class="line">                userList.add(user);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            dbUtil.closeAll(connection, preparedStatement, rs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> userList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String paramUserName,String paramPwd)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dbUtil.getConnection();</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where userName = ? and password = ?&quot;</span>;</span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>,paramUserName);</span><br><span class="line">            preparedStatement.setString(<span class="number">2</span>,paramPwd);</span><br><span class="line">            rs = preparedStatement.executeQuery();</span><br><span class="line">            user = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;email&quot;</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">userType</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;userType&quot;</span>);</span><br><span class="line">                user = <span class="keyword">new</span> <span class="title class_">User</span>(id,userName,password,email,userType);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">            throwables.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            dbUtil.closeAll(connection,preparedStatement,rs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="6-1-ä½¿ç”¨é…ç½®æ–‡ä»¶"><a href="#6-1-ä½¿ç”¨é…ç½®æ–‡ä»¶" class="headerlink" title="6.1 ä½¿ç”¨é…ç½®æ–‡ä»¶"></a>6.1 ä½¿ç”¨é…ç½®æ–‡ä»¶</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230522125419856.png" alt="image-20230522125419856"></p><h2 id="7-æ•°æ®åº“è¿æ¥æ± "><a href="#7-æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="7. æ•°æ®åº“è¿æ¥æ± "></a>7. æ•°æ®åº“è¿æ¥æ± </h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230522092414729.png" alt="image-20230522092414729"></p><h2 id="8-Daoæ¥å£ç¼–ç¨‹"><a href="#8-Daoæ¥å£ç¼–ç¨‹" class="headerlink" title="8. Daoæ¥å£ç¼–ç¨‹"></a>8. Daoæ¥å£ç¼–ç¨‹</h2><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230522092645385.png" alt="image-20230522092645385"></p><p>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itbbj.edu.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itbbj.edu.domain.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(User user)</span>;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br><span class="line">    User <span class="title function_">login</span><span class="params">(String paramUserName,String paramPwd)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ELè¡¨è¾¾å¼"><a href="#ELè¡¨è¾¾å¼" class="headerlink" title="ELè¡¨è¾¾å¼"></a>ELè¡¨è¾¾å¼</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“ç¼–ç¨‹ç¯‡</title>
      <link href="/2023/05/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%96%E7%A8%8B%E7%AF%87-1%E5%B0%8F%E6%97%B6%E6%90%9E%E5%AE%9A/"/>
      <url>/2023/05/19/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%96%E7%A8%8B%E7%AF%87-1%E5%B0%8F%E6%97%B6%E6%90%9E%E5%AE%9A/</url>
      
        <content type="html"><![CDATA[<h1 id="1-ç¼–ç¨‹åŸºç¡€"><a href="#1-ç¼–ç¨‹åŸºç¡€" class="headerlink" title="1 ç¼–ç¨‹åŸºç¡€"></a>1 ç¼–ç¨‹åŸºç¡€</h1><h2 id="1-1-ç”¨æˆ·å˜é‡"><a href="#1-1-ç”¨æˆ·å˜é‡" class="headerlink" title="1-1 ç”¨æˆ·å˜é‡"></a>1-1 ç”¨æˆ·å˜é‡</h2><p>SQLä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºç”¨æˆ·å˜é‡nameå¹¶èµ‹å€¼ä¸ºâ€œç‹æ—â€ã€‚</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@NAME</span><span class="operator">=</span><span class="string">&#x27;ç‹æ—&#x27;</span>;   </span><br><span class="line"></span><br><span class="line">#åˆ›å»ºç”¨æˆ·å˜é‡user1å¹¶èµ‹å€¼ä¸º<span class="number">1</span>ï¼Œuser2èµ‹å€¼ä¸º<span class="number">2</span>ï¼Œuser3èµ‹å€¼ä¸º<span class="number">3</span>ã€‚</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@user1</span><span class="operator">=</span><span class="number">1</span>, <span class="variable">@user2</span><span class="operator">=</span><span class="number">2</span>, <span class="variable">@user3</span><span class="operator">=</span><span class="number">3</span>; </span><br><span class="line">   </span><br><span class="line">#åˆ›å»ºç”¨æˆ·å˜é‡user4ï¼Œå®ƒçš„å€¼ä¸ºuser3çš„å€¼åŠ <span class="number">1</span>ã€‚</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@user4</span><span class="operator">=</span><span class="variable">@user3</span><span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">#åœ¨ä¸€ä¸ªç”¨æˆ·å˜é‡è¢«åˆ›å»ºåï¼Œå®ƒå¯ä»¥ä»¥ä¸€ç§ç‰¹æ®Šå½¢å¼çš„è¡¨è¾¾å¼ç”¨äºå…¶ä»–<span class="keyword">SQL</span>è¯­å¥ä¸­ã€‚å˜é‡åå‰é¢ä¹Ÿå¿…é¡»åŠ ä¸Šç¬¦å·@ã€‚</span><br><span class="line">#åˆ›å»ºå¹¶æŸ¥è¯¢ç”¨æˆ·å˜é‡nameçš„å€¼ã€‚</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@NAME</span><span class="operator">=</span><span class="string">&#x27;ç‹æ—&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@NAME</span>;</span><br><span class="line"></span><br><span class="line">#å˜é‡åº”ç”¨</span><br><span class="line">#æŸ¥è¯¢Bookè¡¨ä¸­å›¾ä¹¦ç¼–å·ä¸ºTP302<span class="operator">/</span><span class="number">057</span>çš„ä¹¦åï¼Œå¹¶å­˜å‚¨åœ¨å˜é‡b_nameä¸­ã€‚</span><br><span class="line"> <span class="keyword">SET</span> <span class="variable">@b</span>_name<span class="operator">=</span></span><br><span class="line">(<span class="keyword">SELECT</span> bookname <span class="keyword">FROM</span> book <span class="keyword">WHERE</span> bookcode <span class="operator">=</span> <span class="string">&#x27;TP302/057&#x27;</span>); </span><br><span class="line"></span><br><span class="line">#æŸ¥è¯¢Bookè¡¨ä¸­åå­—ç­‰äºä¸­b_nameå€¼çš„å›¾ä¹¦ä¿¡æ¯ã€‚</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Book  <span class="keyword">WHERE</span> bookname<span class="operator">=</span><span class="variable">@b</span>_name;</span><br></pre></td></tr></table></figure><h2 id="1-2-ç³»ç»Ÿå˜é‡"><a href="#1-2-ç³»ç»Ÿå˜é‡" class="headerlink" title="1-2 ç³»ç»Ÿå˜é‡"></a>1-2 ç³»ç»Ÿå˜é‡</h2><p>SQLå‚è€ƒ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># è·å¾—ç°åœ¨ä½¿ç”¨çš„MySQLç‰ˆæœ¬ã€‚</span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@VERSION</span> ;</span><br><span class="line"></span><br><span class="line">#è·å¾—ç³»ç»Ÿå½“å‰æ—¶é—´ã€‚</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIME</span>;</span><br><span class="line">     </span><br></pre></td></tr></table></figure><h1 id="2-å†…ç½®å‡½æ•°"><a href="#2-å†…ç½®å‡½æ•°" class="headerlink" title="2 å†…ç½®å‡½æ•°"></a>2 å†…ç½®å‡½æ•°</h1><h2 id="2-1-æ•°å­¦å‡½æ•°"><a href="#2-1-æ•°å­¦å‡½æ•°" class="headerlink" title="2-1 æ•°å­¦å‡½æ•°"></a>2-1 æ•°å­¦å‡½æ•°</h2><p>SQLå‚è€ƒ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#æ•°å­¦å‡½æ•°</span><br><span class="line">#æœ€å¤§å€¼ä¸æœ€å°å€¼å‡½æ•°</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@max</span>_num<span class="operator">=</span>GREATEST(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@max</span>_num;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@min</span>_num<span class="operator">=</span>LEAST(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@min</span>_num;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#éšæœºå‡½æ•°</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@num1</span> <span class="operator">=</span> RAND()<span class="operator">*</span><span class="number">100</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@num1</span> ;</span><br><span class="line"></span><br><span class="line">#åœ†å‘¨ç‡</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@num2</span> <span class="operator">=</span> PI();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@num2</span> ;</span><br><span class="line"></span><br><span class="line">#ç»å¯¹å€¼</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-1</span>) <span class="keyword">AS</span> NUM </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-2-å­—ç¬¦ä¸²å‡½æ•°"><a href="#2-2-å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="2-2 å­—ç¬¦ä¸²å‡½æ•°"></a>2-2 å­—ç¬¦ä¸²å‡½æ•°</h2><p>SQLä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#å­—ç¬¦ä¸²å‡½æ•°</span><br><span class="line">#å­—ç¬¦ä¸²æ‹¼æ¥</span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;ä¸­å›½&#x27;</span>,<span class="string">&#x27;å¿…èƒœ&#x27;</span>) <span class="keyword">AS</span> str </span><br><span class="line">#å­—ç¬¦ä¸²æˆªå–</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>) <span class="keyword">AS</span> str</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RIGHT</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>) <span class="keyword">AS</span> str</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>) <span class="keyword">AS</span> str</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">2</span>,<span class="number">2</span>) <span class="keyword">AS</span> str</span><br><span class="line">#æ¡ˆä¾‹</span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@STR</span><span class="operator">=</span><span class="string">&#x27;ABCDEFG&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="variable">@STR</span>,<span class="number">2</span>),<span class="keyword">RIGHT</span>(<span class="variable">@STR</span>,<span class="number">3</span>),<span class="built_in">SUBSTRING</span>(<span class="variable">@STR</span>,<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line">#å­—ç¬¦ä¸²æ ¼å¼åŒ–</span><br><span class="line"><span class="keyword">SELECT</span> FORMAT(RAND()<span class="operator">*</span><span class="number">100</span>,<span class="number">2</span>) <span class="keyword">AS</span> num</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-3-æ—¥æœŸå‡½æ•°"><a href="#2-3-æ—¥æœŸå‡½æ•°" class="headerlink" title="2-3 æ—¥æœŸå‡½æ•°"></a>2-3 æ—¥æœŸå‡½æ•°</h2><p>SQLä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#æ—¥æœŸå‡½æ•°</span><br><span class="line">#å½“å‰æ—¶é—´</span><br><span class="line"><span class="keyword">SELECT</span> NOW() <span class="keyword">AS</span> str </span><br><span class="line"></span><br><span class="line">#è·å–å½“å‰å¤©æ•°ï¼Œå°æ—¶ç­‰</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAY</span>(NOW()),DAYOFMONTH(NOW()),<span class="keyword">HOUR</span>(NOW())</span><br><span class="line"></span><br><span class="line">#æ—¶é—´ç›¸åŠ </span><br><span class="line"><span class="keyword">SELECT</span> ADDTIME(NOW(),<span class="string">&#x27;2:00:00&#x27;</span>) <span class="keyword">AS</span> str </span><br></pre></td></tr></table></figure><h1 id="3-å­˜å‚¨è¿‡ç¨‹"><a href="#3-å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="3 å­˜å‚¨è¿‡ç¨‹"></a>3 å­˜å‚¨è¿‡ç¨‹</h1><h2 id="3-1-ç®€å•å­˜å‚¨è¿‡ç¨‹"><a href="#3-1-ç®€å•å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="3-1 ç®€å•å­˜å‚¨è¿‡ç¨‹"></a>3-1 ç®€å•å­˜å‚¨è¿‡ç¨‹</h2><p>åˆ›å»ºå­˜å‚¨è¿‡ç¨‹</p><p>SQLä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#ç¼–å†™ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œå®ç°çš„åŠŸèƒ½æ˜¯åˆ é™¤ä¸€ä¸ªæŒ‡å®šç”¨æˆ·å§“åçš„ç”¨æˆ·ä¿¡æ¯ã€‚</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span>  sp_del_member(<span class="keyword">IN</span> xm  <span class="type">CHAR</span>(<span class="number">10</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DELETE</span> <span class="keyword">FROM</span> Members <span class="keyword">WHERE</span> å§“å<span class="operator">=</span>xm;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;  </span><br></pre></td></tr></table></figure><p>å…³äºç»“æŸç¬¦</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span>  sp_del_member(<span class="keyword">IN</span> xm  <span class="type">CHAR</span>(<span class="number">10</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DELETE</span> <span class="keyword">FROM</span> Members <span class="keyword">WHERE</span> å§“å<span class="operator">=</span>xm;</span><br><span class="line"><span class="keyword">END</span> </span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line">DELIMITER ;  </span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥çœ‹æ‰€æœ‰çš„å­˜å‚¨è¿‡ç¨‹çŠ¶æ€</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">PROCEDURE</span> STATUS</span><br><span class="line">#æŸ¥çœ‹æŸä¸ªå­˜å‚¨è¿‡ç¨‹çš„è¯¦ç»†ä¿¡æ¯</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_del_member</span><br></pre></td></tr></table></figure><p>è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#è°ƒç”¨sp_del_memberå­˜å‚¨è¿‡ç¨‹ï¼Œåˆ é™¤â€œæå¼ºâ€çš„ç”¨æˆ·ä¿¡æ¯ã€‚</span><br><span class="line"><span class="keyword">CALL</span> sp_del_member(<span class="string">&#x27;æå¼º&#x27;</span>);</span><br></pre></td></tr></table></figure><p>åˆ é™¤å­˜å‚¨è¿‡ç¨‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åˆ é™¤å­˜å‚¨è¿‡ç¨‹sp_del_member</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> sp_del_member;</span><br></pre></td></tr></table></figure><h2 id="3-2-å¤æ‚å­˜å‚¨è¿‡ç¨‹"><a href="#3-2-å¤æ‚å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="3-2 å¤æ‚å­˜å‚¨è¿‡ç¨‹"></a>3-2 å¤æ‚å­˜å‚¨è¿‡ç¨‹</h2><h3 id="3-2-1-å±€éƒ¨å˜é‡"><a href="#3-2-1-å±€éƒ¨å˜é‡" class="headerlink" title="3-2-1 å±€éƒ¨å˜é‡"></a>3-2-1 å±€éƒ¨å˜é‡</h3><p>SQLä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#å£°æ˜ä¸€ä¸ªæ•´å‹å˜é‡å’Œä¸¤ä¸ªå­—ç¬¦å˜é‡ã€‚</span><br><span class="line">#å±€éƒ¨å˜é‡åªèƒ½åœ¨<span class="keyword">BEGIN</span>â€¦<span class="keyword">END</span>è¯­å¥å—ä¸­å£°æ˜</span><br><span class="line"><span class="keyword">DECLARE</span> num <span class="type">INT</span>(<span class="number">4</span>);</span><br><span class="line"><span class="keyword">DECLARE</span> str1, str2 <span class="type">VARCHAR</span>(<span class="number">6</span>);</span><br><span class="line">#å±€éƒ¨å˜é‡èµ‹å€¼</span><br><span class="line"><span class="keyword">SET</span> num<span class="operator">=</span><span class="number">1</span>, str1<span class="operator">=</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#åœ¨å­˜å‚¨è¿‡ç¨‹ä½“ä¸­å°†Bookè¡¨ä¸­çš„ä¹¦åä¸ºâ€œè®¡ç®—æœºåº”ç”¨åŸºç¡€â€çš„ä½œè€…å§“åå’Œå‡ºç‰ˆç¤¾çš„å€¼</span><br><span class="line">#åˆ†åˆ«èµ‹ç»™å˜é‡nameå’Œpublish,å¹¶è¾“å‡ºå‡ºç‰ˆç¤¾å˜é‡å€¼</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_vtest (<span class="keyword">OUT</span> p <span class="type">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DECLARE</span> v_name,v_publish <span class="type">VARCHAR</span>(<span class="number">20</span>);</span><br><span class="line">    <span class="keyword">SELECT</span> author,publisher <span class="keyword">INTO</span> v_name, v_publish <span class="keyword">FROM</span> Book  <span class="keyword">WHERE</span> bookname<span class="operator">=</span> <span class="string">&#x27;è®¡ç®—æœºåº”ç”¨åŸºç¡€&#x27;</span>;    </span><br><span class="line">    <span class="keyword">SET</span> p <span class="operator">=</span> v_publish;</span><br><span class="line"><span class="keyword">END</span> </span><br><span class="line">$$</span><br><span class="line">DELIMITER ; </span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_vtest(<span class="variable">@p</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@p</span>;</span><br></pre></td></tr></table></figure><h3 id="3-2-2-è¯­å¥ç»“æ„"><a href="#3-2-2-è¯­å¥ç»“æ„" class="headerlink" title="3-2-2 è¯­å¥ç»“æ„"></a>3-2-2 è¯­å¥ç»“æ„</h3><h4 id="3-2-2-1-åˆ¤æ–­ç»“æ„èµæ"><a href="#3-2-2-1-åˆ¤æ–­ç»“æ„èµæ" class="headerlink" title="3-2-2-1 åˆ¤æ–­ç»“æ„èµæ"></a>3-2-2-1 åˆ¤æ–­ç»“æ„èµæ</h4><p>æ¡ˆä¾‹1-ä¸¤æ•°ç›¸æ¯”</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_compare</span><br><span class="line">(<span class="keyword">IN</span> K1 <span class="type">INTEGER</span>, <span class="keyword">IN</span> K2 <span class="type">INTEGER</span>, <span class="keyword">OUT</span> K3 <span class="type">CHAR</span>(<span class="number">6</span>) )</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">IF K1<span class="operator">&gt;</span>K2 <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">SET</span> K3<span class="operator">=</span> <span class="string">&#x27;å¤§äº&#x27;</span>;</span><br><span class="line">ELSEIF K1<span class="operator">=</span>K2 <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">SET</span> K3<span class="operator">=</span> <span class="string">&#x27;ç­‰äº&#x27;</span>;</span><br><span class="line"><span class="keyword">ELSE</span> </span><br><span class="line"><span class="keyword">SET</span> K3<span class="operator">=</span> <span class="string">&#x27;å°äº&#x27;</span>;</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_compare(<span class="number">3</span>, <span class="number">6</span>, <span class="variable">@K</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@K</span>;</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹2-</p><p>å½¢æ€1</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_updown1(<span class="keyword">IN</span> str <span class="type">VARCHAR</span>(<span class="number">1</span>), <span class="keyword">OUT</span> direct <span class="type">VARCHAR</span>(<span class="number">4</span>) )</span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">     <span class="keyword">CASE</span> str</span><br><span class="line"> <span class="keyword">WHEN</span> <span class="string">&#x27;U&#x27;</span> <span class="keyword">THEN</span> <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸Šå‡&#x27;</span>;</span><br><span class="line"> <span class="keyword">WHEN</span> <span class="string">&#x27;D&#x27;</span> <span class="keyword">THEN</span> <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸‹é™&#x27;</span>;</span><br><span class="line"> <span class="keyword">ELSE</span>  <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸å˜&#x27;</span>;</span><br><span class="line">     <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER; </span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_updown1(<span class="string">&#x27;s&#x27;</span>,<span class="variable">@d</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@d</span>;</span><br></pre></td></tr></table></figure><p>å½¢æ€2</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_updown2(<span class="keyword">IN</span> str <span class="type">VARCHAR</span>(<span class="number">1</span>), <span class="keyword">OUT</span> direct <span class="type">VARCHAR</span>(<span class="number">4</span>) )</span><br><span class="line">   <span class="keyword">BEGIN</span></span><br><span class="line">     <span class="keyword">CASE</span> </span><br><span class="line"> <span class="keyword">WHEN</span> str <span class="operator">=</span> <span class="string">&#x27;U&#x27;</span> <span class="keyword">THEN</span> <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸Šå‡&#x27;</span>;</span><br><span class="line"> <span class="keyword">WHEN</span> str <span class="operator">=</span> <span class="string">&#x27;D&#x27;</span> <span class="keyword">THEN</span> <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸‹é™&#x27;</span>;</span><br><span class="line"> <span class="keyword">ELSE</span>  <span class="keyword">SET</span> direct <span class="operator">=</span><span class="string">&#x27;ä¸å˜&#x27;</span>;</span><br><span class="line">     <span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line">   <span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER; </span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_updown2(<span class="string">&#x27;s&#x27;</span>,<span class="variable">@d</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@d</span>;</span><br></pre></td></tr></table></figure><h4 id="3-2-2-2-å¾ªç¯ç»“æ„"><a href="#3-2-2-2-å¾ªç¯ç»“æ„" class="headerlink" title="3-2-2-2 å¾ªç¯ç»“æ„"></a>3-2-2-2 å¾ªç¯ç»“æ„</h4><p>æ¡ˆä¾‹1-  WHILE â€¦DO</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#WHILE ...DOå¾ªç¯ç»“æ„</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_while()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> v1 <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">5</span>;</span><br><span class="line">   WHILE  v1 <span class="operator">&gt;</span> <span class="number">0</span>  DO</span><br><span class="line">         <span class="keyword">SET</span> v1 <span class="operator">=</span> v1<span class="number">-1</span>;</span><br><span class="line">         <span class="keyword">SELECT</span> v1;</span><br><span class="line">   <span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_while()</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹2-REPEATâ€¦UNTIL - ç±»ä¼¼doâ€¦whileç»“æ„</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#REPEAT...UNTIL <span class="operator">-</span> ç±»ä¼¼do...whileç»“æ„</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_repeat()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">   <span class="keyword">DECLARE</span> v1 <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">5</span>;</span><br><span class="line">   REPEAT</span><br><span class="line">      <span class="keyword">SET</span> v1<span class="operator">=</span>v1<span class="number">-1</span>;</span><br><span class="line">      <span class="keyword">SELECT</span> v1;      </span><br><span class="line">   UNTIL v1<span class="operator">&lt;</span><span class="number">1</span></span><br><span class="line">   <span class="keyword">END</span> REPEAT;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_repeat();</span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹3 æ•°æ®åº“å­˜å‚¨ç»“æ„ç‹¬ç‰¹ç»“æ„ï¼šLOOPâ€¦LEAVE ç±»ä¼¼ forâ€¦breakâ€¦continue</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#æ•°æ®åº“å­˜å‚¨ç»“æ„ç‹¬ç‰¹ç»“æ„ï¼šLOOP...LEAVE ç±»ä¼¼ for...break...continue</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_sum(<span class="keyword">IN</span> n <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">DECLARE</span> v_sum <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">  #labelæ˜¯åšä¸€ä¸ªæ ‡è¯†ï¼Œå†™æ³•æ˜¯å¿…é¡»åœ¨åé¢å¸¦å†’å·â€œlabel:â€æ–¹ä¾¿åé¢å†™leaveï¼Œiterate;</span><br><span class="line">  label:LOOP</span><br><span class="line">    IF n <span class="operator">&lt;=</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line">      LEAVE label;</span><br><span class="line">    <span class="keyword">END</span> IF;    </span><br><span class="line">    <span class="keyword">SET</span> v_sum <span class="operator">=</span> v_sum <span class="operator">+</span> n;</span><br><span class="line">    <span class="keyword">SET</span> n <span class="operator">=</span> n <span class="operator">-</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">END</span> LOOP label;</span><br><span class="line">  <span class="keyword">SELECT</span> v_sum;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> sp_sum(<span class="number">100</span>)</span><br></pre></td></tr></table></figure><p>iterate å¯ä»¥å½“åšcontinueæ¥ä½¿ç”¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#æ•°æ®åº“å­˜å‚¨ç»“æ„ç‹¬ç‰¹ç»“æ„ï¼šLOOP...LEAVE ç±»ä¼¼ for...break...continue</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> sp_sum(<span class="keyword">IN</span> n <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">DECLARE</span> v_sum <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">  #labelæ˜¯åšä¸€ä¸ªæ ‡è¯†ï¼Œå†™æ³•æ˜¯å¿…é¡»åœ¨åé¢å¸¦å†’å·â€œlabel:â€æ–¹ä¾¿åé¢å†™leaveï¼Œiterate;</span><br><span class="line">  label:LOOP</span><br><span class="line">    IF n <span class="operator">&lt;=</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line">       LEAVE label;</span><br><span class="line">    <span class="keyword">END</span> IF;</span><br><span class="line">    IF n<span class="operator">%</span><span class="number">2</span><span class="operator">=</span><span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">  <span class="keyword">SET</span> n <span class="operator">=</span> n<span class="number">-1</span>;</span><br><span class="line">  ITERATE label;</span><br><span class="line">    <span class="keyword">END</span> IF;</span><br><span class="line">    <span class="keyword">SET</span> v_sum <span class="operator">=</span> v_sum <span class="operator">+</span> n;</span><br><span class="line">    <span class="keyword">SET</span> n <span class="operator">=</span> n <span class="operator">-</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">END</span> LOOP label;</span><br><span class="line">  <span class="keyword">SELECT</span> v_sum;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line">$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><h3 id="3-2-3-ä¸šåŠ¡æ¡ˆä¾‹èµæ"><a href="#3-2-3-ä¸šåŠ¡æ¡ˆä¾‹èµæ" class="headerlink" title="3-2-3 ä¸šåŠ¡æ¡ˆä¾‹èµæ"></a>3-2-3 ä¸šåŠ¡æ¡ˆä¾‹èµæ</h3><p>æ¡ˆä¾‹1-ä¿®æ”¹é”€å”®ä»·æ ¼</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#æ ¹æ®ç”¨æˆ·å§“åå’Œä¹¦åæŸ¥è¯¢è®¢å•ï¼Œå¦‚æœè®¢è´­å†Œæ•°å°äº<span class="number">5</span>æœ¬ä¸æ‰“æŠ˜ï¼Œ</span><br><span class="line">#è®¢è´­å†Œæ•°åœ¨<span class="number">5</span><span class="number">-10</span>æœ¬ä¹‹é—´ï¼Œè®¢è´­å•ä»·æ‰“ä¹æŠ˜ï¼Œè®¢è´­å†Œæ•°å¤§äº<span class="number">10</span>æœ¬ï¼Œè®¢è´­å•ä»·æ‰“å…«æŠ˜ã€‚</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> </span><br><span class="line">sp_updateSellPrice(<span class="keyword">IN</span> m_name  <span class="type">CHAR</span>(<span class="number">10</span>), <span class="keyword">IN</span> b_name <span class="type">VARCHAR</span>(<span class="number">40</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span>  v_bookcode <span class="type">CHAR</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">DECLARE</span>  v_mcode <span class="type">CHAR</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">DECLARE</span>  v_amount TINYINT;</span><br><span class="line"><span class="keyword">SELECT</span> mcode <span class="keyword">INTO</span> v_mcode  <span class="keyword">FROM</span> <span class="keyword">member</span></span><br><span class="line"><span class="keyword">WHERE</span>  NAME<span class="operator">=</span>m_name;</span><br><span class="line"><span class="keyword">SELECT</span> bookcode <span class="keyword">INTO</span> v_bookcode  <span class="keyword">FROM</span> Book <span class="keyword">WHERE</span>  bookname<span class="operator">=</span>b_name;</span><br><span class="line"><span class="keyword">SELECT</span> amount <span class="keyword">INTO</span> v_amount <span class="keyword">FROM</span> sell </span><br><span class="line"><span class="keyword">WHERE</span> mcode<span class="operator">=</span>v_mcode <span class="keyword">AND</span> bookcode<span class="operator">=</span>v_bookcode;</span><br><span class="line"><span class="keyword">SELECT</span> v_bookcode,v_mcode,v_amount;</span><br><span class="line"></span><br><span class="line">IF v_amount<span class="operator">&gt;=</span><span class="number">5</span> <span class="keyword">AND</span> v_amount<span class="operator">&lt;=</span><span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> sell <span class="keyword">SET</span> price<span class="operator">=</span>price<span class="operator">*</span><span class="number">0.9</span> </span><br><span class="line"><span class="keyword">WHERE</span> mcode<span class="operator">=</span>v_mcode <span class="keyword">AND</span> bookcode<span class="operator">=</span>v_bookcode;</span><br><span class="line">ELSEIF v_amount<span class="operator">&gt;</span><span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> sell <span class="keyword">SET</span> price<span class="operator">=</span>price<span class="operator">*</span><span class="number">0.8</span>    </span><br><span class="line"><span class="keyword">WHERE</span> mcode<span class="operator">=</span>v_mcode <span class="keyword">AND</span> bookcode<span class="operator">=</span>v_bookcode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-2-4-ä¸­çº§è€ƒè¯•æ¡ˆä¾‹"><a href="#3-2-4-ä¸­çº§è€ƒè¯•æ¡ˆä¾‹" class="headerlink" title="3-2-4 ä¸­çº§è€ƒè¯•æ¡ˆä¾‹"></a>3-2-4 ä¸­çº§è€ƒè¯•æ¡ˆä¾‹</h3><p>æ¡ˆä¾‹1ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> insertProc(<span class="keyword">IN</span> p <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line"><span class="keyword">DECLARE</span> var <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">SET</span> var <span class="operator">=</span> p<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">CASE</span> var</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> B <span class="keyword">VALUES</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> B <span class="keyword">VALUES</span>(<span class="number">21</span>);</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> B <span class="keyword">VALUES</span>(<span class="number">22</span>);</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line">DELIMITER;</span><br><span class="line"></span><br><span class="line">#æœ‰å­˜å‚¨è¿‡ç¨‹åˆ›å»ºå¦‚ä¸Šï¼Œè¯­å¥<span class="keyword">CALL</span> insertProc(<span class="number">0</span>)æ’å…¥Bè¡¨ä¸­çš„å€¼æ˜¯ï¼Ÿ</span><br><span class="line"><span class="keyword">CALL</span> insertProc(<span class="number">0</span>); </span><br></pre></td></tr></table></figure><p>æ¡ˆä¾‹2ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc()</span><br><span class="line"><span class="keyword">BEGIN</span> </span><br><span class="line"><span class="keyword">DECLARE</span> var <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">SET</span> var <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">WHILE var <span class="operator">&lt;</span> <span class="number">4</span> DO</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> B <span class="keyword">VALUES</span>(var);</span><br><span class="line"><span class="keyword">SET</span> var <span class="operator">=</span> var <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line">DELIMITER;</span><br><span class="line">#å…³äºä¸Šè¿°å­˜å‚¨è¿‡ç¨‹ï¼Œæ‰§è¡Œ<span class="keyword">insert</span>è¯­å¥å‡ æ¬¡ï¼Ÿ</span><br></pre></td></tr></table></figure><h1 id="4-å­˜å‚¨å‡½æ•°"><a href="#4-å­˜å‚¨å‡½æ•°" class="headerlink" title="4 å­˜å‚¨å‡½æ•°"></a>4 å­˜å‚¨å‡½æ•°</h1><h2 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h2><p>å‚è€ƒä»£ç 1</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºä¸€ä¸ªå­˜å‚¨å‡½æ•°ï¼Œå®ƒè¿”å›Bookè¡¨ä¸­å›¾ä¹¦æ•°ç›®ä½œä¸ºç»“æœã€‚</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> fun_bookCount()</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">INTEGER</span></span><br><span class="line">  <span class="keyword">BEGIN</span></span><br><span class="line">     <span class="keyword">RETURN</span> (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> Book);</span><br><span class="line">  <span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><p>å‚è€ƒä»£ç 2</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºä¸€ä¸ªå­˜å‚¨å‡½æ•°ï¼Œè¿”å›Bookè¡¨ä¸­æŸæœ¬ä¹¦çš„ä½œè€…å§“åã€‚</span><br><span class="line">DELIMITER $$</span><br><span class="line">   <span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> fun_bookAuthor(b_name <span class="type">VARCHAR</span>(<span class="number">40</span>))</span><br><span class="line">   <span class="keyword">RETURNS</span> <span class="type">CHAR</span>(<span class="number">10</span>)</span><br><span class="line">     <span class="keyword">BEGIN</span></span><br><span class="line">        <span class="keyword">DECLARE</span> res_author <span class="type">CHAR</span>(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">SELECT</span> author <span class="keyword">INTO</span> res_author <span class="keyword">FROM</span> book <span class="keyword">WHERE</span> bookname<span class="operator">=</span> b_name;</span><br><span class="line"><span class="keyword">RETURN</span> res_author;</span><br><span class="line">     <span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹"><a href="#æŸ¥çœ‹" class="headerlink" title="æŸ¥çœ‹"></a>æŸ¥çœ‹</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">FUNCTION</span> STATUS;</span><br></pre></td></tr></table></figure><h2 id="è°ƒç”¨"><a href="#è°ƒç”¨" class="headerlink" title="è°ƒç”¨"></a>è°ƒç”¨</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> fun_bookCount();</span><br><span class="line"><span class="keyword">SELECT</span> fun_bookAuthor(<span class="string">&#x27;ç½‘é¡µè®¾è®¡&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> fun_bookCount;</span><br></pre></td></tr></table></figure><h1 id="5-è§¦å‘å™¨"><a href="#5-è§¦å‘å™¨" class="headerlink" title="5 è§¦å‘å™¨"></a>5 è§¦å‘å™¨</h1><h2 id="åˆ›å»º-1"><a href="#åˆ›å»º-1" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#å½“åˆ é™¤è¡¨bookè¡¨ä¸­æŸå›¾ä¹¦çš„ä¿¡æ¯æ—¶ï¼ŒåŒæ—¶å°†sellè¡¨ä¸­ä¸è¯¥å›¾ä¹¦æœ‰å…³çš„æ•°æ®å…¨éƒ¨åˆ é™¤</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> t_book_del AFTER <span class="keyword">DELETE</span></span><br><span class="line"><span class="keyword">ON</span> Book <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line">  <span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">DELETE</span> <span class="keyword">FROM</span> sell <span class="keyword">WHERE</span> bookcode<span class="operator">=</span>old.bookcode;</span><br><span class="line">  <span class="keyword">END</span>$$</span><br><span class="line">DELIMITER ; </span><br><span class="line"></span><br><span class="line">#ç°åœ¨éªŒè¯ä¸€ä¸‹è§¦å‘å™¨çš„åŠŸèƒ½ï¼š</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> book <span class="keyword">WHERE</span> bookcode <span class="operator">=</span> <span class="string">&#x27;TP23/6625&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#ä½¿ç”¨<span class="keyword">SELECT</span>è¯­å¥æŸ¥çœ‹Sellè¡¨ä¸­çš„æƒ…å†µï¼š</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sell <span class="keyword">WHERE</span> bookcode <span class="operator">=</span> <span class="string">&#x27;TP23/6625&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹-1"><a href="#æŸ¥çœ‹-1" class="headerlink" title="æŸ¥çœ‹"></a>æŸ¥çœ‹</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TRIGGERS</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤-1"><a href="#åˆ é™¤-1" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><p>å‚è€ƒä»£ç </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> trigger_name</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Pythonçˆ¬è™«</title>
      <link href="/2023/05/16/Python%E7%88%AC%E8%99%AB/"/>
      <url>/2023/05/16/Python%E7%88%AC%E8%99%AB/</url>
      
        <content type="html"><![CDATA[<h1 id="Scrapyçˆ¬è™«æ¡†æ¶"><a href="#Scrapyçˆ¬è™«æ¡†æ¶" class="headerlink" title="Scrapyçˆ¬è™«æ¡†æ¶"></a>Scrapyçˆ¬è™«æ¡†æ¶</h1><h2 id="1-åŸºç¡€"><a href="#1-åŸºç¡€" class="headerlink" title="1. åŸºç¡€"></a>1. åŸºç¡€</h2><h3 id="1-1-å‘½ä»¤"><a href="#1-1-å‘½ä»¤" class="headerlink" title="1.1 å‘½ä»¤"></a>1.1 å‘½ä»¤</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">å®‰è£…ï¼š</span><br><span class="line">pip install scrapy</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹æ‰€è£…ä¾èµ–æ¸…å•:</span><br><span class="line">pip list</span><br><span class="line">pip freeze</span><br><span class="line"></span><br><span class="line">è¾“å‡ºæ¸…å•:</span><br><span class="line">pip freeze &gt; requirements.txt</span><br><span class="line"></span><br><span class="line">è¯»å–æ¸…å•ä¸‹è½½:</span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><h4 id="1-1-1-åˆ›å»ºScrapyé¡¹ç›®"><a href="#1-1-1-åˆ›å»ºScrapyé¡¹ç›®" class="headerlink" title="1.1.1 åˆ›å»ºScrapyé¡¹ç›®"></a>1.1.1 åˆ›å»ºScrapyé¡¹ç›®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject Spider01</span><br></pre></td></tr></table></figure><h4 id="1-1-2-æ–°å»ºSpiderè„šæœ¬"><a href="#1-1-2-æ–°å»ºSpiderè„šæœ¬" class="headerlink" title="1.1.2 æ–°å»ºSpiderè„šæœ¬"></a>1.1.2 æ–°å»ºSpiderè„šæœ¬</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy genspider douban movie.douban.com</span><br></pre></td></tr></table></figure><h4 id="1-1-3-è¿è¡Œ"><a href="#1-1-3-è¿è¡Œ" class="headerlink" title="1.1.3 è¿è¡Œ"></a>1.1.3 è¿è¡Œ</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl douban -o douban.csv</span><br></pre></td></tr></table></figure><h3 id="1-2-é¡¹ç›®ç»“æ„"><a href="#1-2-é¡¹ç›®ç»“æ„" class="headerlink" title="1.2. é¡¹ç›®ç»“æ„"></a>1.2. é¡¹ç›®ç»“æ„</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230527113932509.png" alt="image-20230527113932509"></p><ul><li><p>spiders:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è‡ªå®šä¹‰è„šæœ¬</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> Selector</span><br><span class="line"><span class="keyword">from</span> Spider02.items <span class="keyword">import</span> MovieItem</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DoubanSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">&quot;douban&quot;</span></span><br><span class="line">    allowed_domains = [<span class="string">&quot;movie.douban.com&quot;</span>]</span><br><span class="line">    start_urls = [<span class="string">&quot;https://movie.douban.com/top250&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        sel = Selector(response)</span><br><span class="line">        list_items = sel.css(<span class="string">&#x27;#content &gt; div &gt; div.article &gt; ol &gt; li&#x27;</span>)</span><br><span class="line">        <span class="keyword">for</span> list_item <span class="keyword">in</span> list_items:</span><br><span class="line">            movie_item = MovieItem()</span><br><span class="line">            <span class="comment"># æŠ½å–cssé€‰æ‹©å™¨ä¹‹åçš„ç¬¬ä¸€æ¡æ•°æ®</span></span><br><span class="line">            movie_item[<span class="string">&#x27;title&#x27;</span>] = list_item.css(<span class="string">&#x27;span.title::text&#x27;</span>).extract_first()</span><br><span class="line">            movie_item[<span class="string">&#x27;rank&#x27;</span>] = list_item.css(<span class="string">&#x27;span.rating_num::text&#x27;</span>).extract_first()</span><br><span class="line">            movie_item[<span class="string">&#x27;subject&#x27;</span>] = list_item.css(<span class="string">&#x27;span.inq::text&#x27;</span>).extract_first()</span><br><span class="line">            <span class="comment"># ç”Ÿæˆå™¨---&gt;è¿”å›å¯¹è±¡</span></span><br><span class="line">            <span class="keyword">yield</span> movie_item</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>items</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸‹è½½å™¨</span></span><br><span class="line"><span class="comment"># Define here the models for your scraped items</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># See documentation in:</span></span><br><span class="line"><span class="comment"># https://docs.scrapy.org/en/latest/topics/items.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Spider02Item</span>(scrapy.Item):</span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># çˆ¬è™«è·å–åˆ°çš„æ•°æ®ç»„è£…æˆItemå¯¹è±¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MovieItem</span>(scrapy.Item):</span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    rank = scrapy.Field()</span><br><span class="line">    subject = scrapy.Field()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>settings</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é…ç½®é¡µé¢</span><br><span class="line">Cookiesã€‚ã€‚ã€‚ã€‚</span><br></pre></td></tr></table></figure></li><li><p>pipelines</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ•°æ®ç®¡é“</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>IDEAå¸¸è§é—®é¢˜</title>
      <link href="/2023/05/15/IDEA%E5%B0%8F%E6%8A%80%E5%B7%A7/"/>
      <url>/2023/05/15/IDEA%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="IDEAå¸¸è§é—®é¢˜"><a href="#IDEAå¸¸è§é—®é¢˜" class="headerlink" title="IDEAå¸¸è§é—®é¢˜"></a>IDEAå¸¸è§é—®é¢˜</h2><h3 id="1-Logeæ—¥å¿—"><a href="#1-Logeæ—¥å¿—" class="headerlink" title="1. Logeæ—¥å¿—"></a>1. Logeæ—¥å¿—</h3><ul><li>å½“åœ¨æœ¬åœ°è¿è¡Œ sparkä»»åŠ¡æ—¶ï¼Œæ§åˆ¶å°ä¼šå‡ºç°å¾ˆå¤šçº¢è‰²çš„INFOä¿¡æ¯ï¼Œä¸¥é‡å¹²æ‰°è§†è§‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><ul><li>è§£å†³åŠæ³•ï¼Œç‚¹å‡»ä¸‹è½½<a href="https://spark.apache.org/downloads.html">https://spark.apache.org/downloads.html</a> spark æˆ–è€… <a href="https://archive.apache.org/dist/spark/ï¼Œé€‰æ‹©è‡ªå·±mavenä¸­å¼•å…¥çš„sparkç‰ˆæœ¬ï¼ŒHadoopç‰ˆæœ¬åº”è¯¥å¯ä»¥éšä¾¿é€‰æ‹©ï¼ˆæˆ‘æ˜¯æœ¬åœ°å®‰è£…äº†Hadoopï¼Œæ‰€ä»¥é€‰æ‹©äº†å®‰è£…çš„Hadoopç‰ˆæœ¬ï¼‰">https://archive.apache.org/dist/spark/ï¼Œé€‰æ‹©è‡ªå·±mavenä¸­å¼•å…¥çš„sparkç‰ˆæœ¬ï¼ŒHadoopç‰ˆæœ¬åº”è¯¥å¯ä»¥éšä¾¿é€‰æ‹©ï¼ˆæˆ‘æ˜¯æœ¬åœ°å®‰è£…äº†Hadoopï¼Œæ‰€ä»¥é€‰æ‹©äº†å®‰è£…çš„Hadoopç‰ˆæœ¬ï¼‰</a></li></ul><ul><li>ç‚¹å‡»è¿›å…¥ä¸‹è½½é¡µé¢ï¼Œé€‰æ‹©HTTPä¸‹è½½å®‰è£…åŒ…ï¼š</li></ul><ul><li>è§£å‹åï¼Œé€‰æ‹© conf æ–‡ä»¶å¤¹ä¸‹çš„ log4j.properties.template ï¼Œå°†å…¶å¤åˆ¶åˆ°IDEAé¡¹ç›® resources ç›®å½•ä¸­ï¼Œæ”¹åä¸º log4j.propertiesï¼š</li></ul><ul><li><p>å¯¹ log4j.properties åšä¿®æ”¹å¦‚ä¸‹ï¼ˆINFO -&gt; ERRORï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log4j.rootCategory=ERROR, console</span><br></pre></td></tr></table></figure></li></ul><h3 id="2-å¿«æ·é”®"><a href="#2-å¿«æ·é”®" class="headerlink" title="2.å¿«æ·é”®"></a>2.å¿«æ·é”®</h3><div class="table-container"><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>ctrl + alt + t</td><td>try catchç­‰ä¸€ç³»åˆ—</td></tr><tr><td>alt + t</td><td>è¡¥å…¨ã€è§£å†³é—®é¢˜</td></tr><tr><td>alt + insert</td><td>å¿«é€Ÿç”Ÿæˆget setæ–¹æ³•</td></tr><tr><td>ctrl + p</td><td>æç¤º</td></tr><tr><td></td></tr></tbody></table></div><h3 id="3-è¿è¡Œ"><a href="#3-è¿è¡Œ" class="headerlink" title="3.è¿è¡Œ"></a>3.è¿è¡Œ</h3><ul><li><p>Command line is too long. Shorten command line for xxx or also for Application default configurat</p><ul><li><pre><code>1. Run ä¸‹çš„Edit Configur...2. é€‰æ‹© Modify Options3. æ·»åŠ Show code over...4. é€‰æ‹©Java çš„ JAR</code></pre></li></ul></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è‹±è¯­ä¿®ä»™ä¹‹è·¯</title>
      <link href="/2023/05/13/%E8%8B%B1%E8%AF%AD%E4%BF%AE%E4%BB%99%E4%B9%8B%E8%B7%AF/"/>
      <url>/2023/05/13/%E8%8B%B1%E8%AF%AD%E4%BF%AE%E4%BB%99%E4%B9%8B%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<p>å¼€å§‹:<a href="https://www.bilibili.com/video/BV1XY411J7aG/?p=2&amp;vd_source=bed2588951fb9fd0821dd2ef0191e48b">https://www.bilibili.com/video/BV1XY411J7aG/?p=2&amp;vd_source=bed2588951fb9fd0821dd2ef0191e48b</a></p><h1 id="è‹±è¯­è¯­æ³•ç»¼è¿°"><a href="#è‹±è¯­è¯­æ³•ç»¼è¿°" class="headerlink" title="è‹±è¯­è¯­æ³•ç»¼è¿°"></a>è‹±è¯­è¯­æ³•ç»¼è¿°</h1><p>å­¦ä¹ è¯­æ³•å°±æ˜¯ä¸ºäº†â€”â€”â€”&gt; é€ å¥</p><h1 id="ç®€å•å¥"><a href="#ç®€å•å¥" class="headerlink" title="ç®€å•å¥"></a>ç®€å•å¥</h1><ul><li>å°†é•¿å¥å­æ‹†æˆä¸èƒ½å†æ‹†çš„å¥å­ï¼Œå°±ç§°ä¸ºç®€å•å¥</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä»€ä¹ˆ + æ€ä¹ˆæ ·</span><br><span class="line">(ä¸»è¯­subject)(è°“è¯­predicate)</span><br><span class="line">ä»€ä¹ˆï¼Œæ€ä¹ˆæ ·å¯¹åº”äº†ä¸¤ä¸ªåŸºæœ¬çš„å¥å­æˆåˆ†</span><br><span class="line"></span><br><span class="line">è€Œè¿™é‡Œçš„è°“è¯­åŒ…æ‹¬äº†ï¼š åŠ¨ä½œ/å‘ç”Ÿäº†ä»€ä¹ˆäº‹</span><br></pre></td></tr></table></figure><ul><li><p>åŠ¨ä½œ(åŠ¨è¯)</p><ol><li><p>å¯ä»¥ç‹¬ç«‹å®Œæˆçš„åŠ¨ä½œ</p><p>ä¸»è¯­ + <em>ä¸åŠç‰©åŠ¨è¯</em>     (Papa Rabbit sleeps å…”è€çˆ¹ç¡è§‰)    è¿™é‡Œsleepå°±æ˜¯ä¸åŠç‰©åŠ¨è¯</p></li><li><p>æœ‰1ä¸ªåŠ¨ä½œçš„æ‰¿å—è€…</p><p>ä¸»è¯­ + å•åŠç‰©åŠ¨è¯ + å®¾è¯­    (Papa Rabbit likes you å…”è€çˆ¹å–œæ¬¢ä½ )</p></li><li><p>æœ‰2ä¸ªåŠ¨ä½œæ‰¿å—è€…</p><p>ä¸»è¯­ + åŒåŠç‰©åŠ¨è¯ + é—´æ¥å®¾è¯­ + ç›´æ¥å®¾è¯­    (Papa Rabbit teacher your English)</p></li><li><p>åªæœ‰1ä¸ªåŠ¨ä½œæ‰¿å—è€…(ä½†éœ€è¡¥å……)</p><p>ä¸»è¯­ + å¤æ‚åŠç‰©åŠ¨è¯ + å®¾è¯­ + (å®¾è¯­)è¡¥è¯­    (Papa Rabbit considers you smart)</p></li><li><p>éâ€åŠ¨ä½œâ€</p><p>ä¸»è¯­ + ç³»åŠ¨è¯ + (ä¸»è¯­)è¡¥è¯­/è¡¨è¯­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚ï¼š</span><br><span class="line">Beihai looks tall</span><br><span class="line">beihai in the room</span><br><span class="line">Papa Rabbit smells nice</span><br><span class="line"></span><br><span class="line">è¿™é‡Œæˆ‘ä»¬ç§°ä¹‹ä¸ºï¼š è¿ç³»åŠ¨è¯   ---- &gt; ç³»åŠ¨è¯</span><br></pre></td></tr></table></figure></li></ol></li><li><p>å¥å­æˆåˆ†</p><ol><li>ä¸»è¯­</li><li>è°“è¯­åŠ¨è¯</li><li>å®¾è¯­</li><li>å®¾è¯­è¡¥è¯­</li><li>ä¸»è¯­è¡¥è¯­</li><li>å®šè¯­</li><li>çŠ¶è¯­</li><li>åŒä½è¯­</li></ol></li><li><p>ç®€å•å¥çš„è½¬æ¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">åè¯æ€§ä»å¥ï¼š</span><br><span class="line">ç®€å•å¥ä½œä¸»è¯­-----&gt; ä¸»è¯­ä»å¥</span><br><span class="line">ç®€å•å¥ä½œå®¾è¯­-----&gt; å®¾è¯­ä»å¥</span><br><span class="line">ç®€å•å¥ä½œè¡¨è¯­-----&gt; è¡¨è¯­ä»å¥</span><br><span class="line">ç®€å•å¥ä½œåŒä½è¯­-----&gt; åŒä½è¯­ä»å¥</span><br><span class="line"></span><br><span class="line">éåè¯æ€§ä»å¥ï¼š</span><br><span class="line">ç®€å•å¥ä½œå®šè¯­-----&gt; å®šè¯­ä»å¥</span><br><span class="line">ç®€å•å¥ä½œçŠ¶è¯­-----&gt; çŠ¶è¯­ä»å¥</span><br></pre></td></tr></table></figure></li><li><p>è¯æ€§</p><ol><li>åè¯</li><li>å† è¯</li><li>ä»£è¯</li><li>å½¢å®¹è¯</li><li>æ•°è¯</li><li>å‰¯è¯</li><li>ä»‹è¯</li><li>å¹è¯</li><li>è¿è¯</li></ol></li><li><p>è°“è¯­åŠ¨è¯çš„â€œä¸‰å¤§æœ¬é¢†â€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">æ—¶ä½“æ°”</span><br><span class="line">1.åŠ¨ä½œæ—¶é—´</span><br><span class="line">ç°åœ¨è¿‡å»å°†æ¥è¿‡å»å°†æ¥</span><br><span class="line">2.åŠ¨ä½œçŠ¶æ€</span><br><span class="line">ä¸€èˆ¬å®Œæˆè¿›è¡Œå®Œæˆè¿›è¡Œ</span><br><span class="line">3.åŠ¨ä½œå‡è®¾ï¼Œæƒ…æ„Ÿ</span><br></pre></td></tr></table></figure></li><li><p>åŠ©åŠ¨è¯</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230513160908907.png" alt="image-20230513160908907" style="zoom:50%;" /></p></li><li><p>éè°“è¯­åŠ¨è¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ä¸å……å½“è°“è¯­çš„åŠ¨è¯ï¼š</span><br><span class="line">åŠ¨è¯ä¸å®šå¼</span><br><span class="line">ç°åœ¨åˆ†è¯</span><br><span class="line">åŠ¨åè¯</span><br><span class="line">è¿‡å»åˆ†è¯</span><br></pre></td></tr></table></figure></li></ul><h1 id="åŠ¨è¯"><a href="#åŠ¨è¯" class="headerlink" title="åŠ¨è¯"></a>åŠ¨è¯</h1><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230513161552398.png" alt="image-20230513161552398" style="zoom:50%;" /></p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230513161623757.png" alt="image-20230513161623757"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å®ä¹‰åŠ¨è¯ï¼š ä¸åŠç‰©åŠ¨è¯ + åŠç‰©åŠ¨è¯</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230513162014026.png" alt="image-20230513162014026"></p><h2 id="åŠ¨è¯æ—¶é—´"><a href="#åŠ¨è¯æ—¶é—´" class="headerlink" title="åŠ¨è¯æ—¶é—´"></a>åŠ¨è¯æ—¶é—´</h2><p>è¿‡å»    ç°åœ¨    å°†æ¥</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>gitè¿æ¥github</title>
      <link href="/2023/05/13/git%E8%BF%9E%E6%8E%A5github/"/>
      <url>/2023/05/13/git%E8%BF%9E%E6%8E%A5github/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘hexoä¸‰è¿å’Œgit pushéƒ½ä¸èƒ½ç”¨äº†ï¼Œæäº†å¥½é•¿æ—¶é—´å‘ç°ä¸‹é¢å‡ ä¸ªé—®é¢˜</p><ul><li><p>ç°åœ¨GitHubæœ‰äº›ä¸æ”¯æŒrsaåŠ å¯†ï¼Œå¯ä»¥ä½¿ç”¨ed25519</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t åŠ å¯†ç±»å‹ -C &quot;ä½ çš„é‚®ç®±&quot;</span><br><span class="line"></span><br><span class="line">ex:</span><br><span class="line">ssh-keygen -t ed25519 -C &quot;1604252677&quot;</span><br></pre></td></tr></table></figure><p>æ›´æ”¹å®Œä¹‹åæˆ‘å‘ç°å¦‚æœä½ æ¥å›æ›´æ¢è¿™ä¸ªåŠ å¯†ç±»å‹ä¼šå¯¼è‡´é»˜è®¤çš„ç«¯å£22ä¸èƒ½ç”¨äº†</p><p><img src="E:\Hexo-Blog\piccode\PicCode\img\git_1.png" alt="image-20230513100301324"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å°æŠ€å·§ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å…è´¹å›¾åºŠç»¼åˆæ•™ç¨‹</title>
      <link href="/2023/05/11/%E5%85%8D%E8%B4%B9%E5%9B%BE%E5%BA%8A%E7%BB%BC%E5%90%88%E6%95%99%E7%A8%8B/"/>
      <url>/2023/05/11/%E5%85%8D%E8%B4%B9%E5%9B%BE%E5%BA%8A%E7%BB%BC%E5%90%88%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="1-åŸºäºGithubä»“åº“çš„å›¾åºŠ"><a href="#1-åŸºäºGithubä»“åº“çš„å›¾åºŠ" class="headerlink" title="1.åŸºäºGithubä»“åº“çš„å›¾åºŠ"></a>1.åŸºäºGithubä»“åº“çš„å›¾åºŠ</h2><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ol><li>å¾ˆç¨³å®šä¸ä¼šè·‘è·¯ï¼Œç”¨çš„æ˜¯è‡ªå·±çš„ä»“åº“å’Œå…¬å…±æ‰˜ç®¡å¹³å°</li><li>å›¾ç‰‡å¯ä»¥å¢é‡å¿«é€Ÿæ›´æ–°å’Œè·¨è®¾å¤‡ç®¡ç†</li><li>å¯ä»¥è¿›è¡Œç‰ˆæœ¬ç®¡ç†å’ŒæŸ¥çœ‹ä¹‹å‰çš„ç‰ˆæœ¬</li><li>æœ‰å…¬å…±CDNï¼Œé€Ÿåº¦è¿˜æ˜¯ä¸é”™çš„</li><li>èµ„æºæ ¼å¼å¯ä»¥ä»»æ„éƒ½è¡Œï¼ŒåŒ…æ‹¬<code>css</code>ã€<code>js</code>ç­‰</li></ol><p><strong>ç¼ºç‚¹ï¼š</strong></p><ol><li>æ¯ä¸ªä»“åº“é™åˆ¶1Gï¼Œè¶…è¿‡è¦æ–°å»ºå¦ä¸€ä¸ªä»“åº“</li><li>gitç®¡ç†å¯èƒ½å¶å°”ä¼šé‡åˆ°ç½‘ç»œå’Œå…¬é’¥å¤±æ•ˆé—®é¢˜</li></ol><h3 id="1-1-å»ºç«‹Githubä»“åº“"><a href="#1-1-å»ºç«‹Githubä»“åº“" class="headerlink" title="1.1 å»ºç«‹Githubä»“åº“"></a>1.1 å»ºç«‹Githubä»“åº“</h3><ol><li><p>è¿›å…¥<a href="https://github.com/">Githubå®˜ç½‘</a>æ³¨å†Œå¹¶ç™»å½•è‡ªå·±çš„è´¦å·ï¼Œåˆ°è‡ªå·±çš„ä¸ªäººä¸»é¡µï¼Œç‚¹å‡»å³ä¸Šè§’çš„<code>+</code>ï¼Œå¹¶é€‰æ‹©<code>New Repository</code>åˆ›å»ºè‡ªå·±çš„ä»“åº“ã€‚</p></li><li><p>ä»“åº“åå­—éšæ„ï¼Œæè¿°ä¹Ÿå¯ä»¥è‡ªç”±å‘æŒ¥ï¼Œå¯è§æ€§æœ€å¥½é€‰<code>public</code>ï¼Œ<code>Readme</code>æ–‡ä»¶å¯ä»¥åˆ›å»ºï¼Œç„¶åç‚¹å‡»<code>Create Repository</code>åˆ›å»ºä»“åº“ã€‚</p></li><li><p>è®©ä½ çš„è®¡ç®—æœºä¸Githubå»ºç«‹é€šä¿¡ï¼Œä¸»è¦æ˜¯<code>åˆ›å»ºå…¬é’¥</code>ã€<code>ä¸Šä¼ å…¬é’¥</code>ã€<code>æ£€æŸ¥é€šä¿¡</code>è¿™å‡ æ­¥ï¼Œç¡®ä¿è®¡ç®—æœºæœ‰æƒé™è®¿é—®è¿œç¨‹ä»“åº“ï¼Œæ‰€è¿°æ•™ç¨‹æ˜¯ç”¨çš„<code>RSAå…¬é’¥</code>ï¼Œç›®å‰æ›´æ¨è<code>ed25519å…¬é’¥</code>ï¼Œè¯¥æ•°å­—ç­¾åç®—æ³•çš„ç­¾åå’ŒéªŒè¯çš„æ€§èƒ½éƒ½æâ¾¼ï¼Œå…·ä½“æ•™ç¨‹ç™¾åº¦è¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t åŠ å¯†ç®—æ³• -C &quot;é‚®ç®±&quot;</span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/638b237216f2c2beb1ce8b7e.jpg" alt="img"></p></li><li><p>å…ˆåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä½ç½®å’Œåå­—éšæ„å°±å¯ä»¥ï¼Œè¿›å…¥è¯¥æ–‡ä»¶å¤¹åå³é”®æ‰“å¼€<code>Git Bash</code>ï¼Œç„¶åè¾“å…¥ä»¥ä¸‹ä»£ç æŠŠä¹‹å‰åˆ›å»ºçš„ä»“åº“æ‹·è´ä¸‹æ¥ï¼Œå…¶ä¸­<code>git clone</code>åé¢çš„ä¸œè¥¿è¦æ›¿æ¢æˆè‡ªå·±çš„ä»“åº“ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡è‡ªå·±ä»“åº“çš„sshé“¾æ¥æ¥è·å–ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BASH</span><br><span class="line">git clone git@github.com:Bei-Hai/pic_bed.git</span><br></pre></td></tr></table></figure><p><img src="https://pic.imgdb.cn/item/638b260716f2c2beb1d21741.jpg" alt="img"></p><p>çœ‹åˆ°ä¸Šå›¾çš„ä¿¡æ¯å°±ä»£è¡¨æˆåŠŸæŠŠæ•´ä¸ªä»“åº“æ‹·è´åˆ°å½“å‰æ–‡ä»¶å¤¹äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹è§è‡ªå·±çš„æ–‡ä»¶å¤¹å¤šäº†ä¸ª<code>.git</code>æ–‡ä»¶å¤¹å’Œ<code>Readme.md</code>æ–‡ä»¶ï¼Œè¿™å°±ä»£è¡¨æˆåŠŸäº†ã€‚</p><p><img src="https://pic.imgdb.cn/item/638b26f516f2c2beb1d324a9.jpg" alt="img"></p></li><li><p>æ­¤æ—¶æˆ‘ä»¬æœ€å¥½åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢åˆ›å»ºåˆ›å»ºä¸€ä¸ª<code>img</code>æ–‡ä»¶å¤¹ä¸“é—¨å­˜æ”¾å›¾ç‰‡ï¼Œå¦‚æœæœ‰å­˜æ”¾å…¶ä»–ç±»å‹èµ„æºçš„å¯ä»¥åˆ›å»ºåˆ«çš„æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚ç°åœ¨æƒ³å¾€ä»“åº“é‡ŒåŠ ä¸¤å¼ å›¾ï¼Œç›´æ¥å°±æŠŠå›¾ç‰‡å¤åˆ¶åˆ°<code>img</code>æ–‡ä»¶å¤¹é‡Œé¢å³å¯ã€‚</p><p><img src="https://pic.imgdb.cn/item/638b277216f2c2beb1d3ba52.jpg" alt="img"></p><p>ç„¶ååœ¨å¸¦æœ‰<code>Readme.md</code>æ–‡ä»¶çš„é‚£ä¸ªæ–‡ä»¶å¤¹å†…ï¼Œå³é”®æ‰“å¼€<code>Git Bash</code>ï¼ˆæ³¨æ„çœ‹æ¸…æ¥šæ˜¯ä»€ä¹ˆæ–‡ä»¶å¤¹ï¼‰ï¼Œç„¶åä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤æŠŠæ›´æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œæœ€åä¸€æ­¥ä¸æˆåŠŸå¯èƒ½è¦å¤šè¯•å‡ æ¬¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">BASH</span><br><span class="line"># å°†æ›´æ”¹æäº¤</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;æ›´æ–°å›¾ç‰‡&quot;</span><br><span class="line"># æ¨é€è‡³githubä»“åº“</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p>æœ€åçœ‹è§å¦‚ä¸‹ä¿¡æ¯å°±ä»£è¡¨æ¨é€æˆåŠŸäº†</p><p><a href="https://pic.imgdb.cn/item/638b28bf16f2c2beb1d5b49b.jpg"><img src="https://pic.imgdb.cn/item/638b28bf16f2c2beb1d5b49b.jpg" alt="img"></a>ä»“åº“æ­¤æ—¶åº”è¯¥ä¹Ÿæœ‰äº†åˆšåˆšä¸Šä¼ çš„èµ„æºäº†</p><p>ä¸‹æ¬¡å¢åˆ å›¾ç‰‡æˆ–è€…å…¶ä»–ä¸œè¥¿ï¼Œå°±è¿™æ ·ç…§çŒ«ç”»è™å°±å¯ä»¥æ¨ä¸Šæ¥æ›´æ–°ä»“åº“ï¼</p></li></ol><h3 id="1-2-Staticaly-CDNåŠ é€Ÿ"><a href="#1-2-Staticaly-CDNåŠ é€Ÿ" class="headerlink" title="1.2 Staticaly CDNåŠ é€Ÿ"></a>1.2 Staticaly CDNåŠ é€Ÿ</h3><p>ç›´æ¥è®¿é—®Githubä»“åº“çš„èµ„æºæ˜¯éå¸¸æ…¢çš„ï¼å› æ­¤æˆ‘ä»¬è¦ç”¨ä¸€äº›å…è´¹çš„CDNè¿›è¡ŒåŠ é€Ÿï¼Œ<code>Staticaly CDN</code>æ˜¯ç›®å‰å…è´¹CDNä¸­æ¯”è¾ƒå¥½ç”¨çš„å•¦ï¼Œä»–çš„åº”ç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"># æ ¼å¼ å…¶ä¸­ useræ˜¯ç”¨æˆ·å  repoæ˜¯ä»“åº“å  versionä»£è¡¨ç‰ˆæœ¬(tagæˆ–è€…åˆ†æ”¯ é»˜è®¤ä¸ºmain)  flieæ˜¯æ–‡ä»¶è·¯å¾„ </span><br><span class="line">https://cdn.staticaly.com/gh/user/repo@version/file</span><br><span class="line"></span><br><span class="line"># æ¯”å¦‚æˆ‘çš„ç¤ºä¾‹ä»“åº“å°±æ˜¯åŠ é€Ÿåœ°å€å°±æ˜¯è¿™ä¸ªå¤§å®¶å¯ä»¥å‚è€ƒå‚è€ƒ</span><br><span class="line">https://cdn.staticaly.com/gh/BeiHai-Blog/PicCode@main/img/dm14.webp</span><br></pre></td></tr></table></figure><h3 id="1-3-Vercel-éƒ¨ç½²"><a href="#1-3-Vercel-éƒ¨ç½²" class="headerlink" title="1.3 Vercel éƒ¨ç½²"></a>1.3 Vercel éƒ¨ç½²</h3><p>æ­¤æ–¹æ³•åŠ è½½é€Ÿåº¦è¾ƒå¿«ï¼Œä½†æ˜¯éœ€è¦åŸŸåè‡ªå®šä¹‰ç»‘å®šï¼Œå…¶ä¼˜ç‚¹ä¹Ÿæ˜¯å¯ä»¥ç»‘å®šè‡ªå®šä¹‰åŸŸäº†ï¼Œç›®å‰Vercelæ¯ä¸ªæœˆé™åˆ¶æµé‡100GB</p><ol><li><p>è¿›å…¥<a href="https://vercel.com/dashboard">Vercelæ§åˆ¶é¢æ¿</a>æ–°å»ºé¡¹ç›®ï¼Œå¹¶<code>é€šè¿‡Githubç»§ç»­</code>ï¼Œé€‰æ‹©å¯¼å…¥åˆšåˆšåˆ›å»ºçš„ä»“åº“ï¼Œç„¶åç›´æ¥éƒ¨ç½²å³å¯</p></li><li><p>è¿›å…¥è¯¥é¡¹ç›®æ§åˆ¶å°åï¼Œé€‰æ‹©å³ä¸Šè§’çš„<code>View Domains</code>æ·»åŠ æ–°çš„åŸŸåï¼Œæ·»åŠ ä¸€ä¸ªè‡ªå·±åŸŸåçš„äºŒçº§åŸŸåï¼Œç„¶ååœ¨ä½ å¯¹åº”çš„åŸŸåè§£ææ§åˆ¶å°æ·»åŠ å¯¹åº”è§£æï¼Œç­‰å¾…ç”Ÿæ•ˆã€‚</p></li><li><p>é€šè¿‡<code>è‡ªå®šä¹‰åŸŸå+èµ„æºè·¯å¾„</code>å³å¯è®¿é—®åˆ°å¯¹åº”çš„èµ„æºï¼Œä¾‹å¦‚æˆ‘è¿™é‡Œä¸º<code>https://beihaibei.eu.org/img/dm14.webp</code></p></li><li><p>è¦æ›´æ–°å›¾ç‰‡æ€ä¹ˆåŠï¼Ÿåªè¦å°†èµ„æºå¤åˆ¶åˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œç„¶åå†æ‰§è¡Œä¸€æ¬¡ä¸‹é¢çš„å‘½ä»¤å³å¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">BASH</span><br><span class="line"># å°†æ›´æ”¹æäº¤</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;æ›´æ–°å›¾ç‰‡&quot;</span><br><span class="line"># æ¨é€è‡³githubä»“åº“</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤é»˜è®¤æ˜¯æ›´æ–°åˆ°ä»“åº“çš„<code>main</code>åˆ†æ”¯ä¸Šï¼ŒVercelä¸€æ—¦æ£€æµ‹åˆ°mainåˆ†æ”¯å‘é€å˜åŒ–å°±ä¼šè§¦å‘æ–°ä¸€è½®éƒ¨ç½²ï¼Œæˆ‘ä»¬ç¨å€™ç‰‡åˆ»å³å¯é€šè¿‡æ–°çš„è·¯å¾„è®¿é—®åˆ°æ–°çš„èµ„æºã€‚</p></li></ol><h2 id="2-å…è´¹å›¾åºŠæ¨è"><a href="#2-å…è´¹å›¾åºŠæ¨è" class="headerlink" title="2.å…è´¹å›¾åºŠæ¨è"></a>2.å…è´¹å›¾åºŠæ¨è</h2><ol><li>è¿™éƒ¨åˆ†å…è´¹å›¾åºŠå°±å¤ªå¤šäº†ï¼Œæˆ‘ä¼šæŠŠæˆ‘ç›®å‰å‘ç°çš„å¯ä»¥å…è´¹ç™½å«–ä¸€å®šé¢åº¦çš„å›¾åºŠåšä¸€ä¸ªæ€»ç»“åˆ—åœ¨ä¸‹é¢</li><li>è¿™éƒ¨åˆ†å›¾åºŠçš„æ­å»ºé—¨æ§›è¾ƒä½ï¼Œæ‰€ä»¥é€Ÿåº¦å’Œç¨³å®šæ€§è‰¯è ä¸é½ï¼Œå¤§å®¶è‡ªè¡Œé€‰æ‹©ä½¿ç”¨å“ªä¸ª</li><li>æˆ‘è¿™é‡Œåªç»™å¤§å®¶æ¼”ç¤ºä¸€ç§çš„ä½¿ç”¨æ–¹æ³•ï¼Œå…¶ä»–å›¾åºŠä½¿ç”¨æ–¹æ³•ä¹Ÿç±»ä¼¼</li><li>å¤§å®¶å¯ä»¥çœ‹çœ‹å“ªä¸ªæ¯”è¾ƒå¥½ç”¨çš„æˆ–è€…è‡ªå·±çŸ¥é“çš„å¥½ç”¨çš„è¿™é‡Œæ²¡æœ‰ï¼Œå¯ä»¥ç•™è¨€æˆ‘ä¼šè¿›è¡Œè¡¥å……</li></ol><div class="table-container"><table><thead><tr><th style="text-align:center">ğŸ•</th><th style="text-align:center">ğŸ¥—</th><th style="text-align:center">ğŸ¤</th></tr></thead><tbody><tr><td style="text-align:center"><a href="https://smms.app/">SMMS</a></td><td style="text-align:center"><a href="https://www.superbed.cn/">èšåˆå›¾åºŠ</a></td><td style="text-align:center"><a href="https://www.hualigs.cn/">é‡è§å›¾åºŠ</a></td></tr><tr><td style="text-align:center"><a href="https://postimages.org/">PostImage</a></td><td style="text-align:center"><a href="https://imgse.com/">è·¯è¿‡å›¾åºŠ</a></td><td style="text-align:center"><a href="https://www.imgurl.org/">imgURL</a></td></tr><tr><td style="text-align:center"><a href="https://imgbox.com/">imgbox</a></td><td style="text-align:center"><a href="https://pic.iqy.ink/upload">Lsky Pro</a></td><td style="text-align:center"><a href="https://upload.cc/">Upload.cc</a></td></tr><tr><td style="text-align:center"><a href="https://imagelol.com/">imagelol</a></td><td style="text-align:center"><a href="https://imgtp.com/">imgtp</a></td><td style="text-align:center"><a href="https://cloudimge.com/">äº‘å›¾åºŠ</a></td></tr><tr><td style="text-align:center"><a href="https://mcecy.com/">è½½æ¶‚å›¾åºŠ</a></td><td style="text-align:center"><a href="https://tuchuang.voooe.cn/">Sky Chart Bed</a></td><td style="text-align:center"><a href="https://www.imgbed.link/">é£ç­å›¾åºŠ</a></td></tr><tr><td style="text-align:center"><a href="https://pz.al/">å–·å­å›¾åºŠ</a></td><td style="text-align:center"><a href="https://imgkb.com/">imgkb</a></td></tr></tbody></table></div><ul><li>ä½¿ç”¨æ–¹æ³•ï¼šç›´æ¥è¿›å…¥å®˜ç½‘ï¼Œä¸Šä¼ å›¾ç‰‡ç„¶åç²˜è´´åœ°å€å³å¯ï¼Œåœ°å€çš„æ ·å¼æœ‰å¤šæ ·ï¼Œè‡ªè¡Œé€‰æ‹©ã€‚</li><li>é€‰æ‹©è¦ç‚¹ï¼š<ol><li>é€Ÿåº¦ï¼šå¤§å®¶å¯ä»¥åˆ°<a href="https://ping.cn/">Ping.cn</a>è¿›è¡Œæµ‹è¯•</li><li>ç¨³å®šæ€§ä¸å®‰å…¨æ€§ï¼šçœ‹çœ‹å›¾åºŠåˆ›å»ºæ—¶é—´ï¼Œç½‘ä¸Šè¯„ä»·ç­‰</li><li>å¯é€‚ç”¨æ€§ï¼šæ”¯æŒçš„æ ¼å¼è¶Šå¤šè‚¯å®šæ˜¯è¶Šå¥½çš„ï¼Œæœ‰éƒ¨åˆ†æ”¯æŒ<code>webp</code>å’Œå…¶ä»–æ ¼å¼çš„ï¼Œå¯ä»¥å½“èµ„æºåºŠ</li></ol></li></ul><h2 id="3-PicGoç»“åˆMarkdownå®æ—¶ä¸Šä¼ å›¾ç‰‡"><a href="#3-PicGoç»“åˆMarkdownå®æ—¶ä¸Šä¼ å›¾ç‰‡" class="headerlink" title="3.PicGoç»“åˆMarkdownå®æ—¶ä¸Šä¼ å›¾ç‰‡"></a>3.PicGoç»“åˆMarkdownå®æ—¶ä¸Šä¼ å›¾ç‰‡</h2><ul><li><p>Picgoç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿè¿™æ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶ï¼Œå¼€æºåœ°å€ï¼š<a href="https://github.com/Molunerfinn/PicGo">Molunerfinn/PicGo</a></p></li><li><p>å¼•ç”¨é¡¹ç›®çš„ä»‹ç»ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºå¿«é€Ÿä¸Šä¼ å›¾ç‰‡å¹¶è·å–å›¾ç‰‡ URL é“¾æ¥çš„å·¥å…·ï¼Œå…³é”®æ˜¯ä»–å¯ä»¥ä¸Typoraé…å¥—ä¸€èµ·ä½¿ç”¨ï¼Œåœ¨ç²˜è´´å›¾ç‰‡çš„åŒæ—¶ä¸Šä¼ å›¾ç‰‡ï¼Œååˆ†æ–¹ä¾¿ï¼</p></li><li><p>æœ€æ–°ç‰ˆæˆ‘è¿™é‡Œå®æµ‹æ²¡åŠæ³•å®‰è£…ä¸€äº›æ’ä»¶ï¼Œå› æ­¤æ¨èå¤§å®¶å®‰è£…<a href="https://github.com/Molunerfinn/PicGo/releases/tag/v2.3.1-beta.5">v2.3.1-beta.5</a>è¿™ä¸ªç‰ˆæœ¬</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></p></li><li><p>ä¸‹è½½è½¯ä»¶åç›´æ¥ä¸€è·¯å®‰è£…ä¸‹å»å°±è¡Œï¼Œå»ºè®®è£…åœ¨éCç›˜çš„ä»»æ„ä¸€ä¸ªç›˜ã€‚</p></li></ul><h3 id="3-1-Githubå›¾åºŠ"><a href="#3-1-Githubå›¾åºŠ" class="headerlink" title="3.1 Githubå›¾åºŠ"></a>3.1 Githubå›¾åºŠ</h3><ol><li><p>è¿›å…¥è½¯ä»¶ä¹‹åï¼Œä¸€è·¯åˆ°è®¾ç½®é‡Œé¢å–æ¶ˆå‹¾é€‰å…¶ä»–å›¾åºŠï¼Œåªç•™ä¸‹Githubå›¾åºŠä¸€é¡¹ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç°åœ¨è¦å¼„Githubå›¾åºŠã€‚</p></li><li><p>ç„¶ååˆ°Githubæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œåˆ›å»ºä»“åº“çš„æ•™ç¨‹å‰é¢æœ‰è®²ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œ<code>ä»“åº“åå­—</code>å’Œ<code>æè¿°</code>éšæ„ï¼Œæœ€é‡è¦çš„æ˜¯æƒé™ä¸€å®šè¦é€‰<code>public</code>ï¼Œè¿™æ ·ä½ çš„å›¾ç‰‡æ‰å¯ä»¥éšæ—¶éšåœ°è®¿é—®åˆ°ã€‚åœ¨å›¾åºŠè®¾ç½®çš„Githubé…ç½®å¤„ï¼ŒæŒ‰ç…§ä¸‹å›¾å¡«å…¥å¯¹åº”çš„ä¿¡æ¯ï¼š</p><p>è‡ªå®šä¹‰åŸŸåçš„æ ¼å¼ä¸ºï¼š<code>https://cdn.staticaly.com/gh/ç”¨æˆ·å/ä»“åº“å@main</code>ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯<code>https://cdn.staticaly.com/gh/BeiHai-Blog/markdown_pic@main</code>ï¼Œå¯¹åº”çš„<code>ç”¨æˆ·å</code>å’Œ<code>ä»“åº“å</code>è®°ä½è¦æ¢æˆè‡ªå·±åå­—ï¼Œä¸èƒ½æœ‰ç©ºæ ¼ï¼ï¼ï¼</p><p>Tokençš„è·å–æ–¹å¼ä¸ºï¼š<code>å³ä¸Šè§’å¤´åƒ</code>-&gt;<code>Setting</code>-&gt;<code>å·¦è¾¹æ Developer Settings</code>-&gt;<code>å·¦æ Personal access tokens</code>-&gt;<code>å·¦æ tokens(classic)</code></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></p><p>åˆ›å»ºTokenæ—¶ï¼Œ<code>Note</code>éšæ„ï¼›<code>Exporation</code>é€‰<code>No expiration</code>ï¼Œ<code>Select scopes</code>å¿…é¡»æŠŠ<code>repo</code>è¿™ä¸€é¡¹å‹¾ä¸Šï¼Œç„¶åç‚¹å‡»ç”Ÿæˆå°±è¡Œ</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></p><p>è¿™ä¸ªæ—¶å€™å¿…é¡»é©¬ä¸Šå¤åˆ¶å‡ºç°çš„tokenï¼Œä¸ç„¶åé¢å°±çœ‹ä¸åˆ°äº†ï¼Œå¤åˆ¶äº†å¡«è¿›å»åˆšåˆšçš„Tokené€‰é¡¹ï¼Œéšåç‚¹å‡»ç¡®å®šä¿å­˜</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></p></li><li><p>éšä¾¿æ‹–æ‹½ä¸€å¼ å›¾ç‰‡è¿›æ¥ä¸Šä¼ åŒºåŸŸè¿™é‡Œï¼Œåº”è¯¥å°±å¯ä»¥ä¸Šä¼ æˆåŠŸï¼ŒéšåæŠŠç”Ÿæˆçš„é“¾æ¥å¤åˆ¶å°±å¯ä»¥ï¼Œæ­¤æ—¶æ‰“å¼€ä»“åº“å¯ä»¥å‘ç°å›¾ç‰‡ä¸Šä¼ åˆ°äº†æŒ‡å®šçš„æ–‡ä»¶å¤¹ã€‚æ³¨æ„ï¼šæ¯ä¸ªä»“åº“å¤§å°é™åˆ¶æ˜¯1Gï¼ï¼ï¼</p></li></ol><p><a href="https://tuchuang.voooe.cn/images/2022/12/30/image-6.webp"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></a></p><h3 id="3-2-Vikaå›¾åºŠ"><a href="#3-2-Vikaå›¾åºŠ" class="headerlink" title="3.2 Vikaå›¾åºŠ"></a>3.2 Vikaå›¾åºŠ</h3><p>Vikaå›¾åºŠçš„æœåŠ¡å™¨åœ¨å›½å†…ï¼Œé€Ÿåº¦æ˜¯æ¯”è¾ƒå¿«çš„</p><ol><li><p>é¦–å…ˆåœ¨Picgoé‡Œé¢å®‰è£…Vikadataçš„æ’ä»¶</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></p></li><li><p>æˆ‘ä»¬è¦å¡«çš„ä¿¡æ¯æœ‰ä¸‹é¢è¿™å‡ é¡¹ï¼š</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></p></li><li><p>è¿›å…¥<a href="https://vika.cn/">ç»´æ ¼è¡¨å®˜ç½‘</a>ï¼Œæ³¨å†Œè‡ªå·±çš„è´¦å·å¹¶ç™»å½•ï¼Œæ–°å»ºä¸€ä¸ªç©ºç™½çš„ç»´æ ¼è¡¨</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="img"></p></li><li><p>éšåç‚¹å‡»å·¦ä¸‹è§’å¤´åƒçš„ä¸ªäººè®¾ç½®ï¼Œç»‘å®šè‡ªå·±çš„é‚®ç®±åï¼Œè·å–<code>API Token</code></p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/1672392200842.webp" alt="img"></p></li><li><p>è¿›å…¥åˆšåˆšåˆ›å»ºçš„è¡¨æ ¼åï¼Œç‚¹å‡»ä¸Šè¾¹çš„<code>API</code>ï¼Œè¿›å…¥APIç•Œé¢åï¼Œä¾æ¬¡ç‚¹å‡»<code>æ˜¾ç¤ºAPI Token</code>-&gt;<code>Get è·å–</code>ï¼Œç„¶åå›¾ä¸­æ¡†èµ·æ¥çš„å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„<code>ç»´æ ¼è¡¨ID</code>å’Œ<code>API Token</code></p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/1672392201560.webp" alt="img"></p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/1672392249317.webp" alt="img"></p></li><li><p>å¡«è¿›å»å¯¹åº”ä½ç½®åï¼Œåˆ°ä¸Šä¼ åŒºåŸŸï¼ŒæŠŠå›¾åºŠæ¢æˆç»´æ ¼è¡¨ï¼Œè¯•è¯•æ‹–æ‹½å›¾ç‰‡èƒ½ä¸èƒ½ä¸Šä¼ ï¼</p></li></ol><h3 id="3-3-Bilibiliå›¾åºŠ"><a href="#3-3-Bilibiliå›¾åºŠ" class="headerlink" title="3.3 Bilibiliå›¾åºŠ"></a>3.3 Bilibiliå›¾åºŠ</h3><ul><li>ç”±äºè¿™ä¸ªå›¾åºŠç”¨åœ¨åšå®¢é‡Œå­˜åœ¨è·¨åŸŸé—®é¢˜ï¼Œå› æ­¤ä¸å†æ¨èä½¿ç”¨äº†ï¼Œå¼€æºåœ°å€ï¼š<a href="https://github.com/xlzy520/typora-plugin-bilibili">typora-plugin-bilibili</a></li></ul><h3 id="3-4-imgtpå›¾åºŠ"><a href="#3-4-imgtpå›¾åºŠ" class="headerlink" title="3.4 imgtpå›¾åºŠ"></a>3.4 imgtpå›¾åºŠ</h3><ul><li>å¼€æºåœ°å€ï¼š<a href="https://github.com/Redns/picgo-plugin-imgtp">picgo-plugin-imgtp</a></li></ul><ol><li><p>åœ¨Picgæ’ä»¶å•†åº—æœç´¢å¹¶å®‰è£…è¯¥æ’ä»¶</p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/image-8.webp" alt="img"></p></li><li><p>è¿›å…¥<a href="https://imgtp.com/">imgtp</a>æ³¨å†Œå¹¶ç™»å½•è‡ªå·±çš„è´¦å·ï¼Œè®°ä½è´¦å·å¯†ç ï¼Œå¾…ä¼šå„¿è¦ç”¨åˆ°</p></li><li><p>è¿›å…¥æ§åˆ¶å°ï¼Œç„¶åè¿›å…¥<code>è®¾ç½®</code>ï¼Œå°±å¯ä»¥çœ‹åˆ°å³è¾¹æœ‰<code>Token</code>è¿™ä¸€é¡¹ï¼Œè¿™äº›å°±æ˜¯æˆ‘ä»¬è¦çš„å…¨éƒ¨ä¿¡æ¯</p><p><img src="https://tuchuang.voooe.cn/images/2022/12/30/image-9.webp" alt="img"></p></li><li><p>éšååœ¨imgtpçš„é…ç½®ä¿¡æ¯é‡Œé¢å¡«ä¸Š<code>è´¦å·</code>ã€<code>å¯†ç </code>ã€<code>Token</code>è¿™å‡ é¡¹å³å¯</p></li><li><p>å¡«è¿›å»å¯¹åº”ä½ç½®åï¼Œåˆ°ä¸Šä¼ åŒºåŸŸï¼ŒæŠŠå›¾åºŠæ¢æˆç»´æ ¼è¡¨ï¼Œè¯•è¯•æ‹–æ‹½å›¾ç‰‡èƒ½ä¸èƒ½ä¸Šä¼ ï¼</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> åšå®¢é­”æ”¹æ•™ç¨‹ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>é’‰é’‰ä¸‹è½½ç›´æ’­å›æ”¾</title>
      <link href="/2023/05/05/%E9%92%89%E9%92%89/"/>
      <url>/2023/05/05/%E9%92%89%E9%92%89/</url>
      
        <content type="html"><![CDATA[<h2 id="æ‰‹æœºæŠ“åŒ…-ç”µè„‘ä¸‹è½½"><a href="#æ‰‹æœºæŠ“åŒ…-ç”µè„‘ä¸‹è½½" class="headerlink" title="æ‰‹æœºæŠ“åŒ…+ç”µè„‘ä¸‹è½½"></a>æ‰‹æœº<a href="https://so.csdn.net/so/search?q=æŠ“åŒ…&amp;spm=1001.2101.3001.7020">æŠ“åŒ…</a>+ç”µè„‘ä¸‹è½½</h2><h2 id="æ‰‹æœºæŠ“åŒ…"><a href="#æ‰‹æœºæŠ“åŒ…" class="headerlink" title="æ‰‹æœºæŠ“åŒ…"></a>æ‰‹æœºæŠ“åŒ…</h2><p><a href="https://link.jscdn.cn/1drv/aHR0cHM6Ly8xZHJ2Lm1zL3UvcyFBaFAtdlNZTXZHRUpoUXBjaFdJRVZQdTB5V1h0P2U9V09IdlUz.apk">ä¸‹è½½é“¾æ¥</a></p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><h5 id="ä¸€ã€é…ç½®è½¯ä»¶"><a href="#ä¸€ã€é…ç½®è½¯ä»¶" class="headerlink" title="ä¸€ã€é…ç½®è½¯ä»¶"></a>ä¸€ã€é…ç½®è½¯ä»¶</h5><ul><li>ä¸‹è½½appåå®‰è£…</li><li>æ‰“å¼€è½¯ä»¶</li><li>å¼¹å‡ºå¦‚æ­¤ç•Œé¢ï¼Œç‚¹å‡»<strong>ç•Œé¢ç©ºç™½å¤„æˆ–è€…æŒ‰è¿”å›é”®</strong>å…³é—­å¯¹è¯æ¡†</li><li>å¼¹å‡ºå¦‚æ­¤å¯¹è¯æ¡†ï¼Œç‚¹å‡»<strong>æš‚ä¸</strong></li><li>å¼¹å‡ºå»ºç«‹è¯·æ±‚ï¼Œç‚¹å‡»<strong>ç¡®å®š</strong>ï¼ˆä¸åŒæ‰‹æœºçš„ç•Œé¢ä¸ä¸€æ ·ï¼Œæˆ‘ä»¥MIUIä¸ºä¾‹ï¼Œé“ç†éƒ½å·®ä¸å¤šï¼Œç‚¹ç¡®å®šå®Œäº‹äº†ï¼‰</li></ul><h5 id="äºŒã€å¼€å§‹æŠ“åŒ…"><a href="#äºŒã€å¼€å§‹æŠ“åŒ…" class="headerlink" title="äºŒã€å¼€å§‹æŠ“åŒ…"></a>äºŒã€å¼€å§‹æŠ“åŒ…</h5><ul><li>ç„¶åè¿”å›æ¡Œé¢ï¼Œ<strong>æ‰“å¼€é’‰é’‰</strong></li><li>æ‰“å¼€ç¾¤ä¸­çš„<strong>ç›´æ’­å›æ”¾</strong></li><li>ç‚¹è¿›å»ä½ æƒ³ä¸‹è½½çš„ç›´æ’­ï¼Œç­‰åˆ°æœ‰ç”»é¢å‡ºæ¥äº†ï¼Œå°±å¯ä»¥è¿”å›äº†ã€‚ï¼ˆå¯ä»¥é‡å¤æ‰§è¡Œæ“ä½œï¼Œç‚¹å‡»å¤šä¸ªè¦ä¸‹è½½çš„ç›´æ’­ï¼‰<br> PSï¼šä½ ä¹Ÿè®¸å¯ä»¥çœ‹åˆ°å³ä¸‹è§’æœ‰ä¸€ä¸ªçª—å£ä¸€ç›´è¹¦ç€é“¾æ¥ï¼Œé‚£äº›å°±æ˜¯æŠ“åŒ…æŠ“åˆ°çš„åœ°å€ï¼Œä¸ç”¨ç®¡å®ƒå°±è¡Œ</li></ul><h5 id="ä¸‰ã€æå–å‡ºé“¾æ¥ï¼Œå‘é€ç»™ç”µè„‘"><a href="#ä¸‰ã€æå–å‡ºé“¾æ¥ï¼Œå‘é€ç»™ç”µè„‘" class="headerlink" title="ä¸‰ã€æå–å‡ºé“¾æ¥ï¼Œå‘é€ç»™ç”µè„‘"></a>ä¸‰ã€æå–å‡ºé“¾æ¥ï¼Œå‘é€ç»™ç”µè„‘</h5><ul><li>ç„¶åè¿”å›HttpCanaryï¼Œå†æ¬¡ç‚¹å‡»å³ä¸‹è§’çš„å°é£æœºå…³é—­æŠ“åŒ…ï¼Œå°é£æœºå°±å˜æˆå›è“è‰²äº†ï¼Œä½ è¯´ç¥å¥‡ä¸ã€‚ï¼ˆä¸æ”¾å›¾äº†ï¼Œæˆ‘ç›¸ä¿¡ä½ çŸ¥é“æ˜¯ä»€ä¹ˆï¼‰</li><li>ç„¶åç‚¹å‡»å³ä¸Šè§’<strong>æ”¾å¤§é•œ</strong>æ‰“å¼€æœç´¢</li><li>é€‰æ‹©æœ€åä¸€é¡¹â€œ<strong>Urlå…³é”®è¯</strong>â€</li><li>è¾“å…¥<strong>m3u8</strong>ï¼Œè¿”å›ï¼Œå†è¿”å›ï¼Œå›åˆ°é‚£ä¸ª<strong>æœ‰çº¸é£æœºçš„ç•Œé¢</strong></li><li>åˆ—è¡¨ä¸­å°±å‰©ä¸€ä¸ªäº†ï¼ˆå¦‚æœä½ ç‚¹å‡»äº†å¤šä¸ªå›æ”¾ï¼Œå°±æœ‰å¤šä¸ªé€‰é¡¹ï¼Œ<strong>æ¯ä¸ªå¯¹åº”ä¸€ä¸ªå›æ”¾</strong>ï¼‰</li><li>ç„¶ååˆ†åˆ«ç‚¹å‡»è¿›å…¥ï¼Œ<strong>é•¿æŒ‰é“¾æ¥</strong>ï¼Œæç¤ºå¤åˆ¶æˆåŠŸ</li><li>åˆ†åˆ«å°†è¿™äº›é“¾æ¥<strong>å‘é€ç»™ç”µè„‘</strong>ï¼Œå¯ä»¥ä½¿ç”¨qqã€å¾®ä¿¡ç­‰</li></ul><h2 id="ç”µè„‘ä¸‹è½½"><a href="#ç”µè„‘ä¸‹è½½" class="headerlink" title="ç”µè„‘ä¸‹è½½"></a>ç”µè„‘ä¸‹è½½</h2><p><a href="https://link.jscdn.cn/1drv/aHR0cHM6Ly8xZHJ2Lm1zL3UvcyFBaFAtdlNZTXZHRUpoUXZoX2R4YTJQMmNhV2Q2P2U9SWdWR3ZB.zip">ä¸‹è½½é“¾æ¥</a></p><p>è¿™ä¸ªè½¯ä»¶æ˜¯å¼€æºçš„å¯ä»¥åœ¨<a href="https://www.gyan.dev/ffmpeg/builds/#tools">ffmpeg</a>ä¸‹è½½</p><h4 id="ç”µè„‘"><a href="#ç”µè„‘" class="headerlink" title="ç”µè„‘"></a>ç”µè„‘</h4><h5 id="ä¸€ã€å‡†å¤‡å¥½æŒ‡ä»¤"><a href="#ä¸€ã€å‡†å¤‡å¥½æŒ‡ä»¤" class="headerlink" title="ä¸€ã€å‡†å¤‡å¥½æŒ‡ä»¤"></a>ä¸€ã€å‡†å¤‡å¥½æŒ‡ä»¤</h5><ul><li>è§£å‹ä¸‹è½½çš„å‹ç¼©åŒ…</li><li>å¾—åˆ°å¦‚æ­¤æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€binæ–‡ä»¶å¤¹</li><li>ä½ èƒ½çœ‹åˆ°ä¸‰ä¸ªexeæ–‡ä»¶ï¼Œä¸ç”¨è¿è¡Œå¥¹ä»¬ã€‚å…ˆå³é”®ï¼Œæ–°å»ºä¸€ä¸ªtxtæ–‡æ¡£ï¼Œéšä¾¿èµ·ä¸ªåå­—</li><li>è¾“å…¥ä»¥ä¸‹å†…å®¹<br> <code>ffmpeg -i &quot;ä»æ‰‹æœºä¸Šå‘æ¥çš„é“¾æ¥&quot; -c copy ä¿å­˜çš„æ–‡ä»¶å.mp4</code><br> å°†å…¶ä¸­çš„<code>ä»æ‰‹æœºä¸Šå‘æ¥çš„é“¾æ¥</code>å’Œ<code>ä¿å­˜çš„æ–‡ä»¶å</code>è¿™å‡ ä¸ªæ±‰å­—ï¼Œåˆ†åˆ«æ›¿æ¢æˆä½ ä»æ‰‹æœºä¸Šè¾›è¾›è‹¦è‹¦æåˆ°çš„<strong>é“¾æ¥</strong>ï¼Œå’Œä½ è¦ä¿å­˜è¿™ä¸ªè§†é¢‘çš„<strong>æ–‡ä»¶å</strong>ã€‚</li><li>æ›¿æ¢å¥½ä»¥åï¼Œé€‰æ‹©å…¨éƒ¨å†…å®¹ï¼Œå³é”®ï¼Œå¤åˆ¶</li></ul><h5 id="äºŒã€ä½¿ç”¨è½¯ä»¶ä¸‹è½½"><a href="#äºŒã€ä½¿ç”¨è½¯ä»¶ä¸‹è½½" class="headerlink" title="äºŒã€ä½¿ç”¨è½¯ä»¶ä¸‹è½½"></a>äºŒã€ä½¿ç”¨è½¯ä»¶ä¸‹è½½</h5><ul><li>å¤åˆ¶å®Œä¹‹åï¼Œå›åˆ°æ–‡ä»¶æµè§ˆå™¨ï¼Œåœ¨åˆšæ‰é‚£ä¸ªç›®å½•ä¸‹ï¼Œä½ åº”è¯¥æœ‰äº†å››ä¸ªæ–‡ä»¶â€”â€”ä¸‰ä¸ªexeå’Œä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ã€‚æ¥ç€æŒ‰ä½é”®ç›˜ä¸Šçš„Shiftï¼ˆä¸Šæ¡£ï¼‰æŒ‰é”®ï¼Œåœ¨ç©ºç™½å¤„ç‚¹å‡»å³é”®ã€‚<br> å¯ä»¥å‘ç°æœ‰ä¸ªåœ¨æ­¤å¤„æ‰“å¼€balabalaçš„ï¼Œæœ‰å¯èƒ½ä½ çœ‹åˆ°çš„æ˜¯<code>åœ¨æ­¤å¤„çš„æ‰“å¼€å‘½ä»¤è¡Œçª—å£</code>ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ï¼Œç‚¹å°±å®Œäº‹äº†ã€‚</li><li>ç„¶åå‡ºæ¥ä¸€ä¸ªå°é»‘æ¡†ï¼Œå°±å«å¥¹å°é»‘å§ï¼Œåœ¨å°é»‘çš„ç©ºç™½å¤„ï¼ˆæ²¡æœ‰æ–‡å­—çš„åœ°æ–¹ï¼‰æŒ‰ä¸€ä¸‹å³é”®ã€‚</li><li>ç„¶åä½ åˆšæ‰å¤åˆ¶çš„ä¸œè¥¿â€”â€”å•ªä¸€ä¸‹å°±ç²˜è´´ä¸Šå»äº†ï¼Œæ¥ä¸‹æ¥åªè¦æŒ‰ä¸€ä¸‹å›è½¦~<br> duang duang duang duang~ä¸€å¤§å †ä¸œè¥¿å¾€ä¸Šçªœï¼Œç­‰å¾…ä¸€ä¼šåï¼Œåœ¨åˆšæ‰é‚£ä¸ªç›®å½•ä¸‹ï¼Œå°±æœ‰äº†ä¸€ä¸ªmp4æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ä½ çš„ç›´æ’­äº†ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å®ç”¨å°æŠ€å·§ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é’‰é’‰è§£é™¤é™åˆ¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Golangç¬”è®°</title>
      <link href="/2023/03/12/Go%E7%AC%94%E8%AE%B0/"/>
      <url>/2023/03/12/Go%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å…¥é—¨"><a href="#ä¸€ã€å…¥é—¨" class="headerlink" title="ä¸€ã€å…¥é—¨"></a>ä¸€ã€å…¥é—¨</h2><p>å…¥é—¨å®¹æ˜“ç²¾é€šéš¾å•Šï¼ŒGolangè¯­æ³•æœ‰äº›ä¸¥æ ¼ï¼Œç›¸æ¯”Pythonå’ŒJavaä¸å¥½å­¦</p><h3 id="ç¼–è¯‘-è¿è¡Œ"><a href="#ç¼–è¯‘-è¿è¡Œ" class="headerlink" title="ç¼–è¯‘ + è¿è¡Œ"></a>ç¼–è¯‘ + è¿è¡Œ</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¼–è¯‘</span></span><br><span class="line"><span class="keyword">go</span> build hello.<span class="keyword">go</span></span><br><span class="line"><span class="comment">//è¿è¡Œ</span></span><br><span class="line">hello.exe</span><br><span class="line"><span class="comment">//ç¼–è¯‘+è¿è¡Œ</span></span><br><span class="line"><span class="keyword">go</span> run hello.<span class="keyword">go</span></span><br></pre></td></tr></table></figure><h3 id="å…¥é—¨æ¡ˆä¾‹"><a href="#å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="å…¥é—¨æ¡ˆä¾‹"></a>å…¥é—¨æ¡ˆä¾‹</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123; <span class="comment">//func æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œè¡¨ç¤ºä¸€ä¸ªå‡½æ•°ï¼Œmainè¡¨ç¤ºæ˜¯ä¸€ä¸ªä¸»å‡½æ•°</span></span><br><span class="line">fmt.Println(<span class="string">&quot;hello world!&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;hello Java&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¿™é‡Œå£°æ˜äº†å˜é‡numå°±å¿…é¡»ä½¿ç”¨å¦åˆ™ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment"># command-line-arguments</span></span><br><span class="line"><span class="comment">.\hello.go:8:6: num declared and not used</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><ol><li>è½¬è¯‘å­—ç¬¦</li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">\r ï¼š ä¼šæ›¿æ¢å‰é¢çš„å­—ç¬¦</span><br><span class="line">ex.</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span> <span class="comment">//fmtåŒ…ä¸­æä¾›æ ¼å¼åŒ–ï¼Œè¾“å‡ºï¼Œè¾“å…¥å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;å¤©é¾™å…«éƒ¨\ré›ªå±±é£&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœï¼šé›ªå±±é£éƒ¨</span></span><br></pre></td></tr></table></figure><p>ç»ƒä¹ : è¾“å‡ºä»¥ä¸‹å›¾ç‰‡</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230308230001435.png" alt="image-20230308230001435"></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span> <span class="comment">//fmtåŒ…ä¸­æä¾›æ ¼å¼åŒ–ï¼Œè¾“å‡ºï¼Œè¾“å…¥å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;å§“å\tå¹´é¾„\tç±è´¯\tä½å€\njohn\t12\tæ²³åŒ—\tåŒ—äº¬&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¡Œæ³¨é‡Š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å—æ³¨é‡Š(å¤šè¡Œæ³¨é‡Š)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="ä»£ç é£æ ¼"><a href="#ä»£ç é£æ ¼" class="headerlink" title="ä»£ç é£æ ¼"></a>ä»£ç é£æ ¼</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">table æ•´ä½“å‘å³</span><br><span class="line">shift + table æ•´ä½“å‘å·¦</span><br><span class="line"></span><br><span class="line">æ ¼å¼åŒ–ååœ¨å‘½ä»¤è¡Œæ˜¾ç¤ºï¼š(ä½†æ˜¯å®é™…ä¸Šä»£ç ä¸ä¼šå˜)</span><br><span class="line">gofmt hello.<span class="keyword">go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span> <span class="comment">//fmtåŒ…ä¸­æä¾›æ ¼å¼åŒ–ï¼Œè¾“å‡ºï¼Œè¾“å…¥å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">        fmt.Println(<span class="string">&quot;å§“å\tå¹´é¾„\tç±è´¯\tä½å€\njohn\t12\tæ²³åŒ—\tåŒ—äº¬&quot;</span>)</span><br><span class="line">        fmt.Println(<span class="string">&quot;å§“å\tå¹´é¾„\tç±è´¯\tä½å€\njohn\t12\tæ²³åŒ—\tåŒ—äº¬&quot;</span>)</span><br><span class="line">        fmt.Println(<span class="string">&quot;å§“å\tå¹´é¾„\tç±è´¯\tä½å€\njohn\t12\tæ²³åŒ—\tåŒ—äº¬&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ä¸€è¡Œå­—ç¬¦æ•°è¿‡å¤š</span><br><span class="line">fmt.Println(<span class="string">&quot;ffffffffffffff&quot;</span>,</span><br><span class="line"><span class="string">&quot;fffasdasascasc&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ffffasxasxa&quot;</span>)</span><br><span class="line"></span><br><span class="line">api: application program <span class="keyword">interface</span>:åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£</span><br><span class="line">å°±æ˜¯Goçš„å„ä¸ªåŒ…çš„å„ä¸ªå‡½æ•°</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨"><a href="#è°ƒç”¨" class="headerlink" title="è°ƒç”¨"></a>è°ƒç”¨</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Golangä¸­ï¼Œè°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ–¹å¼</span><br><span class="line"><span class="keyword">import</span> åŒ…</span><br><span class="line">ä½¿ç”¨ <span class="string">&#x27;åŒ…å.å‡½æ•°å&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="doså‘½ä»¤"><a href="#doså‘½ä»¤" class="headerlink" title="doså‘½ä»¤"></a>doså‘½ä»¤</h3><div class="table-container"><table><thead><tr><th>Doså‘½ä»¤</th><th></th></tr></thead><tbody><tr><td>æŸ¥çœ‹å½“å‰ç›®å½•</td><td>dir</td></tr><tr><td>æ¸…å±</td><td>cls(è‹è€å¸ˆ)</td></tr><tr><td>åˆ‡æ¢åˆ°Fç›˜</td><td>cd /d f: ï¼ˆF:ï¼‰</td></tr><tr><td>åˆ‡æ¢åˆ°å½“å‰ç›˜Goworkç›®å½•ï¼ˆç»å¯¹è·¯å¾„ï¼‰</td><td>cd d:\Gowork</td></tr><tr><td>åˆ‡æ¢åˆ°å½“å‰ç›˜Goworkç›®å½•ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰</td><td>cd Gowrk</td></tr><tr><td>å›åˆ°é¡¶çº§ç›®å½•(D:\Git\Git&gt;cd )</td><td>cd \</td></tr><tr><td>æ–°å»ºç›®å½•</td><td>md</td></tr><tr><td>åˆ é™¤ç›®å½•(remove directory)</td><td>rd</td></tr><tr><td>å¼ºåˆ¶åˆ é™¤ç›®å½•<q:ä¸è¯¢é—® s:å±‚çº§åˆ é™¤></td><td>rd /q/s</td></tr><tr><td>æ·»åŠ æ–‡ä»¶å¹¶åˆ›å»ºæ–‡ä»¶</td><td>echo hello &gt;  hello.txt</td></tr><tr><td>å¤åˆ¶æ–‡ä»¶</td><td>copy abc.txt a.txt</td></tr><tr><td>å‰ªåˆ‡æ–‡ä»¶</td><td>move abc.txt</td></tr><tr><td>åˆ é™¤æ–‡ä»¶</td><td>del abc.txt</td></tr><tr><td>é€€å‡º</td><td>exit</td></tr></tbody></table></div><h3 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h3><div class="table-container"><table><thead><tr><th>å¿«æ·é”®</th><th></th></tr></thead><tbody><tr><td>alt + shift + ä¸Šä¸‹é”®</td><td>ç±»ä¼¼ctrl + D</td></tr><tr><td>alt + ä¸Šä¸‹é”®</td><td>å°†è¯¥è¡Œä¸Šä¸‹ç§»åŠ¨</td></tr><tr><td>ctrl + shift + â€œ- or +â€</td><td>ä½¿å±å¹•ç¼©æ”¾</td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td></tr></tbody></table></div><p>ä½œä¸š:</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>ç¼–å†™ Hello</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>è¾“å‡ºçˆ±å¿ƒ</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;\t*\t\t\t\t\t*\n*&quot;</span>,<span class="string">&quot;\t\t*\tI love golang\t*\t\t*\n&quot;</span>,<span class="string">&quot;\t*\t\t\t\t\t*\n&quot;</span>,<span class="string">&quot;\t\t*\t\t\t*\n&quot;</span>,<span class="string">&quot;\t\t\t*\t*\n&quot;</span>,<span class="string">&quot;\t\t\t    *&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230309112527724.png" alt="image-20230309112527724"></p><h3 id="æœ¬ç« å†…å®¹å›é¡¾"><a href="#æœ¬ç« å†…å®¹å›é¡¾" class="headerlink" title="æœ¬ç« å†…å®¹å›é¡¾"></a>æœ¬ç« å†…å®¹å›é¡¾</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1.SDKæ˜¯ä»€ä¹ˆ</span><br><span class="line">SDKæ˜¯è½¯ä»¶å¼€å‘å·¥å…·åŒ…</span><br><span class="line"></span><br><span class="line">2.Golangç¯å¢ƒå˜é‡é…ç½®ï¼š</span><br><span class="line">GOROOR:æŒ‡å®š go sdkå®‰è£…ç›®å½•ã€‚</span><br><span class="line">Path:æŒ‡å®š sdkbinç›®å½•:go.exe godoc.exe gofmt.exe</span><br><span class="line">GOPATH:å°±æ˜¯golangé¡¹ç›®çš„å·¥ä½œç›®å½•: æ‰€æœ‰é¡¹ç›®çš„æºç éƒ½åœ¨è¿™é‡Œã€‚</span><br><span class="line"></span><br><span class="line">3.è§„åˆ™</span><br><span class="line">goå®šä¹‰çš„å˜é‡ or importåŒ… å¿…é¡»ä½¿ç”¨ ä¸ç”¨ä¼šæŠ¥é”™</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="äºŒã€åŸºç¡€"><a href="#äºŒã€åŸºç¡€" class="headerlink" title="äºŒã€åŸºç¡€"></a>äºŒã€åŸºç¡€</h2><h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><ol><li><p>å…¥é—¨</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">//å®šä¹‰å˜é‡/å£°æ˜å˜é‡</span></span><br><span class="line"><span class="keyword">var</span> i <span class="type">int</span></span><br><span class="line"><span class="comment">//èµ‹å€¼</span></span><br><span class="line">i = <span class="number">10</span></span><br><span class="line">fmt.Println(<span class="string">&quot;i=&quot;</span>,i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//int é»˜è®¤å€¼æ˜¯0</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨æ–¹å¼</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="keyword">var</span> i <span class="type">int</span></span><br><span class="line"><span class="number">2.</span> <span class="keyword">var</span> num = <span class="number">10.11</span></span><br><span class="line"><span class="number">3.</span> name := <span class="string">&quot;tom&quot;</span></span><br><span class="line"></span><br><span class="line">ex.</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">name := <span class="number">100</span></span><br><span class="line">y1, y2 := <span class="number">15</span>, <span class="string">&quot;beihai&quot;</span></span><br><span class="line">fmt.Println(y1,y2)</span><br><span class="line">fmt.Println(name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿˜æœ‰å…¨å±€å˜é‡</span></span><br><span class="line">ex:</span><br><span class="line"><span class="keyword">var</span>(</span><br><span class="line">n3 = <span class="number">300</span></span><br><span class="line">    n4 = <span class="number">500</span></span><br><span class="line">    name2 = </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™é‡Œæ³¨æ„å®šä¹‰å…¨å±€å˜é‡çš„æ—¶å€™ä¸èƒ½ç”¨ a3 := &quot;521&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å˜é‡åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸ(åœ¨ä¸€ä¸ªå‡½æ•°æˆ–è€…åœ¨ä»£ç å—)å†…ä¸èƒ½é‡å</span></span><br><span class="line"><span class="keyword">var</span> i <span class="type">int</span> = <span class="number">59</span></span><br><span class="line">i := <span class="number">99</span></span><br><span class="line">ç®€å•è¯´å°±æ˜¯ä¸èƒ½é‡å¤</span><br><span class="line"><span class="keyword">var</span> d <span class="type">int</span> = <span class="number">20</span></span><br><span class="line"><span class="keyword">var</span> d <span class="type">int</span> = <span class="number">30</span></span><br></pre></td></tr></table></figure></li></ol><ol><li>æ•°æ®ç±»å‹</li></ol><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230310085412786.png" alt="image-20230310085412786" style="zoom:67%;" /></p><p>3.1 æ•´æ•°ç±»å‹ï¼š</p><p>â€‹    <img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230310091010550.png" alt="image-20230310091010550" style="zoom: 67%;" /></p><p>æ•´æ•°ä½¿ç”¨ç»†èŠ‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹æŸä¸ªå˜é‡çš„å­—èŠ‚å¤§å°å’Œæ•°æ®ç±»å‹</span><br><span class="line">fmt.Printf(<span class="string">&quot;&quot;</span>) ç”¨äºåšæ ¼å¼åŒ–è¾“å‡º</span><br><span class="line">ex:</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;unsafe&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> n2 <span class="type">int8</span> = <span class="number">-128</span></span><br><span class="line">fmt.Println(<span class="string">&quot;n2 çš„ ç±»å‹ %T n2å ç”¨çš„å­—èŠ‚æ•°æ˜¯ %d &quot;</span>, n2, unsafe.Sizeof(n2))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.2 å°æ•°ç±»å‹</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230310092627191.png" alt="image-20230310092627191" style="zoom:67%;" /></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œæœ‰ä¸€ç‚¹è¦æ³¨æ„<span class="type">float64</span>ä½æ¯”<span class="type">float32</span>ä½æ›´åŠ å‡†ç¡®</span><br><span class="line">é»˜è®¤æ˜¯<span class="type">float64</span></span><br><span class="line"></span><br><span class="line">num1 := <span class="number">2.1234e2</span>  <span class="comment">// 5.1234 * 10çš„2æ¬¡æ–¹</span></span><br><span class="line">num2 := <span class="number">2.1234e-2</span>  <span class="comment">// 5.1234 / 10çš„2æ¬¡æ–¹</span></span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/qq_41542894/article/details/104109261">https://blog.csdn.net/qq_41542894/article/details/104109261</a></p><p>å­—ç¬¦ä¸²å®šä¹‰ä¹‹åå°±ä¸å¯å˜</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s4 <span class="type">string</span> = <span class="string">`ä½ å¥½æŠ±æŠ±`</span><span class="comment">//å¯ä»¥ç”¨åå¼•å·</span></span><br></pre></td></tr></table></figure><h3 id="æ•°æ®ç±»å‹è½¬æ¢"><a href="#æ•°æ®ç±»å‹è½¬æ¢" class="headerlink" title="æ•°æ®ç±»å‹è½¬æ¢"></a>æ•°æ®ç±»å‹è½¬æ¢</h3><h4 id="åŸºæœ¬æ•°æ®ç±»å‹è½¬æˆString"><a href="#åŸºæœ¬æ•°æ®ç±»å‹è½¬æˆString" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹è½¬æˆString"></a>åŸºæœ¬æ•°æ®ç±»å‹è½¬æˆString</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>fmt.Sprintf(<span class="string">&quot;&quot;</span>)</span><br><span class="line">ex:</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> n1 <span class="type">float32</span> = <span class="number">12.5</span></span><br><span class="line"><span class="keyword">var</span> s1 <span class="type">string</span> = fmt.Sprintf(<span class="string">&quot;%f&quot;</span>,n1)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%q&quot;</span>,s1)</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>strconv.FormatInt(<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="comment">//è¿™é‡Œä¸å¤ªå¥½ç”¨éœ€è¦å¼ºè½¬æˆ64ä½</span></span><br><span class="line">ex:</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> n1 <span class="type">int</span> = <span class="number">19</span></span><br><span class="line"><span class="keyword">var</span> s1 <span class="type">string</span> = strconv.FormatInt(<span class="type">int64</span>(n1),<span class="number">10</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%v&quot;</span>,s1)</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h4 id="Stringç±»å‹è½¬æˆåŸºæœ¬æ•°æ®ç±»å‹"><a href="#Stringç±»å‹è½¬æˆåŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="Stringç±»å‹è½¬æˆåŸºæœ¬æ•°æ®ç±»å‹"></a>Stringç±»å‹è½¬æˆåŸºæœ¬æ•°æ®ç±»å‹</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">parse è§£æ</span><br><span class="line">ä»£ç ï¼š</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> s1 <span class="type">string</span> = <span class="string">&quot;true&quot;</span></span><br><span class="line"><span class="keyword">var</span> b <span class="type">bool</span></span><br><span class="line"><span class="comment">//ParseBoolå‡½æ•°è¿”å›å€¼æœ‰ä¸¤ä¸ª:(value bool, err error)</span></span><br><span class="line"><span class="comment">//valueæ˜¯å¸ƒå°”ç±»å‹çš„æ•°æ®ï¼Œerræ˜¯å‡ºç°çš„é”™è¯¯</span></span><br><span class="line"><span class="comment">//åªéœ€è¦è·å–å¸ƒå°”æ•°æ®ï¼Œä¸è¦errå¯ä»¥ç”¨_ç›´æ¥å¿½ç•¥</span></span><br><span class="line">b, _= strconv.ParseBool(s1)</span><br><span class="line">fmt.Printf(<span class="string">&quot;bçš„æ•°æ®ç±»å‹æ˜¯%T, b = %v\n&quot;</span>,b,b)</span><br><span class="line"></span><br><span class="line"><span class="comment">//string --&gt; int64</span></span><br><span class="line"><span class="keyword">var</span> s2 <span class="type">string</span> = <span class="string">&quot;19&quot;</span></span><br><span class="line"><span class="keyword">var</span> num1 <span class="type">int64</span></span><br><span class="line">num1, _ = strconv.ParseInt(s2,<span class="number">10</span>,<span class="number">64</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;num1çš„æ•°æ®ç±»å‹æ˜¯%T, num1 = %v\n&quot;</span>,num1,num1)</span><br><span class="line"></span><br><span class="line"><span class="comment">//string --&gt; float32/float64</span></span><br><span class="line"><span class="keyword">var</span> s3 <span class="type">string</span> = <span class="string">&quot;3.14&quot;</span></span><br><span class="line"><span class="keyword">var</span> f1 <span class="type">float64</span></span><br><span class="line">f1, _ = strconv.ParseFloat(s3,<span class="number">64</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;f1çš„æ•°æ®ç±»å‹æ˜¯%T, f1 = %v\n&quot;</span>,f1,f1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s4 <span class="type">string</span> = <span class="string">&quot;3.14&quot;</span></span><br><span class="line"><span class="keyword">var</span> f2 <span class="type">float64</span></span><br><span class="line">f2, _ = strconv.ParseFloat(s4,<span class="number">32</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;f2çš„æ•°æ®ç±»å‹æ˜¯%T, f2 = %v&quot;</span>,f2,f2)</span><br><span class="line"></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿è¡Œç»“æœ</span></span><br><span class="line">bçš„æ•°æ®ç±»å‹æ˜¯<span class="type">bool</span>, b = <span class="literal">true</span></span><br><span class="line">num1çš„æ•°æ®ç±»å‹æ˜¯<span class="type">int64</span>, num1 = <span class="number">19</span></span><br><span class="line">f1çš„æ•°æ®ç±»å‹æ˜¯<span class="type">float64</span>, f1 = <span class="number">3.14</span></span><br><span class="line">f2çš„æ•°æ®ç±»å‹æ˜¯<span class="type">float64</span>, f2 = <span class="number">3.140000104904175</span></span><br></pre></td></tr></table></figure><h4 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h4><p>å°±æ˜¯å†…å­˜åœ°å€</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230311085922328.png" alt="image-20230311085922328" style="zoom: 67%;" /></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> age <span class="type">int</span> = <span class="number">10</span></span><br><span class="line"><span class="comment">// &amp;ç¬¦å· + å˜é‡ å¯ä»¥è·å–å˜é‡å†…å­˜çš„åœ°å€</span></span><br><span class="line">fmt.Println(&amp;age) <span class="comment">//0xc00000e0a8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆå˜é‡-&gt; pointer</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">var ä»£è¡¨è¦å£°æ˜ä¸€ä¸ªå˜é‡</span></span><br><span class="line"><span class="comment">ptr æŒ‡é’ˆå˜é‡çš„åå­—</span></span><br><span class="line"><span class="comment">ptr å¯¹åº”çš„ç±»å‹æ˜¯ï¼š*int æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼ˆå¯ä»¥ç†è§£ä¸º æŒ‡å‘intç±»å‹çš„æŒ‡é’ˆ)</span></span><br><span class="line"><span class="comment">&amp;age å°±æ˜¯ä¸€ä¸ªåœ°å€ï¼šæ˜¯ptrå…·ä½“çš„å€¼</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> ptr *<span class="type">int</span> = &amp;age</span><br><span class="line">fmt.Println(ptr)</span><br><span class="line">fmt.Println(<span class="string">&quot;ptræœ¬èº«å­˜å‚¨ç©ºé—´çš„åœ°å€:&quot;</span>,&amp;ptr)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ³è·å–ptræœ¬èº«åœ°å€æŒ‡å‘çš„æ•°æ®</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;ptræŒ‡å‘çš„æ•°å€¼ä¸º:%v&quot;</span>, *ptr)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&amp;å–å†…å­˜åœ°å€</span></span><br><span class="line"><span class="comment">*å–å†…å­˜åœ°å€æ‰€æŒ‡çš„å€¼</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h5 id="æŒ‡é’ˆçš„4ä¸ªç»†èŠ‚"><a href="#æŒ‡é’ˆçš„4ä¸ªç»†èŠ‚" class="headerlink" title="æŒ‡é’ˆçš„4ä¸ªç»†èŠ‚"></a>æŒ‡é’ˆçš„4ä¸ªç»†èŠ‚</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.é€šè¿‡æŒ‡é’ˆæ”¹å˜æŒ‡å‘å€¼</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> num <span class="type">int</span> = <span class="number">10</span></span><br><span class="line">fmt.Println(<span class="string">&quot;num = &quot;</span>, num)</span><br><span class="line"><span class="keyword">var</span> ptr *<span class="type">int</span> = &amp;num</span><br><span class="line">fmt.Println(<span class="string">&quot;numçš„åœ°å€ptr = &quot;</span>, ptr)</span><br><span class="line">fmt.Println(<span class="string">&quot;ptræŒ‡å‘çš„æ•°å€¼ä¸º: &quot;</span>, *ptr)</span><br><span class="line"></span><br><span class="line">*ptr = <span class="number">20</span></span><br><span class="line">fmt.Println(<span class="string">&quot;å°†ptræ”¹å˜æŒ‡å‘æ•°å€¼: &quot;</span>, num)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.æŒ‡é’ˆå˜é‡æ¥å—çš„ä¸€å®šæ˜¯åœ°å€å€¼</span></span><br><span class="line"><span class="comment">// 3.æŒ‡é’ˆå˜é‡çš„åœ°å€ä¸å¯ä»¥ä¸åŒ¹é…</span></span><br><span class="line"><span class="comment">// 4.åŸºæœ¬æ•°æ®ç±»å‹ï¼Œéƒ½æœ‰å¯¹åº”çš„æŒ‡é’ˆç±»å‹</span></span><br></pre></td></tr></table></figure><h3 id="æ ‡è¯†ç¬¦"><a href="#æ ‡è¯†ç¬¦" class="headerlink" title="æ ‡è¯†ç¬¦"></a>æ ‡è¯†ç¬¦</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.å¯ä»¥ç”¨â€˜_&#x27;æ¥å¿½ç•¥ä¸€äº›ä¸œè¥¿</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">_<span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. åŒ…åï¼šå°½é‡ä¿æŒpackageçš„åå­—å’Œç›®å½•ä¿æŒä¸€ç›´ï¼Œå°½é‡é‡‡å–æœ‰æ„ä¹‰çš„åŒ…å</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">mainåŒ…æ˜¯ä¸€ä¸ªç¨‹åºçš„å…¥å£ï¼Œå¦‚æœä¸å®šä¹‰ä¸ºpackage mainåˆ™ä¸èƒ½æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3. å¦‚æœå˜é‡åã€å‡½æ•°åã€å¸¸é‡åé¦–å­—æ¯å¤§å†™ï¼Œåˆ™å¯ä»¥è¢«å…¶ä»–çš„åŒ…è®¿é—®ï¼›</span></span><br><span class="line"><span class="comment">//å¦‚æœé¦–å­—æ¯å°å†™ï¼Œåˆ™åªèƒ½åœ¨æœ¬åŒ…ä½¿ç”¨</span></span><br></pre></td></tr></table></figure><h3 id="å…³äºå¯¼åŒ…"><a href="#å…³äºå¯¼åŒ…" class="headerlink" title="å…³äºå¯¼åŒ…"></a>å…³äºå¯¼åŒ…</h3><p><a href="https://zhuanlan.zhihu.com/p/109828249">https://zhuanlan.zhihu.com/p/109828249</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">æœ‰äº›é—®é¢˜ç°åœ¨ä¸ä¼š</span><br><span class="line">ä½†åŸºæœ¬è§£å†³åŠæ³•</span><br><span class="line"><span class="number">1.</span> é…ç½®GOPATH</span><br><span class="line"><span class="comment">//åˆ°srcä¸Šä¸€çº§ç›®å½•ä¸‹</span></span><br><span class="line"><span class="number">2.</span> <span class="keyword">go</span> mod init ç›®å½•åå­—</span><br><span class="line"><span class="comment">//è¿™é‡Œç›®å½•åå­—æ˜¯main.goä¸Šä¸€çº§ç›®å½•</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">module demo03</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">go 1.20</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="io"><a href="#io" class="headerlink" title="io"></a>io</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.Scanln</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// fmt.Println(&quot;ä½ å¥½è¯·è¾“å…¥ä½ çš„å¹´é¾„: &quot;)</span></span><br><span class="line"><span class="comment">// age,_ :=  fmt.ScanIn()</span></span><br><span class="line"><span class="comment">// fmt.Println(&quot;ä½ çš„å¹´é¾„ä¸º: &quot;, age)</span></span><br><span class="line"><span class="keyword">var</span> age <span class="type">int</span></span><br><span class="line">fmt.Println(<span class="string">&quot;è¯·å½•å…¥å­¦ç”Ÿçš„å¹´é¾„: &quot;</span>)</span><br><span class="line">fmt.Scanln(&amp;age)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name <span class="type">string</span></span><br><span class="line">fmt.Println(<span class="string">&quot;è¯·å½•å…¥å­¦ç”Ÿçš„å§“å: &quot;</span>)</span><br><span class="line">fmt.Scanln(&amp;name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> score <span class="type">float32</span></span><br><span class="line">fmt.Println(<span class="string">&quot;è¯·å½•å…¥å­¦ç”Ÿçš„æˆç»©: &quot;</span>)</span><br><span class="line">fmt.Scanln(&amp;score)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> isVIP <span class="type">bool</span></span><br><span class="line">fmt.Println(<span class="string">&quot;è¯·å½•å…¥å­¦ç”Ÿæ˜¯å¦ä¸ºVIP: &quot;</span>)</span><br><span class="line">fmt.Scanln(&amp;isVIP)</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">&quot;å­¦ç”Ÿçš„å¹´é¾„ä¸º: %v, å§“åä¸º: %v, æˆç»©ä¸º: %v, æ˜¯å¦ä¸ºVIP: %v &quot;</span>,age,name,score,isVIP)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹å¼2ï¼šScanf</span></span><br><span class="line">fmt.Println(<span class="string">&quot;è¯·å½•å…¥å­¦ç”Ÿçš„å¹´é¾„,å§“å,æˆç»©,æ˜¯å¦æ˜¯VIP,ä½¿ç”¨ç©ºæ ¼è¿›è¡Œåˆ†éš”&quot;</span>)</span><br><span class="line">fmt.Scanf(<span class="string">&quot;%d %s %f %t&quot;</span>, &amp;age, &amp;name, &amp;score, &amp;isVIP)</span><br><span class="line">fmt.Printf(<span class="string">&quot;å­¦ç”Ÿçš„å¹´é¾„ä¸º: %v, å§“åä¸º: %v, æˆç»©ä¸º: %v, æ˜¯å¦ä¸ºVIP: %v &quot;</span>,age,name,score,isVIP)</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230311104205536.png" alt="image-20230311104205536"></p><h3 id="åˆ†æ”¯ç»“æ„"><a href="#åˆ†æ”¯ç»“æ„" class="headerlink" title="åˆ†æ”¯ç»“æ„"></a>åˆ†æ”¯ç»“æ„</h3><h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> count <span class="type">int</span> = <span class="number">30</span></span><br><span class="line"><span class="keyword">if</span> count &lt;= <span class="number">30</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;sorry å£ç½©å­˜é‡ä¸è¶³&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">if count := 20;count &lt;= 30 &#123;</span></span><br><span class="line"><span class="comment">fmt.Println(&quot;sorry å£ç½©å­˜é‡ä¸è¶³&quot;)</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> count := <span class="number">20</span>;count &gt;= <span class="number">30</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;sorry å£ç½©å­˜é‡ä¸è¶³&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;éœ€è¦åŠ äº§äº†&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ifå¤šåˆ†æ”¯"><a href="#ifå¤šåˆ†æ”¯" class="headerlink" title="ifå¤šåˆ†æ”¯"></a>ifå¤šåˆ†æ”¯</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> score <span class="type">float32</span></span><br><span class="line">fmt.Println(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„æˆç»©: &quot;</span>)</span><br><span class="line">fmt.Scanln(&amp;score)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">90</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;A&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> score &gt;= <span class="number">80</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;B&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> score &gt;= <span class="number">70</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;C&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> score &gt;= <span class="number">60</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;D&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;E&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> score <span class="type">int</span></span><br><span class="line"><span class="built_in">println</span>(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„æˆç»©ï¼š&quot;</span>)</span><br><span class="line">fmt.Scanln(&amp;score)</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> score/<span class="number">10</span>&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">10</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºAçº§&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">9</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºAçº§&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">8</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºBçº§&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">7</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºCçº§&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºDçº§&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºEçº§&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºEçº§&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºEçº§&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºEçº§&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºEçº§&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºEçº§&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;è¾“å…¥é”™è¯¯&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//default å¯ä»¥æ”¾åœ¨&#123;&#125;ä¸­ä»»ä½•åœ°æ–¹</span></span><br></pre></td></tr></table></figure><h5 id="switchç»†èŠ‚"><a href="#switchç»†èŠ‚" class="headerlink" title="switchç»†èŠ‚"></a>switchç»†èŠ‚</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="comment">// ç±»å‹å¿…é¡»åŒ¹é…</span></span><br><span class="line"><span class="number">2.</span> <span class="comment">// switch åé¢çš„æ¡ä»¶å¯ä»¥åŠ å˜é‡ï¼Œå¸¸é‡.....</span></span><br><span class="line"><span class="number">3.</span> <span class="comment">// caseå¯ä»¥åŠ å¤šä¸ªä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;ğŸ˜„&quot;</span>)</span><br><span class="line"><span class="number">4.</span> <span class="comment">//defaultä¸æ˜¯å¿…é¡»çš„</span></span><br><span class="line"><span class="number">5.</span> <span class="comment">//switchç‰¹æœ‰ç”¨æ³•ï¼š</span></span><br><span class="line">a := <span class="number">2</span></span><br><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line"><span class="keyword">case</span> a == <span class="number">1</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;aaa&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> a == <span class="number">2</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;bbb&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">6.</span> <span class="comment">// switchåå¯ä»¥ç›´æ¥å£°æ˜/å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯è¦ä»¥;ç»“æŸ</span></span><br><span class="line"><span class="keyword">switch</span> b := <span class="number">7</span> ; &#123;</span><br><span class="line">    <span class="keyword">case</span> b &gt; <span class="number">6</span> :</span><br><span class="line">    fmt.Println(<span class="string">&quot;å¤§äº6&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">7.</span> <span class="comment">// switchç©¿é€ï¼Œåˆ©ç”¨fallthroughå…³é”®å­—</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">7</span> :</span><br><span class="line">fmt.Println(<span class="string">&quot;æ‚¨çš„ç­‰çº§ä¸ºCçº§&quot;</span>)</span><br><span class="line"><span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span> :</span><br><span class="line"></span><br><span class="line"><span class="comment">/*fmt.Println(&quot;æ‚¨çš„ç­‰çº§ä¸ºDçº§&quot;)</span></span><br><span class="line"><span class="comment">è¿™é‡Œå¦‚æœè¾“å…¥70 åˆ™ä¼šæ‰“å°</span></span><br><span class="line"><span class="comment">æ‚¨çš„ç­‰çº§ä¸ºCçº§</span></span><br><span class="line"><span class="comment">æ‚¨çš„ç­‰çº§ä¸ºDçº§*/</span></span><br></pre></td></tr></table></figure><h3 id="å¾ªç¯ç»“æ„"><a href="#å¾ªç¯ç»“æ„" class="headerlink" title="å¾ªç¯ç»“æ„"></a>å¾ªç¯ç»“æ„</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">golangä¸­åªæœ‰foræ²¡æœ‰while</span><br></pre></td></tr></table></figure><h4 id="for"><a href="#for" class="headerlink" title="for"></a>for</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> åˆå§‹è¡¨è¾¾å¼; å¸ƒå°”è¡¨è¾¾å¼; è¿­ä»£å› å­&#123;</span><br><span class="line">å¾ªç¯ä½“;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> sum <span class="type">int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line">sum += i</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="forç»†èŠ‚"><a href="#forç»†èŠ‚" class="headerlink" title="forç»†èŠ‚"></a>forç»†èŠ‚</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="comment">// æ ¼å¼çµæ´»</span></span><br><span class="line">i := <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i &lt;= <span class="number">5</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;è¿­ä»£5æ¬¡&quot;</span>)</span><br><span class="line">i++</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">2.</span> <span class="comment">// æ­»å¾ªç¯</span></span><br><span class="line"><span class="keyword">var</span> n <span class="type">int</span> = <span class="number">0</span></span><br><span class="line">i := <span class="literal">true</span></span><br><span class="line"><span class="keyword">for</span> i == <span class="literal">true</span>&#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;è¿­ä»£ç¬¬%væ¬¡&quot;</span>, n)</span><br><span class="line">n++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;å¾ªç¯&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ; ; &#123;</span><br><span class="line">    fmt.Println(<span class="string">&quot;å¾ªç¯&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="for-range-é‡ç‚¹"><a href="#for-range-é‡ç‚¹" class="headerlink" title="for range    (é‡ç‚¹)"></a>for range    (é‡ç‚¹)</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> str <span class="type">string</span> = <span class="string">&quot;hello golangä½ å¥½å•Š&quot;</span></span><br><span class="line"><span class="comment">// æ–¹å¼ä¸€: æ™®é€šforå¾ªç¯: æŒ‰ç…§å­—èŠ‚è¿›è¡Œéå†è¾“å‡ºçš„ ï¼ˆæš‚æ—¶ä¸ç”¨ä¸­æ–‡ï¼‰</span></span><br><span class="line"><span class="comment">// for i := 0; i &lt; len(str); i++ &#123;</span></span><br><span class="line"><span class="comment">// fmt.Printf(&quot;å¾ªç¯ç¬¬ %v æ¬¡,ç¬¬ %v æ¬¡å¾ªç¯ç»“æœä¸º %c \n&quot;, i, i, str[i])</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹å¼äºŒ: for range</span></span><br><span class="line"><span class="keyword">for</span> i , value := <span class="keyword">range</span> str&#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;ç´¢å¼•ä¸ºï¼š%d, å…·ä½“çš„å€¼ä¸ºï¼š%c\n&quot;</span>, i, value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š0, å…·ä½“çš„å€¼ä¸ºï¼šh</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š1, å…·ä½“çš„å€¼ä¸ºï¼še</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š2, å…·ä½“çš„å€¼ä¸ºï¼šl</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š3, å…·ä½“çš„å€¼ä¸ºï¼šl</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š4, å…·ä½“çš„å€¼ä¸ºï¼šo</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š5, å…·ä½“çš„å€¼ä¸ºï¼š</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š6, å…·ä½“çš„å€¼ä¸ºï¼šg</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š7, å…·ä½“çš„å€¼ä¸ºï¼šo</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š8, å…·ä½“çš„å€¼ä¸ºï¼šl</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š9, å…·ä½“çš„å€¼ä¸ºï¼ša</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š10, å…·ä½“çš„å€¼ä¸ºï¼šn</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š11, å…·ä½“çš„å€¼ä¸ºï¼šg</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š12, å…·ä½“çš„å€¼ä¸ºï¼šä½ </span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š15, å…·ä½“çš„å€¼ä¸ºï¼šå¥½</span></span><br><span class="line"><span class="comment">ç´¢å¼•ä¸ºï¼š18, å…·ä½“çš„å€¼ä¸ºï¼šå•Š</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="break"><a href="#break" class="headerlink" title="break"></a>break</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum <span class="type">int</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span> ; i &lt;= <span class="number">100</span> ; i++ &#123;</span><br><span class="line">sum += i</span><br><span class="line">fmt.Println(sum)</span><br><span class="line"><span class="keyword">if</span> sum &gt;= <span class="number">300</span> &#123;</span><br><span class="line"><span class="comment">//åœæ­¢æ­£åœ¨æ‰§è¡Œçš„å¾ªç¯</span></span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="breakç»†èŠ‚"><a href="#breakç»†èŠ‚" class="headerlink" title="breakç»†èŠ‚"></a>breakç»†èŠ‚</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> <span class="comment">// switchè¯­å¥å¯ä»¥çœç•¥break</span></span><br><span class="line"><span class="number">2.</span> <span class="comment">// breakå¯ä»¥ç»“æŸæ­£åœ¨æ‰§è¡Œçš„å¾ªç¯</span></span><br><span class="line"><span class="number">3.</span> <span class="comment">// lableæ ‡ç­¾å¯ä»¥ç›´æ¥åœæ‰</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">labe2:</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line"><span class="keyword">for</span> j := <span class="number">2</span>; j &lt;= <span class="number">4</span>; j++ &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;i: %v, j: %v\n&quot;</span>, i, j)</span><br><span class="line"><span class="keyword">if</span> i ==<span class="number">2</span> &amp;&amp; j == <span class="number">2</span> &#123;</span><br><span class="line"><span class="keyword">break</span> labe2</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span> ; i &lt;= <span class="number">100</span>; i ++ &#123;</span><br><span class="line"><span class="keyword">if</span> i % <span class="number">6</span> == <span class="number">0</span> &#123;</span><br><span class="line">fmt.Println(i)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span> ; i &lt;= <span class="number">100</span>; i ++ &#123;</span><br><span class="line"><span class="keyword">if</span> i % <span class="number">6</span> != <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">continue</span> <span class="comment">// ç»“æŸæœ¬æ¬¡å¾ªç¯ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="continueç»†èŠ‚"><a href="#continueç»†èŠ‚" class="headerlink" title="continueç»†èŠ‚"></a>continueç»†èŠ‚</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç»“æŸç¦»ä»–è¿‘çš„è¿›ç¨‹</span><br><span class="line">ç„¶åç»§ç»­å¼€å§‹ä¸‹ä¸€ä¸ª</span><br></pre></td></tr></table></figure><h3 id="goto"><a href="#goto" class="headerlink" title="goto"></a>goto</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;hello g1&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="number">1</span> == <span class="number">1</span>&#123;</span><br><span class="line"><span class="keyword">goto</span> label1<span class="comment">//goto ä¸€èˆ¬é…åˆlabel1ä½¿ç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">&quot;hello g2&quot;</span>)</span><br><span class="line"></span><br><span class="line">label1:</span><br><span class="line">fmt.Println(<span class="string">&quot;hello g3&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ç»“æœ:</span></span><br><span class="line"><span class="comment">hello g1</span></span><br><span class="line"><span class="comment">hello g3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="return"><a href="#return" class="headerlink" title="return"></a>return</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++ &#123;</span><br><span class="line">fmt.Println(i)</span><br><span class="line"><span class="keyword">if</span> i == <span class="number">14</span> &#123;</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">&quot;ç»“æŸäº†å½“å‰å‡½æ•°&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å‡½æ•°"><a href="#ä¸‰ã€å‡½æ•°" class="headerlink" title="ä¸‰ã€å‡½æ•°"></a>ä¸‰ã€å‡½æ•°</h2><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> å‡½æ•°å<span class="params">(å½¢å‚åˆ—è¡¨)</span></span>(è¿”å›å€¼ç±»å‹åˆ—è¡¨)&#123;</span><br><span class="line"><span class="keyword">return</span> + è¿”å›å€¼åˆ—è¡¨</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ ·ä¾‹å®šä¹‰å‡½æ•°"><a href="#æ ·ä¾‹å®šä¹‰å‡½æ•°" class="headerlink" title="æ ·ä¾‹å®šä¹‰å‡½æ•°"></a>æ ·ä¾‹å®šä¹‰å‡½æ•°</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cal</span> <span class="params">(num1 <span class="type">int</span>, num2 <span class="type">int</span>)</span></span> (<span class="type">int</span>) &#123; <span class="comment">//å¦‚æœè¿”å›å€¼ç±»å‹åªæœ‰ä¸€ä¸ªçš„è¯ã€å¯ä»¥å»æ‰æ‹¬å·</span></span><br><span class="line"><span class="keyword">var</span> sum <span class="type">int</span> = <span class="number">0</span></span><br><span class="line">sum += num1</span><br><span class="line">sum += num2</span><br><span class="line"><span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">sum01 := cal(<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line">fmt.Println(sum01)</span><br><span class="line"></span><br><span class="line">sum02 := cal(<span class="number">30</span>,<span class="number">50</span>)</span><br><span class="line">fmt.Println(sum02)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°ç»†èŠ‚"><a href="#å‡½æ•°ç»†èŠ‚" class="headerlink" title="å‡½æ•°ç»†èŠ‚"></a>å‡½æ•°ç»†èŠ‚</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> å‡½æ•°å</span><br><span class="line">é¦–å­—æ¯ä¸ä¸ºæ•°å­—</span><br><span class="line">é¦–å­—æ¯å¤§å†™å¯ä»¥è¢«æœ¬åŒ…æ–‡ä»¶å’Œå…¶ä»–åŒ…æ–‡ä»¶ä½¿ç”¨ï¼ˆç±»ä¼¼publicï¼‰</span><br><span class="line">é¦–å­—æ¯å°å†™åªèƒ½è¢«æœ¬åŒ…æ–‡ä»¶ä½¿ç”¨ï¼ˆç±»ä¼¼privateï¼‰</span><br><span class="line"><span class="number">2.</span> å½¢å‚åˆ—è¡¨</span><br><span class="line">ä¸ªæ•°ï¼šå¯ä»¥æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯nä¸ªå‚æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯<span class="number">0</span>ä¸ªå‚æ•°</span><br><span class="line"><span class="number">3.</span> è¿”å›å€¼ç±»å‹åˆ—è¡¨</span><br><span class="line">è¿”å›<span class="number">0</span>ä¸ªï¼š</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cal</span> <span class="params">(num1 <span class="type">int</span>, num2 <span class="type">int</span>)</span></span> &#123; <span class="comment">//å¦‚æœè¿”å›å€¼ç±»å‹åªæœ‰ä¸€ä¸ªçš„è¯ã€å¯ä»¥å»æ‰æ‹¬å·</span></span><br><span class="line"><span class="keyword">var</span> sum <span class="type">int</span> = <span class="number">0</span></span><br><span class="line">sum += num1</span><br><span class="line">sum += num2</span><br><span class="line">fmt.Println(sum)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">cal(<span class="number">50</span>,<span class="number">90</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¿”å›<span class="number">1</span>ä¸ª:</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cal</span> <span class="params">(num1 <span class="type">int</span>, num2 <span class="type">int</span>)</span></span> <span class="type">int</span></span><br><span class="line"></span><br><span class="line">è¿”å›å¤šä¸ª:</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cal2</span> <span class="params">(num1 <span class="type">int</span>, num2 <span class="type">int</span>)</span></span> (<span class="type">int</span>, <span class="type">int</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å†…å­˜åˆ†æ"><a href="#å†…å­˜åˆ†æ" class="headerlink" title="å†…å­˜åˆ†æ"></a>å†…å­˜åˆ†æ</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">æ ˆ(åŸºæœ¬æ•°æ®ç±»å‹)</span><br><span class="line"></span><br><span class="line">å †(å¤æ‚æ•°æ®ç±»å‹)</span><br><span class="line"></span><br><span class="line">ä»£ç åŒº(ä»£ç æœ¬èº«)</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exchangeNum</span> <span class="params">(num1 <span class="type">int</span>, num2 <span class="type">int</span>)</span></span> (<span class="type">int</span>,<span class="type">int</span>)&#123;</span><br><span class="line"><span class="keyword">var</span> t <span class="type">int</span></span><br><span class="line">t = num1</span><br><span class="line">num1 = num2</span><br><span class="line">num2 = t</span><br><span class="line"><span class="keyword">return</span> num1,num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">n1 := <span class="number">15</span></span><br><span class="line">n2 := <span class="number">20</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;äº¤æ¢å‰n1 = %v, n2 = %v\n&quot;</span>,n1,n2)</span><br><span class="line">n1,n2 = exchangeNum(n1,n2)</span><br><span class="line">fmt.Printf(<span class="string">&quot;äº¤æ¢ån1 = %v, n2 = %v\n&quot;</span>,n1,n2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="golangä¸­ä¸æ”¯æŒé‡è½½"><a href="#golangä¸­ä¸æ”¯æŒé‡è½½" class="headerlink" title="golangä¸­ä¸æ”¯æŒé‡è½½"></a>golangä¸­ä¸æ”¯æŒé‡è½½</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">é‡è½½çš„å«ä¹‰å°±æ˜¯å¦‚æœæœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å‡½æ•°åç›¸åŒï¼Œå½¢å‚åˆ—è¡¨ä¸åŒ</span><br><span class="line">ex:</span><br><span class="line">func exchangeNum (num1 int, num2 int) (int,int)&#123;</span><br><span class="line">var t int</span><br><span class="line">t = num1</span><br><span class="line">num1 = num2</span><br><span class="line">num2 = t</span><br><span class="line">return num1,num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func exchangeNum (num1 int) (int,int)&#123;</span><br><span class="line">var t int</span><br><span class="line">t = num1</span><br><span class="line">num1 = num2</span><br><span class="line">num2 = t</span><br><span class="line">return num1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°å‚æ•°"><a href="#å‡½æ•°å‚æ•°" class="headerlink" title="å‡½æ•°å‚æ•°"></a>å‡½æ•°å‚æ•°</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">å¯å˜å‚æ•°...</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span> <span class="params">(args...<span class="type">int</span>)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(args); i++ &#123;</span><br><span class="line">fmt.Println(args[i])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">test()</span><br><span class="line">fmt.Printf(<span class="string">&quot;------------\n&quot;</span>)</span><br><span class="line">test(<span class="number">3</span>)</span><br><span class="line">test(<span class="number">37</span>,<span class="number">57</span>,<span class="number">59</span>,<span class="number">66</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ç»“æœ:</span></span><br><span class="line"><span class="comment">------------</span></span><br><span class="line"><span class="comment">3</span></span><br><span class="line"><span class="comment">37</span></span><br><span class="line"><span class="comment">57</span></span><br><span class="line"><span class="comment">59</span></span><br><span class="line"><span class="comment">66</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h5 id="å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°"><a href="#å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°" class="headerlink" title="å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°"></a>å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°æ˜¯ä¸€ç§æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">(num <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">fmt.Println(num)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a := test</span><br><span class="line"><span class="comment">//açš„ç±»å‹æ˜¯:func(int),testå‡½æ•°çš„ç±»å‹æ˜¯func(int)</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;açš„ç±»å‹æ˜¯:%T,testå‡½æ•°çš„ç±»å‹æ˜¯%T\n&quot;</span>,a , test)</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡å˜é‡å¯¹å‡½æ•°è°ƒç”¨</span></span><br><span class="line">a(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒç”¨test02çš„å‡½æ•°</span></span><br><span class="line">test02(<span class="number">10</span>,<span class="number">3.19</span>,test)</span><br><span class="line">test02(<span class="number">10</span>,<span class="number">3.19</span>,a)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰æ•°æ®ç±»å‹"><a href="#è‡ªå®šä¹‰æ•°æ®ç±»å‹" class="headerlink" title="è‡ªå®šä¹‰æ•°æ®ç±»å‹"></a>è‡ªå®šä¹‰æ•°æ®ç±»å‹</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">åˆ©ç”¨ <span class="keyword">type</span> å…³é”®å­—</span><br><span class="line"><span class="keyword">type</span> myInt=<span class="type">int</span> <span class="comment">//èµ·åˆ«å</span></span><br><span class="line"><span class="keyword">type</span> myFloat <span class="type">float32</span> <span class="comment">// è‡ªå®šä¹‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> num1 myInt = <span class="number">30</span></span><br><span class="line"><span class="keyword">var</span> num2 myFloat = <span class="number">2.75</span></span><br><span class="line">fmt.Println(num1,num2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹å‡½æ•°è¿”å›å€¼å‘½å</span></span><br><span class="line"><span class="comment">// ç‰¹åˆ«æ³¨æ„çš„æ˜¯è¿™é‡Œä¸è¦å¸¦ :=</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test05</span><span class="params">(num1 <span class="type">int</span>, num2 <span class="type">int</span>)</span></span>(resSum <span class="type">int</span>,resSub <span class="type">int</span>) &#123;</span><br><span class="line">resSum = num1 + num2</span><br><span class="line">resSub = num1 - num2</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="initå‡½æ•°"><a href="#initå‡½æ•°" class="headerlink" title="initå‡½æ•°"></a>initå‡½æ•°</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230312102623383.png" alt="image-20230312102623383"></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// init å‡½æ•°æ€»æ˜¯ä¸€å¼€å§‹å°±è¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;demo09/testutil&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;test å‡½æ•°è¢«æ‰§è¡Œ&quot;</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num <span class="type">int</span> = test()<span class="comment">// å…¨å±€å˜é‡å…ˆè¢«æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;main.go ä¸­ init å‡½æ•°è¢«æ‰§è¡Œ&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;main å‡½æ•°è¢«æ‰§è¡Œ&quot;</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Age= %v, Sex= %s, Name= %s&quot;</span>, testutil.Age, testutil.Sex, testutil.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">testutil.go ä¸­ init å‡½æ•°è¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">test å‡½æ•°è¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">main.go ä¸­ init å‡½æ•°è¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">main å‡½æ•°è¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">Age= 19, Sex= å¥³, Name= å°å©µ</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">åœ¨å°è¯•å¯¼å…¥ä¸€ä¸ªåŒ…çš„æ—¶å€™ä¼šå‘ç°</span></span><br><span class="line"><span class="comment">initå‡½æ•°æ˜¯ç°åœ¨å…¨å±€å˜é‡ä¹‹åè¢«æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h3><h4 id="åŸºç¡€ä½¿ç”¨"><a href="#åŸºç¡€ä½¿ç”¨" class="headerlink" title="åŸºç¡€ä½¿ç”¨"></a>åŸºç¡€ä½¿ç”¨</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// å®šä¹‰åŒ¿åå‡½æ•°</span></span><br><span class="line">result := <span class="function"><span class="keyword">func</span> <span class="params">(num1 <span class="type">int</span>, num2 <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;è°ƒç”¨äº†åŒ¿åå‡½æ•°&quot;</span>)</span><br><span class="line"><span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;(<span class="number">10</span>,<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">fmt.Println(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">&quot;----------------&quot;</span>)</span><br><span class="line"></span><br><span class="line">sub := <span class="function"><span class="keyword">func</span> <span class="params">(num1 <span class="type">int</span>, num2 <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"><span class="keyword">return</span> num1 - num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(sub(<span class="number">10</span>,<span class="number">20</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="deferå…³é”®å­—"><a href="#deferå…³é”®å­—" class="headerlink" title="deferå…³é”®å­—"></a>deferå…³é”®å­—</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(add(<span class="number">30</span>,<span class="number">60</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(num1 <span class="type">int</span>, num2 <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line"><span class="comment">// ä¸ä¼šç«‹å³æ‰§è¡Œdeferä¹‹åçš„è¯­å¥ï¼ŒäºŒåå°†deferå‹å…¥ä¸€ä¸ªæ ˆä¸­ï¼Œç„¶åç»§ç»­æ‰§è¡Œå‡½æ•°åé¢çš„è¯­å¥</span></span><br><span class="line"><span class="comment">// æ ˆçš„ç‰¹ç‚¹ï¼šå…ˆè¿›åå‡º</span></span><br><span class="line"><span class="keyword">defer</span> fmt.Println(<span class="string">&quot;num1=&quot;</span>,num1)</span><br><span class="line"><span class="keyword">defer</span> fmt.Println(<span class="string">&quot;num2=&quot;</span>,num2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sum <span class="type">int</span> = num1 + num2</span><br><span class="line">fmt.Println(<span class="string">&quot;sum=&quot;</span>,sum)</span><br><span class="line"><span class="keyword">return</span> sum</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="deferåº”ç”¨åœºæ™¯"><a href="#deferåº”ç”¨åœºæ™¯" class="headerlink" title="deferåº”ç”¨åœºæ™¯"></a>deferåº”ç”¨åœºæ™¯</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚æƒ³è¦å…³é—­æŸä¸ªä½¿ç”¨çš„èµ„æºï¼Œåˆ™åœ¨ä½¿ç”¨çš„æ—¶å€™ç›´æ¥éšæ‰‹<span class="keyword">defer</span>ï¼Œå› ä¸º<span class="keyword">defer</span>æœ‰å»¶è¿Ÿæ‰§è¡Œæœºåˆ¶</span><br><span class="line">(å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åå†æ‰§è¡Œ<span class="keyword">defer</span>å‹å…¥æ ˆçš„æœºåˆ¶)</span><br><span class="line">æ‰€ä»¥ç”¨å®Œéšæ‰‹å†™ä¸ªå…³é—­ï¼Œæ¯”è¾ƒçœäº‹</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²å‡½æ•°ï¼ï¼ï¼"><a href="#å­—ç¬¦ä¸²å‡½æ•°ï¼ï¼ï¼" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°ï¼ï¼ï¼"></a>å­—ç¬¦ä¸²å‡½æ•°ï¼ï¼ï¼</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;strconv&quot;</span></span><br><span class="line"><span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">str := <span class="string">&quot;golangä½ å¥½&quot;</span></span><br><span class="line"><span class="comment">//æ–¹å¼1ï¼šåˆ©ç”¨ range</span></span><br><span class="line"><span class="keyword">for</span> i ,value := <span class="keyword">range</span> str &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;ç´¢å¼•ä¸ºï¼š%d,å…·ä½“çš„å€¼ä¸ºï¼š%c \n&quot;</span>, i, value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹å¼2 ï¼šåˆ©ç”¨ r := []rune(str)</span></span><br><span class="line">r := []<span class="type">rune</span>(str)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(r); i++ &#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%c&quot;</span>,r[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­—ç¬¦ä¸²è½¬æ•´æ•°</span></span><br><span class="line">num1,_ := strconv.Atoi(<span class="string">&quot;666&quot;</span>)</span><br><span class="line">fmt.Println(num1)<span class="comment">//666</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•´æ•°è½¬å­—ç¬¦ä¸²</span></span><br><span class="line">str1 := strconv.Itoa(<span class="number">88</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%v&quot;</span>,str1)<span class="comment">// 88</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²é‡Œæœ‰å‡ ä¸ªæŒ‡å®šçš„å­—ä¸²</span></span><br><span class="line">count := strings.Count(<span class="string">&quot;golangbeihaibei.com&quot;</span>,<span class="string">&quot;bei&quot;</span>)</span><br><span class="line">fmt.Println(count)<span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾å­ä¸²æ˜¯å¦åœ¨æŒ‡å®šçš„å­—ç¬¦ä¸²ä¸­</span></span><br><span class="line">beiStr := strings.Contains(<span class="string">&quot;golangbeihaiaaaa&quot;</span>,<span class="string">&quot;beihai&quot;</span>)</span><br><span class="line">fmt.Println(beiStr) <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸åŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ä¸²æ¯”è¾ƒ ---&gt; é¡¹ç›®ä¸­å¯†ç ï¼Œæˆ–è€…ç”¨æˆ·åçš„å¯¹æ¯”</span></span><br><span class="line">userName := strings.EqualFold(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;HELLO&quot;</span>)</span><br><span class="line">fmt.Println(userName) <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒºåˆ†å¤§å°å†™æ¯”è¾ƒ</span></span><br><span class="line">fmt.Println(<span class="string">&quot;hello&quot;</span> == <span class="string">&quot;HELLO&quot;</span>) <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›å­—ä¸²åœ¨å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•å€¼</span></span><br><span class="line">inDex := strings.Index(<span class="string">&quot;golangbeihaibei&quot;</span>,<span class="string">&quot;bei&quot;</span>)</span><br><span class="line">fmt.Println(inDex)<span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦ä¸²æ›¿æ¢</span></span><br><span class="line"><span class="comment">// è¿™é‡Œæœ€åä¸€é¡¹ -1:å…¨éƒ¨æ›¿æ¢2:æ›¿æ¢ä¸¤ä¸ª</span></span><br><span class="line">rePlace := strings.Replace(<span class="string">&quot;golangbeihaibei&quot;</span>,<span class="string">&quot;bei&quot;</span>,<span class="string">&quot;666&quot;</span>, <span class="number">-1</span>)</span><br><span class="line">fmt.Println(rePlace)</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ‡åˆ†</span></span><br><span class="line">sPlit := strings.Split(<span class="string">&quot;go-lang-bei-hai-bei&quot;</span>,<span class="string">&quot;-&quot;</span>)</span><br><span class="line">fmt.Println(sPlit)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¤§å°å†™åˆ‡æ¢</span></span><br><span class="line">fmt.Println(strings.ToLower(<span class="string">&quot;Go&quot;</span>))</span><br><span class="line">fmt.Println(strings.ToUpper(<span class="string">&quot;go&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//å­—ç¬¦ä¸²å·¦å³ä¸¤è¾¹çš„ç©ºæ ¼å»æ‰</span></span><br><span class="line">fmt.Println(strings.TrimSpace(<span class="string">&quot;go lang &quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†å­—ç¬¦ä¸²å·¦å³ä¸¤è¾¹æŒ‡å®šçš„å­—ç¬¦å»æ‰</span></span><br><span class="line">fmt.Println(strings.Trim(<span class="string">&quot;~golang~&quot;</span>,<span class="string">&quot;~&quot;</span>))</span><br><span class="line"><span class="comment">//å°†å­—ç¬¦ä¸²å·¦è¾¹æŒ‡å®šçš„å­—ç¬¦å»æ‰</span></span><br><span class="line">fmt.Println(strings.TrimLeft(<span class="string">&quot;~golang~&quot;</span>,<span class="string">&quot;~&quot;</span>))</span><br><span class="line"><span class="comment">//å°†å­—ç¬¦ä¸²å³è¾¹æŒ‡å®šçš„å­—ç¬¦å»æ‰</span></span><br><span class="line">fmt.Println(strings.TrimRight(<span class="string">&quot;~golang~&quot;</span>,<span class="string">&quot;~&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå­—ç¬¦ä¸²å¼€å¤´</span></span><br><span class="line">fmt.Println(strings.HasPrefix(<span class="string">&quot;https://blog.csdn.net&quot;</span>,<span class="string">&quot;https&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå­—ç¬¦ä¸²ç»“æŸ</span></span><br><span class="line">fmt.Println(strings.HasSuffix(<span class="string">&quot;demo.png&quot;</span>,<span class="string">&quot;.jpg&quot;</span>))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ—¥æœŸå’Œæ—¶é—´å‡½æ•°"><a href="#æ—¥æœŸå’Œæ—¶é—´å‡½æ•°" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´å‡½æ•°"></a>æ—¥æœŸå’Œæ—¶é—´å‡½æ•°</h3><p><a href="https://blog.csdn.net/Dorgan/article/details/128248547">https://blog.csdn.net/Dorgan/article/details/128248547</a></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">éœ€è¦å¯¼åŒ… time</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">now := time.Now()</span><br><span class="line">fmt.Println(now)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%T\n&quot;</span>,now)</span><br><span class="line">fmt.Printf(<span class="string">&quot;å¹´ï¼š%v\t&quot;</span>,now.Year())</span><br><span class="line">fmt.Printf(<span class="string">&quot;æœˆï¼š%v\t&quot;</span>,<span class="type">int</span>(now.Month()))</span><br><span class="line">fmt.Printf(<span class="string">&quot;æ—¥ï¼š%v\t&quot;</span>,now.Day())</span><br><span class="line">fmt.Printf(<span class="string">&quot;æ—¶ï¼š%v\t&quot;</span>,now.Hour())</span><br><span class="line">fmt.Printf(<span class="string">&quot;åˆ†ï¼š%v\t&quot;</span>,now.Minute())</span><br><span class="line">fmt.Printf(<span class="string">&quot;ç§’ï¼š%v\t&quot;</span>,now.Second())</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ—¥æœŸçš„æ ¼å¼åŒ–"><a href="#æ—¥æœŸçš„æ ¼å¼åŒ–" class="headerlink" title="æ—¥æœŸçš„æ ¼å¼åŒ–"></a>æ—¥æœŸçš„æ ¼å¼åŒ–</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fmt.Printf(<span class="string">&quot;è·å–å½“å‰å¹´æœˆæ—¥: %d-%d-%d æ—¶åˆ†ç§’: %d:%d:%d \n&quot;</span>,now.Year(),<span class="type">int</span>(now.Month()),now.Day(),now.Hour(),now.Minute(),now.Second())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fmt.Println(now.Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>))</span><br><span class="line">è¿™é‡Œ<span class="number">2006</span>çš„æ—¶é—´æ˜¯å›ºå®š</span><br></pre></td></tr></table></figure><h3 id="å†…ç½®å‡½æ•°"><a href="#å†…ç½®å‡½æ•°" class="headerlink" title="å†…ç½®å‡½æ•°"></a>å†…ç½®å‡½æ•°</h3><h4 id="lenå‡½æ•°"><a href="#lenå‡½æ•°" class="headerlink" title="lenå‡½æ•°"></a>lenå‡½æ•°</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str := <span class="string">&quot;beihai&quot;</span></span><br><span class="line"><span class="built_in">println</span>(<span class="built_in">len</span>(str))<span class="comment">// 6</span></span><br></pre></td></tr></table></figure><h4 id="newå‡½æ•°"><a href="#newå‡½æ•°" class="headerlink" title="newå‡½æ•°"></a>newå‡½æ•°</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">num := <span class="built_in">new</span>(<span class="type">int</span>)</span><br><span class="line">fmt.Printf(<span class="string">&quot;numçš„ç±»å‹:%T,numçš„å€¼æ˜¯:%v,numçš„åœ°å€:%v,numæŒ‡é’ˆæŒ‡å‘çš„å€¼æ˜¯:%v&quot;</span>,</span><br><span class="line">num,num,&amp;num,*num)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¿è¡Œç»“æœï¼š</span></span><br><span class="line"><span class="comment">numçš„ç±»å‹:*int,numçš„å€¼æ˜¯:0xc00000e0a8,numçš„åœ°å€:0xc00000a028,numæŒ‡é’ˆæŒ‡å‘çš„å€¼æ˜¯:0</span></span><br><span class="line"><span class="comment">å€¼æ˜¯:0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h2 id="å››ã€åŒ…"><a href="#å››ã€åŒ…" class="headerlink" title="å››ã€åŒ…"></a>å››ã€åŒ…</h2><h3 id="åŒ…äº§ç”Ÿçš„åŸå› "><a href="#åŒ…äº§ç”Ÿçš„åŸå› " class="headerlink" title="åŒ…äº§ç”Ÿçš„åŸå› "></a>åŒ…äº§ç”Ÿçš„åŸå› </h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>).æˆ‘ä»¬ä¸è‚¯èƒ½å°†æ‰€æœ‰å‡½æ•°æ”¾åœ¨åŒä¸€ä¸ªæºæ–‡ä»¶ä¸­ï¼Œå¯ä»¥åˆ†é—¨åˆ«ç±»å°†å‡½æ•°æ”¾åœ¨ä¸åŒçš„æºæ–‡ä»¶ä¸­</span><br><span class="line"><span class="number">1.</span> <span class="comment">//main.go ä¸»è¦ç”¨äºä¸»å‡½æ•°å…¥å£</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> <span class="comment">// utils.go ä¸“é—¨å®šä¹‰ä¸€äº›å·¥å…·å‡½æ•°ï¼Œè®©å…¶ä»–æ–‡ä»¶æ¥è°ƒç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> <span class="comment">// db.go ä¸“é—¨å®šä¹‰å¯¹æ•°æ®åº“æ“ä½œçš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getConnection</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line">(<span class="number">2</span>).è§£å†³åŒåé—®é¢˜ï¼Œä¸¤äººéƒ½æƒ³å®šä¹‰ä¸€ä¸ªåŒåå‡½æ•°ï¼Œä¸èƒ½æ”¾åœ¨åŒä¸€æ–‡ä»¶ä¸‹ï¼Œè¿™æ—¶å¯ä»¥ç”¨ä¸åŒåŒ…æ¥è¡¨ç¤º</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20230312095852147.png" alt="image-20230312095852147"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œgo.mod éœ€è¦ä½¿ç”¨ go mod init crmæ¥åˆ›å»º</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.go</span></span><br><span class="line"><span class="keyword">package</span> main<span class="comment">// 1.packageè¿›è¡ŒåŒ…çš„å£°æ˜ï¼Œå»ºè®®ï¼šåŒ…å£°æ˜å’Œæ‰€åœ¨åŒ…åŒå</span></span><br><span class="line"><span class="comment">// 2.mainåŒ…æ˜¯ç¨‹åºçš„å…¥å£åŒ…ã€Šä¸€èˆ¬mainå‡½æ•°ä¼šæ”¾åœ¨è¿™ä¸ªåŒ…ä¸‹</span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;crm/dbutils&quot;</span></span><br><span class="line"><span class="string">&quot;crm/calutils&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;ä½ å¥½,è¿™æ˜¯mainå‡½æ•°çš„æ‰§è¡Œ&quot;</span>)</span><br><span class="line">dbutils.GetConn()</span><br><span class="line">aaa.Add()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// dbutils</span></span><br><span class="line"><span class="keyword">package</span> dbutils</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetConn</span><span class="params">()</span></span> &#123;<span class="comment">// é¦–å­—æ¯å¤§å†™ï¼Œå¯ä»¥è¢«å…¶ä»–åŒ…è®¿é—®</span></span><br><span class="line">fmt.Println(<span class="string">&quot;æ‰§è¡Œäº†dbutilsåŒ…ä¸‹çš„getConnå‡½æ•°çš„æ‰§è¡Œ&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// aaa.go</span></span><br><span class="line"><span class="keyword">package</span> aaa</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Add</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;add å‡½æ•°è¢«æ‰§è¡Œäº†&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// go mod</span></span><br><span class="line">module crm</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.20</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½ å¥½,è¿™æ˜¯mainå‡½æ•°çš„æ‰§è¡Œ</span><br><span class="line">æ‰§è¡Œäº†dbutilsåŒ…ä¸‹çš„getConnå‡½æ•°çš„æ‰§è¡Œ</span><br><span class="line">add å‡½æ•°è¢«æ‰§è¡Œäº†</span><br></pre></td></tr></table></figure><h3 id="åŒ…åˆ«å"><a href="#åŒ…åˆ«å" class="headerlink" title="åŒ…åˆ«å"></a>åŒ…åˆ«å</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main<span class="comment">// 1.packageè¿›è¡ŒåŒ…çš„å£°æ˜ï¼Œå»ºè®®ï¼šåŒ…å£°æ˜å’Œæ‰€åœ¨åŒ…åŒå</span></span><br><span class="line"><span class="comment">// 2.mainåŒ…æ˜¯ç¨‹åºçš„å…¥å£åŒ…ã€Šä¸€èˆ¬mainå‡½æ•°ä¼šæ”¾åœ¨è¿™ä¸ªåŒ…ä¸‹</span></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;crm/dbutils&quot;</span></span><br><span class="line">test <span class="string">&quot;crm/calutils&quot;</span> <span class="comment">// ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;ä½ å¥½,è¿™æ˜¯mainå‡½æ•°çš„æ‰§è¡Œ&quot;</span>)</span><br><span class="line">dbutils.GetConn()</span><br><span class="line">test.Add() <span class="comment">// ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">é—­åŒ…å°±æ˜¯ä¸€ä¸ªå‡½æ•°å’Œä¸å…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆçš„ä¸€ä¸ªæ•´ä½“ ï¼Œåªæ˜¯è¿™ä¸ªå‡½æ•°å¼•å…¥å¤–ç•Œçš„å˜é‡/å‚æ•°</span><br><span class="line">é—­åŒ…çš„æœ¬è´¨ï¼š</span><br><span class="line">é—­åŒ…æœ¬è´¨æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œåªæ˜¯è¿™ä¸ªå‡½æ•°å¼•å…¥å¤–ç•Œçš„å˜é‡/å‚æ•°</span><br><span class="line">åŒ¿åå‡½æ•°+å¼•ç”¨çš„å˜é‡/å‚æ•° = é—­åŒ…</span><br></pre></td></tr></table></figure><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> åŒ¿åå‡½æ•°ä¸­å¼•ç”¨çš„é‚£ä¸ªå˜é‡ä¼šä¸€ç›´ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥ä¸€ç›´ä½¿ç”¨ ---&gt; å¯¹å†…å­˜æ¶ˆè€—å·¨å¤§</span><br><span class="line"> è·Ÿæ™®é€šçš„æ–¹æ³•å¯ä¸ä¸€æ ·</span><br><span class="line"> ä¾‹å¦‚ï¼š</span><br><span class="line"> <span class="comment">// æ™®é€šæ–¹æ³•æ¯æ¬¡è°ƒç”¨éƒ½ä¸èƒ½ç´¯åŠ </span></span><br><span class="line"> <span class="function"><span class="keyword">func</span> <span class="title">getSum</span><span class="params">(num1 <span class="type">int</span>)</span></span> (<span class="type">int</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> sum <span class="type">int</span> = <span class="number">0</span></span><br><span class="line">sum += num1</span><br><span class="line"><span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é—­åŒ…æ–¹æ³•å¯ä»¥ç´¯åŠ </span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getSum</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span> <span class="params">(<span class="type">int</span>)</span></span> (<span class="type">int</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> sum <span class="type">int</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span> <span class="params">(num <span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">        sum = sum + num</span><br><span class="line">        <span class="keyword">return</span> sum</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äº”ã€é”™è¯¯å¤„ç†"><a href="#äº”ã€é”™è¯¯å¤„ç†" class="headerlink" title="äº”ã€é”™è¯¯å¤„ç†"></a>äº”ã€é”™è¯¯å¤„ç†</h2><p>æ•è·æœºåˆ¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defer + recover</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">test()</span><br><span class="line">fmt.Println(<span class="string">&quot;é€»è¾‘æˆåŠŸï¼Œå¼€å§‹æ‰§è¡Œä¸‹é¢ä»£ç ......&quot;</span>)</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="number">5</span> + <span class="number">7</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// è°ƒç”¨recoverå†…ç½®å‡½æ•°ï¼Œå¯ä»¥æ•è·é”™è¯¯ï¼š</span></span><br><span class="line">err := <span class="built_in">recover</span>()</span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰æ•è·é”™è¯¯ï¼Œè¿”å›å€¼ä¸ºé›¶å€¼: nil</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;é”™è¯¯å·²ç»æ•è·&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;erræ˜¯: &quot;</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;()</span><br><span class="line">num1 := <span class="number">10</span></span><br><span class="line">num2 := <span class="number">0</span><span class="comment">//è¿™é‡Œæ˜¯é”™è¯¯çš„</span></span><br><span class="line">result := num1 / num2</span><br><span class="line">fmt.Println(result)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é”™è¯¯å·²ç»æ•è·</span></span><br><span class="line"><span class="comment">erræ˜¯:  runtime error: integer divide by zero</span></span><br><span class="line"><span class="comment">é€»è¾‘æˆåŠŸï¼Œå¼€å§‹æ‰§è¡Œä¸‹é¢ä»£ç ......</span></span><br><span class="line"><span class="comment">12</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="è‡ªå®šä¹‰é”™è¯¯"><a href="#è‡ªå®šä¹‰é”™è¯¯" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯"></a>è‡ªå®šä¹‰é”™è¯¯</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">error</span>åŒ…ä¸‹çš„Newå‡½æ•°</span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;errors&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">err := test()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;è‡ªå®šä¹‰é”™è¯¯: &quot;</span>,err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">&quot;ä¸Šé¢çš„é™¤æ³•æ“ä½œæ‰§è¡ŒæˆåŠŸ...&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;æ­£å¸¸æ‰§è¡Œä¸‹é¢çš„é€»è¾‘...&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">test</span><span class="params">()</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">num1 := <span class="number">10</span></span><br><span class="line">num2 := <span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> num2 == <span class="number">0</span> &#123;</span><br><span class="line"><span class="comment">//æŠ›å‡ºè‡ªå®šä»¥é”™è¯¯ï¼š</span></span><br><span class="line"><span class="keyword">return</span> errors.New(<span class="string">&quot;é™¤æ•°ä¸èƒ½ä¸º0å“¦~~~&quot;</span>)</span><br><span class="line">        <span class="built_in">panic</span>(err)</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">result := num1 / num2</span><br><span class="line">fmt.Println(result)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹å­¦ä¹  </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®æŠ½å–</title>
      <link href="/2022/12/10/%E6%95%B0%E6%8D%AE%E6%8A%BD%E5%8F%96/"/>
      <url>/2022/12/10/%E6%95%B0%E6%8D%AE%E6%8A%BD%E5%8F%96/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®æŠ½å–"><a href="#æ•°æ®æŠ½å–" class="headerlink" title="æ•°æ®æŠ½å–"></a>æ•°æ®æŠ½å–</h1><p>æ•°æ®æŠ½å–åˆ†ä¸ºå…¨é‡æ•°æ®æŠ½å–ï¼Œå’Œå¢é‡æ•°æ®æŠ½å–<br>å…¨é‡å°±æ˜¯è®²æºæ•°æ®å…¨éƒ¨æŠ½å–åˆ°ç›®æ ‡æ•°æ®åœ°ï¼Œ<br>å¢é‡æ•°æ®æŠ½å–å°±æ˜¯æœ‰æ¡ä»¶æ€§çš„æŠ½å–ï¼Œ<br>è¿™é‡ŒæŠ½å–æ—¶å€™å¯ä»¥ç”¨åˆ°ä¸€ä¸ªå·¥å…·Sqoop</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ hive é‡Œé¢æˆªå›¾çš„æ—¶å€™æœ€å¥½è®¾ç½®ä¸Š</span><br><span class="line"></span><br><span class="line"># ä»…ä¸Šé¢ä¸€è¡Œè¾“å‡ºçš„æ˜¯è¡¨å.åˆ—å</span><br><span class="line"><span class="keyword">set</span> hive.cli.print.header<span class="operator">=</span><span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"># ä¸æ˜¾ç¤ºè¡¨åï¼Œåªæ˜¾ç¤ºåˆ—å</span><br><span class="line"><span class="keyword">set</span> hive.resultset.use.unique.column.names<span class="operator">=</span><span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"># æ˜¾ç¤ºå½“å‰æ•°æ®åº“</span><br><span class="line"><span class="keyword">set</span> hive.cli.print.current.db <span class="operator">=</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="ä¸€-åˆ©ç”¨SqoopæŠ½å–"><a href="#ä¸€-åˆ©ç”¨SqoopæŠ½å–" class="headerlink" title="ä¸€.åˆ©ç”¨SqoopæŠ½å–"></a>ä¸€.åˆ©ç”¨SqoopæŠ½å–</h2><h3 id="å…¨é‡æ•°æ®æŠ½å–ï¼š"><a href="#å…¨é‡æ•°æ®æŠ½å–ï¼š" class="headerlink" title="å…¨é‡æ•°æ®æŠ½å–ï¼š"></a>å…¨é‡æ•°æ®æŠ½å–ï¼š</h3><p>å¯¹äºå…¨é‡æŠ½å–æ¥è¯´ä¸€ç‚¹ä¹Ÿä¸éš¾ï¼Œä½†æ˜¯éå¸¸å®¹æ˜“å‡ºé”™ï¼Œæˆ‘æœ‰å‡ ä¸ªç»å¸¸å¿˜è®°çš„ç‚¹ï¼š</p><ul><li>ä¸è¦å¿˜è®°å¢åŠ targrt-dirè¿™ä¸ªé…ç½®é¡¹,ï¼Œè¿™ä¸ªä¸»è¦ä½œç”¨æ˜¯sqoopå…ˆä¼ åˆ°hdfsä¸Šé¢ç„¶åä»hdfså¯¼å…¥åˆ°hiveè¡¨ä¸­ï¼Œæ‰€ä»¥è¿™é¡¹ä¸èƒ½æ‰</li><li>driveré…ç½®é¡¹éœ€è¦åŠ ä¸Š</li></ul><p><strong>æŠ½å–shtd_storeåº“ä¸­CUSTOMERçš„å…¨é‡æ•°æ®è¿›å…¥Hiveçš„odsåº“ä¸­è¡¨customerã€‚å­—æ®µæ’åºã€ç±»å‹ä¸å˜ï¼ŒåŒæ—¶æ·»åŠ é™æ€åˆ†åŒºï¼Œåˆ†åŒºå­—æ®µç±»å‹ä¸ºStringï¼Œä¸”å€¼ä¸ºå½“å‰æ¯”èµ›æ—¥çš„å‰ä¸€å¤©æ—¥æœŸï¼ˆåˆ†åŒºå­—æ®µæ ¼å¼ä¸ºyyyyMMddï¼‰ã€‚å¹¶åœ¨hive cliæ‰§è¡Œshow partitions ods.customerå‘½ä»¤ï¼Œå°†ç»“æœæˆªå›¾å¤åˆ¶ç²˜è´´è‡³å¯¹åº”æŠ¥å‘Šä¸­</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">bin<span class="operator">/</span>sqoop import \</span><br><span class="line"><span class="comment">--connect jdbc:mysql://bigdata1:3306/shtd_store \</span></span><br><span class="line"><span class="comment">--driver com.mysql.jdbc.Driver \</span></span><br><span class="line"><span class="comment">--username root \</span></span><br><span class="line"><span class="comment">--password 123456 \</span></span><br><span class="line"><span class="comment">--table CUSTOMER \</span></span><br><span class="line"><span class="comment">--fields-terminated-by &#x27;|&#x27; \</span></span><br><span class="line"><span class="comment">--target-dir /sqoop/o1 \</span></span><br><span class="line"><span class="comment">--hive-import \</span></span><br><span class="line"><span class="comment">--hive-overwrite \</span></span><br><span class="line"><span class="comment">--hive-table &#x27;ods.customer&#x27; \</span></span><br><span class="line"><span class="comment">--hive-partition-key etldate \</span></span><br><span class="line"><span class="comment">--hive-partition-value 20221209 \</span></span><br><span class="line"><span class="comment">--m 1</span></span><br><span class="line"></span><br><span class="line">bin<span class="operator">/</span>sqoop import \</span><br><span class="line"><span class="comment">--connect jdbc:mysql://bigdata1:3306/shtd_store \</span></span><br><span class="line"><span class="comment">--driver com.mysql.jdbc.Driver \</span></span><br><span class="line"><span class="comment">--username root \</span></span><br><span class="line"><span class="comment">--password 123456 \</span></span><br><span class="line"><span class="comment">--table NATION \</span></span><br><span class="line"><span class="comment">--fields-terminated-by &#x27;|&#x27; \</span></span><br><span class="line"><span class="comment">--target-dir /sqoop/o1 \</span></span><br><span class="line"><span class="comment">--hive-import \</span></span><br><span class="line"><span class="comment">--hive-overwrite \</span></span><br><span class="line"><span class="comment">--hive-table &#x27;ods.NATION&#x27; \</span></span><br><span class="line"><span class="comment">--hive-partition-key etldate \</span></span><br><span class="line"><span class="comment">--hive-partition-value 20221209 \</span></span><br><span class="line"><span class="comment">--m 1</span></span><br></pre></td></tr></table></figure><p>æ€»ä½“æ¥è¯´ä¸éš¾ï¼Œä½†æ˜¯è¦æ³¨æ„ç»†èŠ‚åˆ«çœ‹é”™é¢˜ç›®ç›´æ¥å¿½ç•¥äº†å¢é‡æŠ½å–ï¼Œè¿™ä¸€éƒ¨åˆ†æˆ‘ç”¨sparkåšçš„æ—¶å€™æ€»ä¼šå‡ºç°é”™è¯¯ï¼Œå¤§éƒ¨åˆ†æ˜¯å› ä¸ºspark3.0æœ‰ç‚¹ä¸ç¨³å®šï¼Œæ¯”èµ›æœ€å¥½è¿˜æ˜¯sqoopæ¥æŠ½å–å§</p><h3 id="å¢é‡æ•°æ®æŠ½å–"><a href="#å¢é‡æ•°æ®æŠ½å–" class="headerlink" title="å¢é‡æ•°æ®æŠ½å–"></a>å¢é‡æ•°æ®æŠ½å–</h3><p>è¿™éƒ¨åˆ†æœ‰ç‚¹éš¾åº¦ï¼Œä¸»è¦è¿˜æ˜¯ç»ƒçš„å°‘ï¼Œå¹³æ—¶å«Œéº»çƒ¦å°±æ²¡æœ‰å¾€hiveè¡¨é‡Œå¯¼æ•°æ®ï¼Œè¿™é‡Œå¯ä»¥å…ˆç”¨sqoopå¾€hiveåŸè¡¨é‡Œé¢æç‚¹åŸå§‹æ•°æ®ï¼Œè¿™é‡Œhiveé‡Œé¢çš„åŸè¡¨åº”è¯¥æœ‰åˆ†åŒºè¿™é‡Œä¸€å¾‹è®¾ç½®ä¸ºetldate=20221210</p><p>å…¶å®æœ€å¥½ç”¨çš„æ–¹æ³•è¿˜æ˜¯ç”¨sparksqlæ¥å†™ï¼Œä½†æ˜¯æ‰“åŒ…ä¸Šé›†ç¾¤å¤ªéº»çƒ¦äº†</p><h4 id="ç¬¬ä¸€ç§åŠ¨æ€åˆ†åŒºå¹¶è®¾ç½®å­—æ®µå†…å®¹"><a href="#ç¬¬ä¸€ç§åŠ¨æ€åˆ†åŒºå¹¶è®¾ç½®å­—æ®µå†…å®¹" class="headerlink" title="ç¬¬ä¸€ç§åŠ¨æ€åˆ†åŒºå¹¶è®¾ç½®å­—æ®µå†…å®¹"></a>ç¬¬ä¸€ç§åŠ¨æ€åˆ†åŒºå¹¶è®¾ç½®å­—æ®µå†…å®¹</h4><blockquote><p><strong>æŠ½å–shtd_storeåº“ä¸­ORDERSçš„å¢é‡æ•°æ®è¿›å…¥Hiveçš„odsåº“ä¸­è¡¨ordersï¼Œè¦æ±‚åªå–1996å¹´07æœˆ02åŠä¹‹åçš„æ•°æ®ï¼ˆåŒ…æ‹¬1996å¹´07æœˆ02ï¼‰ï¼Œå¯¹æ¯”MySQLå’ŒHiveä¸­çš„è¡¨çš„ORDERKEYå¤§å°ï¼Œæ ¹æ®ORDERSè¡¨ä¸­ORDERKEYä½œä¸ºå¢é‡å­—æ®µï¼Œåªå°†æ–°å¢çš„æ•°æ®æŠ½å…¥ï¼Œå­—æ®µç±»å‹ä¸å˜ï¼ŒåŒæ—¶æ·»åŠ åŠ¨æ€åˆ†åŒºï¼Œåˆ†åŒºå­—æ®µç±»å‹ä¸ºStringï¼Œä¸”å€¼ä¸ºORDERDATEå­—æ®µçš„å†…å®¹ï¼ˆORDERDATEçš„æ ¼å¼ä¸ºyyyy-MM-ddï¼Œåˆ†åŒºå­—æ®µæ ¼å¼ä¸ºyyyyMMddï¼‰ï¼Œå¹¶åœ¨hive cliæ‰§è¡Œselect count(distinct(etldate)) from  ods.orderså‘½ä»¤ï¼Œå°†Sqoopæäº¤å‘½ä»¤åŠhive cliçš„æ‰§è¡Œç»“æœåˆ†åˆ«æˆªå›¾å¤åˆ¶ç²˜è´´è‡³å¯¹åº”æŠ¥å‘Šä¸­ï¼›</strong></p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">ä¸€.å…ˆä¼ªé€ åŸå§‹æ•°æ®</span><br><span class="line"></span><br><span class="line">è¿™é‡Œå‡è®¾ordersçš„å¢é‡å­—æ®µorderkeyä¸º<span class="number">800000</span>ï¼Œæ‰€ä»¥è¦å…ˆæŠŠ<span class="number">800000</span>ä¹‹å‰çš„æ•°æ®æŠ½å–åˆ°hiveä¸­</span><br><span class="line">è¿™é‡Œåˆ«å¿˜äº†æŠŠorderkeyè½¬æ¢æˆ<span class="type">int</span>ç±»å‹è¦ä¸ç„¶é»˜è®¤æ˜¯stringç±»å‹å°±å®Œè›‹äº†ï¼Œå…¨æŠ½è¿‡å»äº†</span><br><span class="line"></span><br><span class="line">bin<span class="operator">/</span>sqoop import \</span><br><span class="line"><span class="comment">--connect jdbc:mysql://bigdata1:3306/shtd_store \</span></span><br><span class="line"><span class="comment">--username root \</span></span><br><span class="line"><span class="comment">--password 123456 \</span></span><br><span class="line"><span class="comment">--driver com.mysql.jdbc.Driver \</span></span><br><span class="line"><span class="comment">--target-dir /sqoop/o1 \</span></span><br><span class="line"><span class="comment">--query &#x27;select * from ORDERS where cast(ORDERKEY as signed integer) &lt;= 800000 and $CONDITIONS&#x27; \</span></span><br><span class="line"><span class="comment">--hive-import \</span></span><br><span class="line"><span class="comment">--hive-overwrite \</span></span><br><span class="line"><span class="comment">--hive-table &#x27;ods.orders&#x27; \</span></span><br><span class="line"><span class="comment">--hive-partition-key etldate \</span></span><br><span class="line"><span class="comment">--hive-partition-value 20221210 \</span></span><br><span class="line"><span class="comment">--m 1</span></span><br><span class="line"></span><br><span class="line">å®Œæˆäº†åŸå§‹æ•°æ®çš„åˆ›å»ºäº†è¿™é‡Œéœ€è¦ç¬¬äºŒéƒ¨åˆ†</span><br><span class="line">ç”±äºæ¯”èµ›çš„æ—¶å€™æ˜¯åŸè¡¨æœ‰æ•°æ®ï¼Œæ‰€ä»¥å…ˆè¿›è¡Œé€†å‘æ’åºï¼ŒæŸ¥çœ‹orderkeyæœ€å¤§å€¼ä¸ºå¤šå°‘ï¼Œä»¥ä»–ä¸ºå¢é‡æœ€å¤§å­—æ®µ</span><br><span class="line">hive (ods)<span class="operator">&gt;</span> <span class="keyword">select</span> orderkey <span class="keyword">from</span> orders <span class="keyword">order</span> <span class="keyword">by</span> orderkey <span class="keyword">desc</span> limit <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">äºŒ.å¢é‡æŠ½å–</span><br><span class="line">è¿™é‡Œæœ‰å‡ ç‚¹é‡è¦ï¼š</span><br><span class="line"><span class="number">1.</span>æ·»åŠ åŠ¨æ€åˆ†åŒºçš„æ—¶å€™ï¼Œéœ€è¦æ–°å»ºä¸€ä¸ªmiddle_orderså¢åŠ ä¸€åˆ—etldate,è¿™ä¸€åˆ—etldateæ˜¯</span><br><span class="line">orderdate å¹¶ä¸”æŠŠæ ¼å¼è½¬æˆ yyyyMMdd  å¹¶æŠŠorderkey<span class="operator">&gt;</span><span class="number">800000</span>çš„æ•°æ®å¯¼å…¥middle_orders</span><br><span class="line"></span><br><span class="line">åŒæ—¶æ·»åŠ åŠ¨æ€åˆ†åŒºï¼Œåˆ†åŒºå­—æ®µç±»å‹ä¸ºStringï¼Œä¸”å€¼ä¸ºORDERDATEå­—æ®µçš„å†…å®¹ï¼ˆORDERDATEçš„æ ¼å¼ä¸ºyyyy<span class="operator">-</span>MM<span class="operator">-</span>ddï¼Œåˆ†åŒºå­—æ®µæ ¼å¼ä¸ºyyyyMMddï¼‰</span><br><span class="line"></span><br><span class="line">(<span class="number">1</span>).å…ˆå»ºä¸€ä¸ªä¸­é—´è¡¨</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> middle_orders</span><br><span class="line">(</span><br><span class="line">orderkey string, </span><br><span class="line">custkey string,</span><br><span class="line">orderstatus string,</span><br><span class="line">totalprice string,</span><br><span class="line">orderdate string,</span><br><span class="line">orderpriority string, </span><br><span class="line">clerk string,</span><br><span class="line">shippriority string,</span><br><span class="line">comment string,</span><br><span class="line">etldate string</span><br><span class="line">) stored <span class="keyword">as</span> textfile</span><br><span class="line"></span><br><span class="line">(<span class="number">2</span>).å¾€ä¸­é—´è¡¨é‡Œé¢å¯¼å…¥æ•°æ®</span><br><span class="line">bin<span class="operator">/</span>sqoop import \</span><br><span class="line"><span class="comment">--connect jdbc:mysql://bigdata1:3306/shtd_store \</span></span><br><span class="line"><span class="comment">--username root \</span></span><br><span class="line"><span class="comment">--password 123456 \</span></span><br><span class="line"><span class="comment">--driver com.mysql.jdbc.Driver \</span></span><br><span class="line"><span class="comment">--target-dir /sqoop/o1 \</span></span><br><span class="line"><span class="comment">--query &#x27;select *, replace(ORDERDATE, &quot;-&quot;, &quot;&quot;) from ORDERS where cast(ORDERKEY as SIGNED INTEGER) &gt; 800000 and ORDERDATE &gt; &quot;1996-07-02&quot; and $CONDITIONS&#x27; \</span></span><br><span class="line"><span class="comment">--hive-import \</span></span><br><span class="line"><span class="comment">--hive-overwrite \</span></span><br><span class="line"><span class="comment">--hive-table ods.middle_orders \</span></span><br><span class="line"><span class="comment">--m 1</span></span><br><span class="line"></span><br><span class="line">(<span class="number">3</span>).é‡ç‚¹ä¸€æ­¥å¼€å¯åŠ¨æ€åˆ†åŒºï¼Œä¸ºå¯¼å…¥åˆ†åŒºè¡¨åšå‡†å¤‡</span><br><span class="line"><span class="keyword">set</span> hive.exec.dynamic.partition<span class="operator">=</span><span class="literal">true</span>;</span><br><span class="line"><span class="keyword">set</span> hive.exec.dynamic.partition.mode<span class="operator">=</span><span class="literal">false</span>;</span><br><span class="line"><span class="keyword">set</span> hive.exec.max.dynamic.partitions<span class="operator">=</span><span class="number">90000</span>;</span><br><span class="line"><span class="keyword">set</span> hive.exec.max.dynamic.partitions.pernode<span class="operator">=</span><span class="number">90000</span>;</span><br><span class="line"></span><br><span class="line">(<span class="number">4</span>).æ–°å¢æ•°æ®åˆ°orders</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">table</span> orders <span class="keyword">partition</span>(etldate) <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> middle_orders;</span><br><span class="line"></span><br><span class="line">(<span class="number">5</span>).æ±‚<span class="keyword">distinct</span></span><br><span class="line">hive (ods)<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span>(etldate)) <span class="keyword">from</span> ods.orders;</span><br></pre></td></tr></table></figure><h4 id="ç¬¬äºŒç§ç›´æ¥å¢é‡å¯¼å…¥"><a href="#ç¬¬äºŒç§ç›´æ¥å¢é‡å¯¼å…¥" class="headerlink" title="ç¬¬äºŒç§ç›´æ¥å¢é‡å¯¼å…¥"></a>ç¬¬äºŒç§ç›´æ¥å¢é‡å¯¼å…¥</h4><blockquote><p> æŠ½å–shtd_storeåº“ä¸­LINEITEMçš„å¢é‡æ•°æ®è¿›å…¥Hiveçš„odsåº“ä¸­è¡¨lineitemï¼Œæ ¹æ®LINEITEMè¡¨ä¸­orderkeyä½œä¸ºå¢é‡å­—æ®µï¼Œåªå°†æ–°å¢çš„æ•°æ®æŠ½å…¥ï¼Œå­—æ®µç±»å‹ä¸å˜ï¼ŒåŒæ—¶æ·»åŠ é™æ€åˆ†åŒºï¼Œåˆ†åŒºå­—æ®µç±»å‹ä¸ºStringï¼Œä¸”å€¼ä¸ºå½“å‰æ¯”èµ›æ—¥çš„å‰ä¸€å¤©æ—¥æœŸï¼ˆåˆ†åŒºå­—æ®µæ ¼å¼ä¸ºyyyyMMddï¼‰ã€‚å¹¶åœ¨hive cliæ‰§è¡Œshow partitions ods.lineitemå‘½ä»¤ï¼Œå°†ç»“æœæˆªå›¾å¤åˆ¶ç²˜è´´è‡³å¯¹åº”æŠ¥å‘Šä¸­ã€‚</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>ä¼ªé€ æºæ•°æ®</span><br><span class="line">å…ˆæŠŠorderkey<span class="operator">&lt;=</span><span class="number">5992002</span>å¯¼å…¥åˆ†åŒºetldate<span class="operator">=</span><span class="number">20221210</span></span><br><span class="line">bin<span class="operator">/</span>sqoop import \</span><br><span class="line"><span class="comment">--connect jdbc:mysql://bigdata1:3306/shtd_store \</span></span><br><span class="line"><span class="comment">--username root \</span></span><br><span class="line"><span class="comment">--password 123456 \</span></span><br><span class="line"><span class="comment">--driver com.mysql.jdbc.Driver \</span></span><br><span class="line"><span class="comment">--target-dir /sqoop/o3 \</span></span><br><span class="line"><span class="comment">--fields-terminated-by &#x27;|&#x27; \</span></span><br><span class="line"><span class="comment">--query &#x27;select * from LINEITEM where cast(ORDERKEY as SIGNED INTEGER) &lt;= 5992002 and $CONDITIONS&#x27; \</span></span><br><span class="line"><span class="comment">--hive-import \</span></span><br><span class="line"><span class="comment">--hive-overwrite \</span></span><br><span class="line"><span class="comment">--hive-table &#x27;ods.lineitem&#x27; \</span></span><br><span class="line"><span class="comment">--hive-partition-key etldate \</span></span><br><span class="line"><span class="comment">--hive-partition-value &#x27;20221210&#x27; \</span></span><br><span class="line"><span class="comment">--m 1</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>å¯¼å…¥æ–°å¢æ•°æ®</span><br><span class="line">bin<span class="operator">/</span>sqoop import \</span><br><span class="line"><span class="comment">--connect jdbc:mysql://bigdata1:3306/shtd_store \</span></span><br><span class="line"><span class="comment">--username root \</span></span><br><span class="line"><span class="comment">--password 123456 \</span></span><br><span class="line"><span class="comment">--driver com.mysql.jdbc.Driver \</span></span><br><span class="line"><span class="comment">--target-dir /sqoop/o3 \</span></span><br><span class="line"><span class="comment">--fields-terminated-by &#x27;|&#x27; \</span></span><br><span class="line"><span class="comment">--query &#x27;select * from LINEITEM where cast(ORDERKEY as SIGNED INTEGER) &gt; 5992002 and $CONDITIONS&#x27; \</span></span><br><span class="line"><span class="comment">--hive-import \</span></span><br><span class="line"><span class="comment">--hive-overwrite \</span></span><br><span class="line"><span class="comment">--hive-table &#x27;ods.lineitem&#x27; \</span></span><br><span class="line"><span class="comment">--hive-partition-key etldate \</span></span><br><span class="line"><span class="comment">--hive-partition-value &#x27;20221209&#x27; \</span></span><br><span class="line"><span class="comment">--m 1</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ä¸€ä¸‹å¢é‡æŠ½å–ï¼Œéœ€è¦æ€è·¯æ¸…æ™°ï¼ŒæŠŠé¢˜ç›®çœ‹æ¸…æ¥šäº†æœ‰çš„éœ€è¦æ·»åŠ åŠ¨æ€åˆ†åŒºï¼Œåˆ†åŒºå­—æ®µè¦æ–°å»ºä¸­é—´è¡¨å†æ·»åŠ ï¼Œå¦å¤–é‡è¦ä¸€ç‚¹æ˜¯<strong><em>cast(ORDERKEY as SIGNED INTEGER)</em></strong> è¿™é‡Œæ˜¯SIGNED INTEGER ï¼Œreplace(ORDERDATE, â€œ-â€œ, â€œâ€)</p><h2 id="äºŒ-åˆ©ç”¨SparkSqlæŠ½å–"><a href="#äºŒ-åˆ©ç”¨SparkSqlæŠ½å–" class="headerlink" title="äºŒ.åˆ©ç”¨SparkSqlæŠ½å–"></a>äºŒ.åˆ©ç”¨SparkSqlæŠ½å–</h2><h3 id="å…¨é‡æ•°æ®æŠ½å–ï¼š-1"><a href="#å…¨é‡æ•°æ®æŠ½å–ï¼š-1" class="headerlink" title="å…¨é‡æ•°æ®æŠ½å–ï¼š"></a>å…¨é‡æ•°æ®æŠ½å–ï¼š</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> dask01</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.sql.<span class="type">SparkSession</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.<span class="type">SimpleDateFormat</span></span><br><span class="line"><span class="keyword">import</span> java.util.&#123;<span class="type">Date</span>, <span class="type">Properties</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">task1_1</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> spark: <span class="type">SparkSession</span> = <span class="type">SparkSession</span>.builder()</span><br><span class="line">      .config(<span class="string">&quot;spark.sql.warehouse.dir&quot;</span>, <span class="string">&quot;hdfs://bigdata1:9000/user/hive/warehouse&quot;</span>)</span><br><span class="line">      .config(<span class="string">&quot;spark.sql.legacy.createHiveTableByDefault&quot;</span>, <span class="string">&quot;false&quot;</span>)</span><br><span class="line">      .config(<span class="string">&quot;spark.sql.legacy.timeParserPolicy&quot;</span>, <span class="string">&quot;LEGACY&quot;</span>)</span><br><span class="line">      .master(<span class="string">&quot;local[*]&quot;</span>)</span><br><span class="line">      .appName(<span class="string">&quot;task1_1&quot;</span>)</span><br><span class="line">      .enableHiveSupport()</span><br><span class="line">      .getOrCreate()</span><br><span class="line">    <span class="keyword">import</span> spark.sql</span><br><span class="line">    <span class="keyword">import</span> spark.implicits._</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> prop = <span class="keyword">new</span> <span class="type">Properties</span>()</span><br><span class="line">    <span class="keyword">val</span> url = <span class="string">&quot;jdbc:mysqL://bigdata1:3306/shtd_store?characterEncoding=utf8&amp;useSSL=false&quot;</span></span><br><span class="line">    prop.setProperty(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;root&quot;</span>)</span><br><span class="line">    prop.setProperty(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;123456&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> simpleDateFormat = <span class="keyword">new</span> <span class="type">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> date = <span class="keyword">new</span> <span class="type">Date</span>()</span><br><span class="line">    <span class="keyword">val</span> timeNow: <span class="type">String</span> = simpleDateFormat.format(date)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> timeStr = <span class="string">&quot;20220413&quot;</span></span><br><span class="line"></span><br><span class="line">    spark.sql(<span class="string">&quot;use ods&quot;</span>)</span><br><span class="line"></span><br><span class="line">    spark.sql(<span class="string">&quot;set hive.exec.dynamic.partition=true&quot;</span>)</span><br><span class="line">    spark.sql(<span class="string">&quot;set hive.exec.dynamic.partition.mode=nonstrict&quot;</span>)</span><br><span class="line">    spark.sql(<span class="string">&quot;set hive.exec.max.dynamic.partitions=80000&quot;</span>)</span><br><span class="line">    spark.sql(<span class="string">&quot;set hive.exec.max.dynamic.partitions.pernode=80000&quot;</span>)</span><br><span class="line"></span><br><span class="line">    spark.sql(<span class="string">&quot;truncate table ods.customer&quot;</span>)</span><br><span class="line">    spark.read.jdbc(url,<span class="string">&quot;CUSTOMER&quot;</span>,prop).createOrReplaceTempView(<span class="string">&quot;t1&quot;</span>)</span><br><span class="line">    spark.sql(<span class="string">s&quot;insert overwrite table ods.customer partition(etldate=&#x27;<span class="subst">$timeStr</span>&#x27;) select * from t1&quot;</span>)</span><br><span class="line"></span><br><span class="line">    spark.sql(<span class="string">&quot;truncate table ods.nation&quot;</span>)</span><br><span class="line">    spark.read.jdbc(url,<span class="string">&quot;NATION&quot;</span>,prop).createOrReplaceTempView(<span class="string">&quot;t2&quot;</span>)</span><br><span class="line">    spark.sql(<span class="string">s&quot;insert overwrite table ods.nation partition(etldate=&#x27;<span class="subst">$timeStr</span>&#x27;) select * from t2&quot;</span>)</span><br><span class="line"></span><br><span class="line">    spark.sql(<span class="string">&quot;truncate table ods.part&quot;</span>)</span><br><span class="line">    spark.read.jdbc(url,<span class="string">&quot;PART&quot;</span>,prop).createOrReplaceTempView(<span class="string">&quot;t3&quot;</span>)</span><br><span class="line">    spark.sql(<span class="string">s&quot;insert overwrite table ods.part partition(etldate=&#x27;<span class="subst">$timeStr</span>&#x27;) select * from t3&quot;</span>)</span><br><span class="line"></span><br><span class="line">    spark.sql(<span class="string">&quot;truncate table ods.partsupp&quot;</span>)</span><br><span class="line">    spark.read.jdbc(url,<span class="string">&quot;PARTSUPP&quot;</span>,prop).createOrReplaceTempView(<span class="string">&quot;t4&quot;</span>)</span><br><span class="line">    spark.sql(<span class="string">s&quot;insert overwrite table ods.partsupp partition(etldate=&#x27;<span class="subst">$timeStr</span>&#x27;) select * from t4&quot;</span>)</span><br><span class="line"></span><br><span class="line">    spark.sql(<span class="string">&quot;truncate table ods.region&quot;</span>)</span><br><span class="line">    spark.read.jdbc(url,<span class="string">&quot;REGION&quot;</span>,prop).createOrReplaceTempView(<span class="string">&quot;t5&quot;</span>)</span><br><span class="line">    spark.sql(<span class="string">s&quot;insert overwrite table ods.region partition(etldate=&#x27;<span class="subst">$timeStr</span>&#x27;) select * from t5&quot;</span>)</span><br><span class="line"></span><br><span class="line">    spark.sql(<span class="string">&quot;truncate table ods.supplier&quot;</span>)</span><br><span class="line">    spark.read.jdbc(url,<span class="string">&quot;SUPPLIER&quot;</span>,prop).createOrReplaceTempView(<span class="string">&quot;t4&quot;</span>)</span><br><span class="line">    spark.sql(<span class="string">s&quot;insert overwrite table ods.supplier partition(etldate=&#x27;<span class="subst">$timeStr</span>&#x27;) select * from t4&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    spark.sql(<span class="string">&quot;insert into table ods.orders partition(etldate) select * from middle_orders&quot;</span>)</span><br><span class="line"></span><br><span class="line">    spark.sql(<span class="string">&quot;select count(distinct(etldate)) from ods.orders&quot;</span>).show()</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥ä½œå®¤ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Flumeé…ç½®</title>
      <link href="/2022/12/08/Flume%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/12/08/Flume%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="Flumeé…ç½®"><a href="#Flumeé…ç½®" class="headerlink" title="Flumeé…ç½®"></a>Flumeé…ç½®</h1><p> flumeçš„æ•°æ®é‡‡é›†éƒ¨åˆ†åšçš„å¾ˆå¥½ï¼Œå¯ä»¥å®šåˆ¶å¾ˆå¤šæ•°æ®æºï¼Œå‡å°‘å¼€å‘é‡ã€‚æ‰€ä»¥æ¯”è¾ƒæµè¡Œflume+kafkaæ¨¡å¼ï¼Œå¦‚æœä¸ºäº†åˆ©ç”¨flumeå†™hdfsçš„èƒ½åŠ›ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨kafka+flumeçš„æ–¹å¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æ¨¡æ¿ï¼š</span><br><span class="line">#Name</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a1.sources.r1.type = </span><br></pre></td></tr></table></figure><h2 id="ä¸€-netcatè¿æ¥"><a href="#ä¸€-netcatè¿æ¥" class="headerlink" title="(ä¸€).netcatè¿æ¥"></a>(ä¸€).netcatè¿æ¥</h2><h3 id="1-å¯åŠ¨zook"><a href="#1-å¯åŠ¨zook" class="headerlink" title="1.å¯åŠ¨zook"></a>1.å¯åŠ¨zook</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./zkServer.sh start</span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®flumeæ–‡ä»¶-flume-netcat-logger-conf"><a href="#2-é…ç½®flumeæ–‡ä»¶-flume-netcat-logger-conf" class="headerlink" title="2.é…ç½®flumeæ–‡ä»¶(flume-netcat-logger.conf)"></a>2.é…ç½®flumeæ–‡ä»¶(flume-netcat-logger.conf)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#Name</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a1.sources.r1.type = netcat</span><br><span class="line">a1.sources.r1.bind = localhost</span><br><span class="line">a1.sources.r1.port = 44444</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a1.sinks.k1.type = logger</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 1000   (channelä¸­å¯å­˜æ”¾å¤šå°‘ä¸ªEvent)</span><br><span class="line">a1.channels.c1.transactionCapacity = 100 (putListå’ŒtakeListçš„å®¹é‡)</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel = c1</span><br></pre></td></tr></table></figure><h3 id="3-å¼€å¯flumeç›‘å¬ç«¯å£"><a href="#3-å¼€å¯flumeç›‘å¬ç«¯å£" class="headerlink" title="3.å¼€å¯flumeç›‘å¬ç«¯å£"></a>3.å¼€å¯flumeç›‘å¬ç«¯å£</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flume&gt; bin/flume-ng agent --conf conf/ --name a1 --conf-file job/flume-netcat-logger.conf -Dflume-root.logger=INFO,console</span><br></pre></td></tr></table></figure><h3 id="4-å¼€å¯å®¢æˆ·ç«¯æ¶ˆè´¹"><a href="#4-å¼€å¯å®¢æˆ·ç«¯æ¶ˆè´¹" class="headerlink" title="4.å¼€å¯å®¢æˆ·ç«¯æ¶ˆè´¹"></a>4.å¼€å¯å®¢æˆ·ç«¯æ¶ˆè´¹</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc localhost 44444nc -lk xxx</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20221104191834018.png" alt="image-20221104191834018"></p><h3 id="5-å¦‚æœæŠ¥é”™å°±æ˜¯åå°ä¼šæœ‰å¤šä¸ªApplicationæ€æ‰å°±å¯"><a href="#5-å¦‚æœæŠ¥é”™å°±æ˜¯åå°ä¼šæœ‰å¤šä¸ªApplicationæ€æ‰å°±å¯" class="headerlink" title="5.å¦‚æœæŠ¥é”™å°±æ˜¯åå°ä¼šæœ‰å¤šä¸ªApplicationæ€æ‰å°±å¯"></a>5.å¦‚æœæŠ¥é”™å°±æ˜¯åå°ä¼šæœ‰å¤šä¸ªApplicationæ€æ‰å°±å¯</h3><h2 id="äºŒ-å®æ—¶ç›‘æ§HIVEæ—¥å¿—-gt-HDFS"><a href="#äºŒ-å®æ—¶ç›‘æ§HIVEæ—¥å¿—-gt-HDFS" class="headerlink" title="(äºŒ).å®æ—¶ç›‘æ§HIVEæ—¥å¿—-&gt;HDFS"></a>(äºŒ).å®æ—¶ç›‘æ§HIVEæ—¥å¿—-&gt;HDFS</h2><h3 id="1-å¯åŠ¨"><a href="#1-å¯åŠ¨" class="headerlink" title="1.å¯åŠ¨"></a>1.å¯åŠ¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.å¯åŠ¨zookeeper</span><br><span class="line">./zkServer.sh start</span><br><span class="line">2.å¯åŠ¨hdfs</span><br><span class="line">hadoop&gt; sbin/start-dfs.sh</span><br><span class="line">hadoop&gt; sbin/start-yarn.sh</span><br><span class="line">3.å¯åŠ¨hive</span><br><span class="line">hive --service metastore &amp;--&gt;å¯åŠ¨å…ƒæ•°æ®</span><br><span class="line">hive --service hiveserver2 $--&gt;å¯åŠ¨hive2</span><br><span class="line">hive&gt;</span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®flume-flume-file-hdfs-conf"><a href="#2-é…ç½®flume-flume-file-hdfs-conf" class="headerlink" title="2.é…ç½®flume(flume-file-hdfs.conf)"></a>2.é…ç½®flume(flume-file-hdfs.conf)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#Name</span><br><span class="line">a2.sources = r2</span><br><span class="line">a2.sinks = k2</span><br><span class="line">a2.channels = c2</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a2.sources.r2.type = exec</span><br><span class="line">a2.sources.r2.command = tail -F /usr/local/src/hive/logs/hive.log</span><br><span class="line">a2.sources.r2.shell = /bin/bash -c</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a2.sinks.k2.type = hdfs</span><br><span class="line">a2.sinks.k2.hdfs.path = hdfs://10.7.75.210:9000/flume/%Y%m%d/%H</span><br><span class="line">a2.sinks.k2.hdfs.filePrefix = logs-</span><br><span class="line">a2.sinks.k2.hdfs.round = true</span><br><span class="line">a2.sinks.k2.hdfs.roundValue = 1</span><br><span class="line">a2.sinks.k2.hdfs.roundUnit = hour</span><br><span class="line">a2.sinks.k2.hdfs.useLocalTimeStamp = true</span><br><span class="line">a2.sinks.k2.hdfs.batchSize = 100</span><br><span class="line">a2.sinks.k2.hdfs.fileType = DataStream</span><br><span class="line">a2.sinks.k2.hdfs.rollInterval = 60</span><br><span class="line">a2.sinks.k2.hdfs.rollSize = 134217700</span><br><span class="line">a2.sinks.k2.hdfs.rollCount = 0</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a2.channels.c2.type = memory</span><br><span class="line">a2.channels.c2.capacity = 1000</span><br><span class="line">a2.channels.c2.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a2.sources.r2.channels = c2</span><br><span class="line">a2.sinks.k2.channel = c2</span><br></pre></td></tr></table></figure><h2 id="ä¸‰-å®æ—¶ç›‘æ§ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸Šä¼ HDFS"><a href="#ä¸‰-å®æ—¶ç›‘æ§ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸Šä¼ HDFS" class="headerlink" title="(ä¸‰).å®æ—¶ç›‘æ§ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸Šä¼ HDFS"></a>(ä¸‰).å®æ—¶ç›‘æ§ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸Šä¼ HDFS</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#Name</span><br><span class="line">a3.sources = r3</span><br><span class="line">a3.sinks = k3</span><br><span class="line">a3.channels = c3</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a3.sources.r3.type = spooldir</span><br><span class="line">a3.sources.r3.spoolDir = /usr/local/src/flume/upload</span><br><span class="line">a3.sources.r3.fileSuffix = .COM</span><br><span class="line">a3.sources.r3.fileHeader = true</span><br><span class="line">a3.sources.r3.ignordPattern = ([^ ]*\.tmp)</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a3.sinks.k3.type = hdfs</span><br><span class="line">a3.sinks.k3.hdfs.path = hdfs://master:9000/flume/upload/%Y%m%d/%H</span><br><span class="line">a3.sinks.k3.hdfs.filePrefix = upload-</span><br><span class="line">a3.sinks.k3.hdfs.round = true</span><br><span class="line">a3.sinks.k3.hdfs.roundValue = 1</span><br><span class="line">a3.sinks.k3.hdfs.roundUnit = hour</span><br><span class="line">a3.sinks.k3.hdfs.useLocalTimeStamp = true</span><br><span class="line">a3.sinks.k3.hdfs.batchSize = 100</span><br><span class="line">a3.sinks.k3.hdfs.fileType = DataStream</span><br><span class="line">a3.sinks.k3.hdfs.rollInterval = 60</span><br><span class="line">a3.sinks.k3.hdfs.rollSize = 134217700</span><br><span class="line">a3.sinks.k3.hdfs.rollCount = 0</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a3.channels.c3.type = memory</span><br><span class="line">a3.channels.c3.capacity = 1000</span><br><span class="line">a3.channels.c3.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a3.sources.r3.channels = c3</span><br><span class="line">a3.sinks.k3.channel = c3</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å››-å®æ—¶ç›‘æ§æ–°å¢æ–‡ä»¶"><a href="#å››-å®æ—¶ç›‘æ§æ–°å¢æ–‡ä»¶" class="headerlink" title="(å››).å®æ—¶ç›‘æ§æ–°å¢æ–‡ä»¶"></a>(å››).å®æ—¶ç›‘æ§æ–°å¢æ–‡ä»¶</h2><p>ä½¿ç”¨spooldir</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#Name</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line">#Sources</span><br><span class="line">a1.sources.r1.type = spooldir</span><br><span class="line">a1.sources.r1.spoolDir = /usr/local/src/flume/logs/spooldir</span><br><span class="line">a1.sources.r1.fileSuffix = .COM</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a1.sinks.k1.type = hdfs</span><br><span class="line">a1.sinks.k1.hdfs.path = hdfs://master:9000/flume/%Y-%m-%d/%H</span><br><span class="line">a1.sinks.k1.hdfs.filePrefix = logs-</span><br><span class="line">a1.sinks.k1.hdfs.rollInterval = 60</span><br><span class="line">a1.sinks.k1.hdfs.rollSize = 13421770</span><br><span class="line">a1.sinks.k1.hdfs.round = true</span><br><span class="line">a1.sinks.k1.hdfs.roundValue = 1</span><br><span class="line">a1.sinks.k1.hdfs.roundUnit = hour</span><br><span class="line">a1.sinks.k1.hdfs.useLocalTimeStamp = true</span><br><span class="line">a1.sinks.k1.hdfs.rollCount = 0</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 1000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel = c1</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="äº”-å®æ—¶ç›‘æ§å¤šä¸ªè¿½åŠ æ–‡ä»¶"><a href="#äº”-å®æ—¶ç›‘æ§å¤šä¸ªè¿½åŠ æ–‡ä»¶" class="headerlink" title="(äº”).å®æ—¶ç›‘æ§å¤šä¸ªè¿½åŠ æ–‡ä»¶"></a>(äº”).å®æ—¶ç›‘æ§å¤šä¸ªè¿½åŠ æ–‡ä»¶</h2><p>ä½¿ç”¨taildir+æ­£åˆ™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#Name</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line">#Sources</span><br><span class="line">a1.sources.r1.type = taildir</span><br><span class="line">a1.sources.r1.filegroups = f1 f2</span><br><span class="line">a1.sources.r1.filegroups.f1 = /root/job/taildir/.*\.txt</span><br><span class="line">a1.sources.r1.filegroups.f2 = /root/job/taildir/.*\.log</span><br><span class="line">a1.sources.r1.positionFile = /root/job/position/position.json</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a1.sinks.k1.type = hdfs</span><br><span class="line">a1.sinks.k1.hdfs.path = hdfs://master:9000/flume/%Y-%m-%d/%H</span><br><span class="line">a1.sinks.k1.hdfs.filePrefix = logs-</span><br><span class="line">a1.sinks.k1.hdfs.rollInterval = 60</span><br><span class="line">a1.sinks.k1.hdfs.rollSize = 13421770</span><br><span class="line">a1.sinks.k1.hdfs.round = true</span><br><span class="line">a1.sinks.k1.hdfs.roundValue = 1</span><br><span class="line">a1.sinks.k1.hdfs.roundUnit = hour</span><br><span class="line">a1.sinks.k1.hdfs.useLocalTimeStamp = true</span><br><span class="line">a1.sinks.k1.hdfs.rollCount = 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 1000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel = c1</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Flumeé«˜é˜¶"><a href="#Flumeé«˜é˜¶" class="headerlink" title="Flumeé«˜é˜¶"></a>Flumeé«˜é˜¶</h1><h2 id="ä¸€-å¤åˆ¶"><a href="#ä¸€-å¤åˆ¶" class="headerlink" title="(ä¸€).å¤åˆ¶"></a>(ä¸€).å¤åˆ¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ Flume-1 ç›‘æ§æ–‡ä»¶å˜åŠ¨ï¼ŒFlume-1 å°†å˜åŠ¨å†…å®¹ä¼ é€’ç»™ Flume-2ï¼ŒFlume-2 è´Ÿè´£å­˜å‚¨</span><br><span class="line">åˆ° HDFSã€‚åŒæ—¶ Flume-1 å°†å˜åŠ¨å†…å®¹ä¼ é€’ç»™ Flume-3ï¼ŒFlume-3 è´Ÿè´£è¾“å‡ºåˆ° Local </span><br><span class="line">FileSystemã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">flume1.conf</span><br><span class="line"></span><br><span class="line">#Name</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1 k2</span><br><span class="line">a1.channels = c1 c2</span><br><span class="line"></span><br><span class="line">#Sources</span><br><span class="line">a1.sources.r1.type = taildir</span><br><span class="line">a1.sources.r1.filegroups = f1</span><br><span class="line">a1.sources.r1.filegroups.f1 = /usr/local/src/flume/job/taildir/.*\.txt</span><br><span class="line">a1.sources.r1.postitionFile =/usr/local/src/flume/job/position/position.json</span><br><span class="line"></span><br><span class="line">#Channel selector</span><br><span class="line">a1.sources.r1.selector.type = replicating</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 10000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">a1.channels.c2.type = memory</span><br><span class="line">a1.channels.c2.capacity = 10000</span><br><span class="line">a1.channels.c2.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a1.sinks.k1.type = avro</span><br><span class="line">a1.sinks.k1.hostname = localhost</span><br><span class="line">a1.sinks.k1.port = 7777</span><br><span class="line"></span><br><span class="line">a1.sinks.k2.type = avro</span><br><span class="line">a1.sinks.k2.hostname = localhost</span><br><span class="line">a1.sinks.k2.port = 8888</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a1.sources.r1.channels = c1 c2</span><br><span class="line">a1.sinks.k1.channel = c1</span><br><span class="line">a1.sinks.k2.channel = c2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">flume2.conf</span><br><span class="line"></span><br><span class="line">#Name</span><br><span class="line">a2.sources = r1</span><br><span class="line">a2.sinks = k1</span><br><span class="line">a2.channels = c1</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a2.sources.r1.type = avro</span><br><span class="line">a2.sources.r1.bind = localhost</span><br><span class="line">a2.sources.r1.port = 7777</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a2.sinks.k1.type = hdfs</span><br><span class="line">a2.sinks.k1.hdfs.path = hdfs://master:9000/flume/%Y-%m-%d/%H</span><br><span class="line">a2.sinks.k1.hdfs.filePrefix = beihai-</span><br><span class="line">a2.sinks.k1.hdfs.round = true</span><br><span class="line">a2.sinks.k1.hdfs.roundValue = 1</span><br><span class="line">a2.sinks.k1.hdfs.roundUnit = hour</span><br><span class="line">a2.sinks.k1.hdfs.useLocalTimeStamp = true</span><br><span class="line">a2.sinks.k1.hdfs.batchSize = 100</span><br><span class="line">a2.sinks.k1.hdfs.fileType = DataStream</span><br><span class="line">a2.sinks.k1.hdfs.rollInterval = 60</span><br><span class="line">a2.sinks.k1.hdfs.rollSize = 134217700</span><br><span class="line">a2.sinks.k1.hdfs.rollCount = 0</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a2.channels.c1.type = memory</span><br><span class="line">a2.channels.c1.capacity = 10000</span><br><span class="line">a2.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a2.sources.r1.channels = c1</span><br><span class="line">a2.sinks.k1.channel = c1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">flume3.conf</span><br><span class="line"></span><br><span class="line">#Name</span><br><span class="line">a3.sources = r1</span><br><span class="line">a3.sinks = k1</span><br><span class="line">a3.channels = c1</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a3.sources.r1.type = avro</span><br><span class="line">a3.sources.r1.bind = localhost</span><br><span class="line">a3.sources.r1.port = 8888</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a3.channels.c1.type = memory</span><br><span class="line">a3.channels.c1.capacity = 10000</span><br><span class="line">a3.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a3.sinks.k1.type = file_roll</span><br><span class="line">a3.sinks.k1.sink.directory =/usr/local/src/flume/job/fileroll</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a3.sources.r1.channels = c1</span><br><span class="line">a3.sinks.k1.channel = c1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¯åŠ¨ï¼š</span><br><span class="line">bin/flume-ng agent --conf conf/ --conf-file /usr/local/src/flume/job/fuzhi/flume1.conf --name a1 -Dflume.root.logger=INFO,console</span><br></pre></td></tr></table></figure><h2 id="äºŒ-èšåˆ"><a href="#äºŒ-èšåˆ" class="headerlink" title="(äºŒ).èšåˆ"></a>(äºŒ).èšåˆ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hadoop102 ä¸Šçš„ Flume-1 ç›‘æ§æ–‡ä»¶/opt/module/group.logï¼Œ</span><br><span class="line">hadoop103 ä¸Šçš„ Flume-2 ç›‘æ§æŸä¸€ä¸ªç«¯å£çš„æ•°æ®æµï¼Œ</span><br><span class="line">Flume-1 ä¸ Flume-2 å°†æ•°æ®å‘é€ç»™ hadoop104 ä¸Šçš„ Flume-3ï¼ŒFlume-3 å°†æœ€ç»ˆæ•°æ®æ‰“å°</span><br><span class="line">åˆ°æ§åˆ¶å°ã€‚</span><br><span class="line"></span><br><span class="line">flume1</span><br><span class="line"></span><br><span class="line">#Name</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a1.sources.r1.type = netcat</span><br><span class="line">a1.sources.r1.bind = </span><br></pre></td></tr></table></figure><h1 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¯¼å…¥ä¾èµ–</span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.flume<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>flume-ng-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">package Flume.interceptor;</span><br><span class="line"></span><br><span class="line">import org.apache.flume.Context;</span><br><span class="line">import org.apache.flume.Event;</span><br><span class="line">import org.apache.flume.interceptor.Interceptor;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">public class TypeInterceptor implements Interceptor &#123;</span><br><span class="line"></span><br><span class="line">    //å£°æ˜ä¸€ä¸ªå­˜æ”¾äº‹ä»¶çš„é›†åˆ</span><br><span class="line">    private List&lt;Event&gt; addHeaderEvents;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //åˆå§‹åŒ–</span><br><span class="line">    @Override</span><br><span class="line">    public void initialize() &#123;</span><br><span class="line"></span><br><span class="line">        addHeaderEvents = new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //å•ä¸ªäº‹ä»¶æ‹¦æˆª</span><br><span class="line">    @Override</span><br><span class="line">    public Event intercept(Event event) &#123;</span><br><span class="line"></span><br><span class="line">        //1.è·å–äº‹ä»¶ä¸­çš„å¤´ä¿¡æ¯</span><br><span class="line">        Map&lt;String, String&gt; headers = event.getHeaders();</span><br><span class="line"></span><br><span class="line">        //2.è·å–äº‹ä»¶ä¸­çš„body</span><br><span class="line">        String body = new String(event.getBody());</span><br><span class="line"></span><br><span class="line">        //3.æ ¹æ®bodyä¸­æ˜¯å¦æœ‰helloæ¥æ·»åŠ æ€æ ·çš„å¤´ä¿¡æ¯</span><br><span class="line">        if (body.contains(&quot;hello&quot;))&#123;</span><br><span class="line">            //4.æ·»åŠ å¤´ä¿¡æ¯</span><br><span class="line">            headers.put(&quot;type&quot;,&quot;atguigu&quot;);</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            headers.put(&quot;type&quot;,&quot;beihai&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return event;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //æ‰¹é‡äº‹ä»¶æ‹¦æˆª</span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;Event&gt; intercept(List&lt;Event&gt; events) &#123;</span><br><span class="line">        //1.æ¸…ç©ºé›†åˆ</span><br><span class="line">        addHeaderEvents.clear();</span><br><span class="line"></span><br><span class="line">        //2.</span><br><span class="line">        for (Event event : events) &#123;</span><br><span class="line">            addHeaderEvents.add(intercept(event));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return addHeaderEvents;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void close() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static class Builder implements Interceptor.Builder&#123;</span><br><span class="line">        @Override</span><br><span class="line">        public Interceptor build() &#123;</span><br><span class="line">            return new TypeInterceptor();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void configure(Context context) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ‰“åŒ…å‘åˆ°flumeçš„libç›®å½•ä¸‹</span><br><span class="line"></span><br><span class="line">ä¸Kafkaå¯¹æ¥çš„æ—¶å€™</span><br><span class="line">å½“å¤´æ–‡ä»¶çš„kä¸ºtopicï¼ˆfirst,secondï¼‰æ—¶å€™ï¼Œå°±ä¼šè¦†ç›–åŸæ¥çš„firsté…ç½®</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20221112155634146.png" alt="image-20221112155634146"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">flume1</span><br><span class="line"></span><br><span class="line">#Name</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1 k2</span><br><span class="line">a1.channels = c1 c2</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a1.sources.r1.type = netcat</span><br><span class="line">a1.sources.r1.bind = localhost</span><br><span class="line">a1.sources.r1.port = 44444</span><br><span class="line"></span><br><span class="line">#Interector</span><br><span class="line">a1.sources.r1.interceptors = i1</span><br><span class="line">a1.sources.r1.interceptors.i1.type = Flume.interceptor.TypeInterceptor$Builder</span><br><span class="line"></span><br><span class="line">#Channel Selector</span><br><span class="line">a1.sources.r1.selector.type = multiplexing</span><br><span class="line">a1.sources.r1.selector.header = type</span><br><span class="line">a1.sources.r1.selector.mapping.atguigu = c1</span><br><span class="line">a1.sources.r1.selector.mapping.beihai = c2</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a1.sinks.k1.type = avro</span><br><span class="line">a1.sinks.k1.hostname = slave1</span><br><span class="line">a1.sinks.k1.port = 4141</span><br><span class="line"></span><br><span class="line">a1.sinks.k2.type= avro</span><br><span class="line">a1.sinks.k2.hostname = slave2</span><br><span class="line">a1.sinks.k2.port = 4242</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 1000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">a1.channels.c2.type = memory</span><br><span class="line">a1.channels.c2.capacity = 1000</span><br><span class="line">a1.channels.c2.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a1.sources.r1.channels = c1 c2</span><br><span class="line">a1.sinks.k1.channel = c1</span><br><span class="line">a1.sinks.k2.channel = c2</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">flume2</span><br><span class="line"></span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line">a1.sources.r1.type = avro</span><br><span class="line">a1.sources.r1.bind = slave1</span><br><span class="line">a1.sources.r1.port = 4141</span><br><span class="line"></span><br><span class="line">a1.sinks.k1.type = logger</span><br><span class="line"></span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 1000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel = c1</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">flume3</span><br><span class="line"></span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line">a1.sources.r1.type = avro</span><br><span class="line">a1.sources.r1.bind = slave2</span><br><span class="line">a1.sources.r1.port = 4242</span><br><span class="line"></span><br><span class="line">a1.sinks.k1.type = logger</span><br><span class="line"></span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 1000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel = c1</span><br></pre></td></tr></table></figure><h1 id="é…ç½®é—®é¢˜"><a href="#é…ç½®é—®é¢˜" class="headerlink" title="é…ç½®é—®é¢˜"></a>é…ç½®é—®é¢˜</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.hiveçš„æ—¥å¿—</span><br><span class="line">å…ˆæ‰¾åˆ°æ‰€åœ¨è·¯å¾„ /usr/local/src/hive/conf/</span><br><span class="line">(1).é‡æ–°æ‹·è´åˆ æ”¹åç¼€</span><br><span class="line">cp hive-log4j2.properties-template hive-log4j2.properties</span><br><span class="line"></span><br><span class="line">(2).æ”¹å˜é…ç½®ä¿¡æ¯</span><br><span class="line">property.hive.log.dir = /usr/local/src/hive/logs</span><br><span class="line">property.hive.log.file = hive.log</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.å…«ä¸ªæ—¥å¿—çº§åˆ«</span><br><span class="line">-Dflume.root.logger=INFO,console</span><br><span class="line">https://blog.csdn.net/qq_42428269/article/details/121597545</span><br><span class="line"></span><br><span class="line">3.äº¤æ¢æ–‡ä»¶ &quot;.flume2.conf.swp&quot; å·²å­˜åœ¨</span><br><span class="line">å…ˆä½¿ç”¨ls -aæ‰¾åˆ°éšè—çš„æ–‡ä»¶</span><br><span class="line">rm -f éšè—çš„æ–‡ä»¶å°†å…¶åˆ é™¤å³å¯ã€‚</span><br></pre></td></tr></table></figure><h1 id="æœ‰æ„æ€çš„ç‚¹ï¼š"><a href="#æœ‰æ„æ€çš„ç‚¹ï¼š" class="headerlink" title="æœ‰æ„æ€çš„ç‚¹ï¼š"></a>æœ‰æ„æ€çš„ç‚¹ï¼š</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(1).xshellå¼€å¯ç¼“æ…¢</span><br><span class="line">```</span><br><span class="line">sudo vim /etc/ssh/sshd_config</span><br><span class="line">```</span><br><span class="line">å°†UseDNS è°ƒä¸ºNO ä¸è¦åå‘è§£æ</span><br><span class="line">(2).netcatçš„ç«¯å£èŒƒå›´0~65535</span><br><span class="line">å®‰è£…ncï¼šsudo yum install -y nc</span><br><span class="line">ncæ‰‹å†Œï¼šman nc</span><br><span class="line">(3).exec sourceså‘½ä»¤å°±æ˜¯å¯ä»¥ä½¿ç”¨linuxçš„å‘½ä»¤æ¥æ“ä½œå¦å¤–ä¸€å¥—å‘½ä»¤</span><br><span class="line">(4).echo &gt;&gt; è¿½åŠ æ•°æ®</span><br><span class="line">(5).#Bind æ—¶å€™ä¸€ä¸ªsourceå¯ä»¥å¯¹åº”å¤šä¸ªchannelæ‰€ä»¥ç”¨channels</span><br><span class="line">ä¸€ä¸ªsinkåªèƒ½å¯¹åº”ä¸€ä¸ªchannelæ‰€ä»¥ç”¨channel</span><br><span class="line">(6).ctrl+H æ›¿æ¢</span><br><span class="line">(7).å®æ—¶ç›‘æ§æ–°æ–‡ä»¶spooldir</span><br><span class="line">(8).åˆ›å»ºæ–°æ–‡ä»¶touch</span><br><span class="line">(9).å®æ—¶ç›‘æ§å¤šä¸ªè¿½åŠ æ–‡ä»¶taildir</span><br><span class="line">(10).æ–­ç‚¹ç»­ä¼ ï¼špositionFile æ ¹æ®ä¸Šä¸€æ¬¡æ‰€è®°å½•çš„æ•°æ®ç„¶åç›´æ¥è¿½åŠ æ·»åŠ æ•°æ®è¿™é‡Œéœ€è¦æ·»åŠ .jsonçš„æ–‡ä»¶ä½œä¸ºè®°å½•</span><br><span class="line">```</span><br><span class="line">/root/job/position/position.json</span><br><span class="line">```</span><br><span class="line">(11).Memory Channel åŸºäºå†…å­˜çš„ç¼“å­˜  é€Ÿåº¦å¿« ä¸å®‰å…¨</span><br><span class="line"> File Channel åŸºäºç£ç›˜çš„ç¼“å­˜ é€Ÿåº¦æ…¢ å®‰å…¨</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20221107170854806.png" alt="image-20221107170854806"></p>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Flink</title>
      <link href="/2022/12/08/Flink/"/>
      <url>/2022/12/08/Flink/</url>
      
        <content type="html"><![CDATA[<h1 id="Flink"><a href="#Flink" class="headerlink" title="Flink"></a>Flink</h1><p>å¤„ç†å®æ—¶æ•°æ®æµï¼Œå¯¹æ—¶é—´çš„è¦æ±‚é«˜ï¼Œæ‰€ä»¥ç»å¸¸ç”¨åˆ°å¼€çª—ç­‰ä¸€ç³»åˆ—çš„æ“ä½œ</p><h1 id="æœ‰ç•Œæµ"><a href="#æœ‰ç•Œæµ" class="headerlink" title="æœ‰ç•Œæµ"></a>æœ‰ç•Œæµ</h1><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Flink</span>.<span class="type">WordCount</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.flink.streaming.api.scala.&#123;<span class="type">DataStream</span>, <span class="type">StreamExecutionEnvironment</span>&#125;</span><br><span class="line"><span class="keyword">import</span> org.apache.flink.api.scala._</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">StreamWordCount</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//1.åˆ›å»ºæµå¼æ‰§è¡Œç¯å¢ƒ</span></span><br><span class="line">    <span class="keyword">val</span> env: <span class="type">StreamExecutionEnvironment</span> = <span class="type">StreamExecutionEnvironment</span>.getExecutionEnvironment</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.è¯»å–æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">val</span> lineDataStream: <span class="type">DataStream</span>[<span class="type">String</span>] = env.readTextFile(<span class="string">&quot;input/words.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.è¿ç®—</span></span><br><span class="line">    <span class="keyword">val</span> result: <span class="type">DataStream</span>[(<span class="type">String</span>, <span class="type">Int</span>)] = lineDataStream.flatMap(_.split(<span class="string">&quot; &quot;</span>)).map((_, <span class="number">1</span>)).keyBy(_._1).sum(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.ç»“æœ</span></span><br><span class="line">    result.print()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5.æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">    env.execute()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="æ— ç•Œæµ"><a href="#æ— ç•Œæµ" class="headerlink" title="æ— ç•Œæµ"></a>æ— ç•Œæµ</h1><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">Flink</span>.<span class="type">WordCount</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.flink.api.java.utils.<span class="type">ParameterTool</span></span><br><span class="line"><span class="keyword">import</span> org.apache.flink.streaming.api.scala._</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TrueStreamWordCount</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> env: <span class="type">StreamExecutionEnvironment</span> = <span class="type">StreamExecutionEnvironment</span>.getExecutionEnvironment</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¯»å–socketæµ</span></span><br><span class="line"><span class="comment">//    val lineDataStream: DataStream[String] = env.socketTextStream(&quot;master&quot;, 44444)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> parameterTool: <span class="type">ParameterTool</span> = <span class="type">ParameterTool</span>.fromArgs(args)</span><br><span class="line">    <span class="keyword">val</span> hostname: <span class="type">String</span> = parameterTool.get(<span class="string">&quot;host&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> port: <span class="type">Int</span> = parameterTool.getInt(<span class="string">&quot;port&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> lineDataStream: <span class="type">DataStream</span>[<span class="type">String</span>] = env.socketTextStream(hostname, port)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    lineDataStream.flatMap(_.split(<span class="string">&quot; &quot;</span>)).map((_,<span class="number">1</span>)).keyBy(_._1).sum(<span class="number">1</span>).print()</span><br><span class="line"></span><br><span class="line">    env.execute()</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20221114093156759.png" alt="image-20221114093156759"></p><h1 id="Flinkå¯åŠ¨å’Œåœæ­¢"><a href="#Flinkå¯åŠ¨å’Œåœæ­¢" class="headerlink" title="Flinkå¯åŠ¨å’Œåœæ­¢"></a>Flinkå¯åŠ¨å’Œåœæ­¢</h1><h2 id="æœ¬åœ°æ¨¡å¼"><a href="#æœ¬åœ°æ¨¡å¼" class="headerlink" title="æœ¬åœ°æ¨¡å¼"></a>æœ¬åœ°æ¨¡å¼</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨:bin/start-cluster.sh</span><br><span class="line">åœæ­¢:bin/stop-cluster.sh </span><br><span class="line"></span><br><span class="line">[root@master flink]# ./bin/flink run -m master:8081 -c Flink.WordCount.TrueStreamWordCount -p 2 ./hivespark-1.0-SNAPSHOT.jar --host master --port 44444</span><br><span class="line">Job has been submitted with JobID 5889aea585779ac98350b3ad17a9e02d</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹ä½œä¸š</span><br><span class="line">1.æ·»åŠ jobä½œä¸šç¼–å·</span><br><span class="line">[root@master flink]# ./bin/flink list 5889aea585779ac98350b3ad17a9e02d</span><br><span class="line">Waiting for response...</span><br><span class="line">------------------ Running/Restarting Jobs -------------------</span><br><span class="line">14.11.2022 10:33:54 : 5889aea585779ac98350b3ad17a9e02d : Flink Streaming Job (RUNNING)</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">No scheduled jobs.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2.ç›´æ¥æŸ¥çœ‹</span><br><span class="line">[root@master flink]# ./bin/flink list</span><br><span class="line">Waiting for response...</span><br><span class="line">------------------ Running/Restarting Jobs -------------------</span><br><span class="line">14.11.2022 10:33:54 : 5889aea585779ac98350b3ad17a9e02d : Flink Streaming Job (RUNNING)</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">No scheduled jobs.</span><br><span class="line"></span><br><span class="line">3.æŸ¥çœ‹æ‰€æœ‰çš„åŒ…æ‹¬ä¹‹å‰å–æ¶ˆçš„</span><br><span class="line">[root@master flink]# ./bin/flink list -a</span><br><span class="line">Waiting for response...</span><br><span class="line">------------------ Running/Restarting Jobs -------------------</span><br><span class="line">14.11.2022 10:33:54 : 5889aea585779ac98350b3ad17a9e02d : Flink Streaming Job (RUNNING)</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line">No scheduled jobs.</span><br><span class="line">---------------------- Terminated Jobs -----------------------</span><br><span class="line">14.11.2022 10:23:57 : 19a87da39b618b6053bb496d5ba5b2ee : Flink Streaming Job (CANCELED)</span><br><span class="line">--------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">4.å…³é—­ä½œä¸š</span><br><span class="line">[root@master flink]# ./bin/flink cancel 5889aea585779ac98350b3ad17a9e02d</span><br><span class="line">Cancelling job 5889aea585779ac98350b3ad17a9e02d.</span><br><span class="line">Cancelled job 5889aea585779ac98350b3ad17a9e02d.</span><br></pre></td></tr></table></figure><h2 id="Yarnéƒ¨ç½²"><a href="#Yarnéƒ¨ç½²" class="headerlink" title="Yarnéƒ¨ç½²"></a>Yarnéƒ¨ç½²</h2><h3 id="ä¸€-yarnçš„ä¼šè¯æ¨¡å¼"><a href="#ä¸€-yarnçš„ä¼šè¯æ¨¡å¼" class="headerlink" title="(ä¸€).yarnçš„ä¼šè¯æ¨¡å¼"></a>(ä¸€).yarnçš„ä¼šè¯æ¨¡å¼</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨</span><br><span class="line">bin/yarn-session.sh -nm test -d</span><br><span class="line"></span><br><span class="line">å»ºç«‹job</span><br><span class="line">./bin/flink run -c Flink.WordCount.TrueStreamWordCount -p 2 ./hivespark-1.0-SNAPSHOT.jar --host master --port 44444</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Kafka</title>
      <link href="/2022/12/08/Kafka/"/>
      <url>/2022/12/08/Kafka/</url>
      
        <content type="html"><![CDATA[<h1 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h1><p>kafkaå’Œflumeéƒ½æ˜¯æ—¥å¿—ç³»ç»Ÿã€‚kafkaæ˜¯åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œè‡ªå¸¦å­˜å‚¨ï¼Œæä¾›pushå’Œpullå­˜å–æ•°æ®åŠŸèƒ½ã€‚flumeåˆ†ä¸ºagentï¼ˆæ•°æ®é‡‡é›†å™¨ï¼‰[source channel sink]ã€‚</p><p>(ä¸€).å¯åŠ¨,åœæ­¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-server-start.sh -daemon config/server.properties </span><br><span class="line">bin/kafka-server-stop.sh</span><br></pre></td></tr></table></figure><p>(äºŒ).<a href="https://blog.csdn.net/weixin_42854904/article/details/118424361?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=%E2%80%93bootstrap-server%20%E5%92%8C%20--zookeepe&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-118424361.142">ä¸¤ç§æ–¹å¼</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.bootstrap-server master:9092 </span><br><span class="line">2.zookeeper master:2181 </span><br><span class="line"></span><br><span class="line">kafka 2.2ç‰ˆæœ¬ä¹‹åæ‰èƒ½ç”¨boot</span><br></pre></td></tr></table></figure><p>(ä¸‰).åˆ›å»ºtopic</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topic.sh --zookeeper master:2181/kafka --topic first --create --partitions --replication-factor 2</span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œå‡ºç°çš„é—®é¢˜æ˜¯å› ä¸º<a href="https://blog.csdn.net/u010003835/article/details/106956702?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166804874416782414952137%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=166804874416782414952137&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-106956702-null-null.142^v63^control,201^v3^control_1,213^v2^t3_control2&amp;utm_term=ERROR%20org.apache.kafka.common.errors.InvalidReplicationFactorException%3A%20Replication%20factor%3A%203%20larger%20than%20available%20brokers%3A%201.&amp;spm=1018.2226.3001.4187">Kafka</a> Broker åœ¨ zookeeper å­˜å‚¨çš„è·¯å¾„å¹¶ä¸æ˜¯æ ¹ç›®å½•ï¼Œè€Œæ˜¯ <strong>/kafka</strong> è·¯å¾„</p><p>å¯¹äºä¹‹å‰çš„æŒ‡ä»¤ï¼Œåªéœ€è¦å¢åŠ  kafka çš„configç›®å½•ä¸‹çš„server.propertiesçš„å­˜å‚¨è·¯å¾„åç¼€ ï¼šzookeeper.connect=master:2181,slave1:2181,slave2:2181 <strong>/kafka</strong> å³å¯</p><p>(å››).åˆ›å»ºè„šæœ¬</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#! /bin/bash</span><br><span class="line"></span><br><span class="line">case $1 in </span><br><span class="line">&quot;start&quot;)&#123;</span><br><span class="line"></span><br><span class="line">for i in master slave1 slave2</span><br><span class="line">do</span><br><span class="line">echo &quot;***********kafka $i å¯åŠ¨ ***********&quot;</span><br><span class="line">ssh $i &quot;/usr/local/src/kafka/bin/kafka-server-start.sh -daemon /usr/local/src/kafka/config/server.properties&quot;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">&#125;;;</span><br><span class="line">&quot;stop&quot;)&#123;</span><br><span class="line"></span><br><span class="line">for i in master slave1 slave2</span><br><span class="line">do</span><br><span class="line">echo &quot;***********kafka $i å…³é—­ ***********&quot;</span><br><span class="line">ssh $i &quot;/usr/local/src/kafka/bin/kafka-server-stop.sh&quot;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">&#125;;;</span><br><span class="line">esac</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">åˆ›å»ºï¼škk.sh</span><br><span class="line">ç»™æƒé™ï¼šchmod 777 kk.sh</span><br></pre></td></tr></table></figure><p>(äº”).ç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.ç”Ÿäº§è€…ï¼š</span><br><span class="line">[root@master kafka]# bin/kafka-console-producer.sh --topic first --broker-list master:9092</span><br><span class="line"></span><br><span class="line">2.æ¶ˆè´¹è€…ï¼š</span><br><span class="line">[root@slave1 kafka]# bin/kafka-console-consumer.sh --topic first --bootstrap-server master:9092</span><br><span class="line"></span><br><span class="line">ä»å¤´æ¶ˆè´¹ï¼š</span><br><span class="line">[root@slave2 kafka]# bin/kafka-console-consumer.sh --topic first --bootstrap-server master:9092 --from-beginning</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>(å…­).å½»åº•åˆ é™¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.å…ˆåˆ é™¤kafkaçš„logs rm-rf</span><br><span class="line">2.å†åˆ é™¤zookeeperä¸­çš„zkDataç›®å½•ä¸‹çš„Version2</span><br><span class="line">3.è¿›å…¥zkCli.shæŸ¥çœ‹æ˜¯å¦åªæœ‰zookeeper</span><br></pre></td></tr></table></figure><p>(ä¸ƒ).å¯¹topicåˆ†æ</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20221110163111738.png" alt="image-20221110163111738"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.indesx ç´¢å¼•æœºåˆ¶</span><br><span class="line">.log å­˜æ”¾çœŸå®æ•°æ®</span><br></pre></td></tr></table></figure><h1 id="æ¶ˆè´¹è€…"><a href="#æ¶ˆè´¹è€…" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h1><h2 id="è‡ªå®šä¹‰æ¶ˆè´¹è€…ç»„"><a href="#è‡ªå®šä¹‰æ¶ˆè´¹è€…ç»„" class="headerlink" title="è‡ªå®šä¹‰æ¶ˆè´¹è€…ç»„"></a>è‡ªå®šä¹‰æ¶ˆè´¹è€…ç»„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master config]# vim consumer.properties</span><br></pre></td></tr></table></figure><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20221111082616231.png" alt="image-20221111082616231"></p><h2 id="æ¶ˆè´¹è‡ªå®šä¹‰æ¶ˆè´¹è€…ç»„"><a href="#æ¶ˆè´¹è‡ªå®šä¹‰æ¶ˆè´¹è€…ç»„" class="headerlink" title="æ¶ˆè´¹è‡ªå®šä¹‰æ¶ˆè´¹è€…ç»„"></a>æ¶ˆè´¹è‡ªå®šä¹‰æ¶ˆè´¹è€…ç»„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master kafka]# bin/kafka-console-consumer.sh --bootstrap-server master:9092 --topic bigdata --consumer.config config/consumer.properties </span><br></pre></td></tr></table></figure><h2 id="æ¶ˆè´¹è€…API"><a href="#æ¶ˆè´¹è€…API" class="headerlink" title="æ¶ˆè´¹è€…API"></a>æ¶ˆè´¹è€…API</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è‡ªåŠ¨æäº¤</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.consumer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecord;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.ConsumerRecords;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.consumer.KafkaConsumer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConsumer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºæ¶ˆè´¹è€…ä¿¡æ¯</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.ç»™é…ç½®ä¿¡æ¯èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¿æ¥é›†ç¾¤</span></span><br><span class="line">        properties.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,<span class="string">&quot;master:9092&quot;</span>);</span><br><span class="line">        <span class="comment">//å¼€å¯è‡ªåŠ¨æäº¤</span></span><br><span class="line">        properties.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG,<span class="literal">true</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//å»¶è¿Ÿæäº¤</span></span><br><span class="line"><span class="comment">//        properties.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG,false);</span></span><br><span class="line">        <span class="comment">//è‡ªåŠ¨æäº¤çš„å»¶æ—¶</span></span><br><span class="line">        properties.put(ConsumerConfig.AUTO_COMMIT_INTERVAL_MS_CONFIG,<span class="string">&quot;1000&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//Key,Valueçš„åºåˆ—åŒ–</span></span><br><span class="line">        properties.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG,<span class="string">&quot;org.apache.kafka.common.serialization.StringDeserializer&quot;</span>);</span><br><span class="line">        properties.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG,<span class="string">&quot;org.apache.kafka.common.serialization.StringDeserializer&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¶ˆè´¹è€…ç»„</span></span><br><span class="line">        properties.put(ConsumerConfig.GROUP_ID_CONFIG,<span class="string">&quot;bigdata&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é‡ç½®æ¶ˆè´¹è€…çš„offset</span></span><br><span class="line"><span class="comment">//        properties.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG,&quot;earliest&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºæ¶ˆè´¹è€…</span></span><br><span class="line">        KafkaConsumer&lt;String, String&gt; consumer = <span class="keyword">new</span> <span class="title class_">KafkaConsumer</span>&lt;&gt;(properties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¢é˜…ä¸»é¢˜</span></span><br><span class="line">        consumer.subscribe(Arrays.asList(<span class="string">&quot;first&quot;</span>,<span class="string">&quot;second&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="comment">//è·å–æ•°æ®</span></span><br><span class="line">            ConsumerRecords&lt;String, String&gt; consumerRecords = consumer.poll(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è§£æå¹¶æ‰“å°consumerRecords</span></span><br><span class="line">            <span class="keyword">for</span> (ConsumerRecord&lt;String, String&gt; consumerRecord : consumerRecords) &#123;</span><br><span class="line"></span><br><span class="line">                System.out.println(consumerRecord.key() + <span class="string">&quot;--&quot;</span> + consumerRecord.value());</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ç”Ÿäº§è€…"><a href="#ç”Ÿäº§è€…" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master kafka]# bin/kafka-console-producer.sh --topic clicks --broker-list master:9092</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿäº§è€…API"><a href="#ç”Ÿäº§è€…API" class="headerlink" title="ç”Ÿäº§è€…API"></a>ç”Ÿäº§è€…API</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">æ™®é€šAPI</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.producer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.KafkaProducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerRecord;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyProducer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.åˆ›å»ºKafkaç”Ÿäº§è€…çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.æŒ‡å®šè¿æ¥çš„Kafkaçº§åˆ«</span></span><br><span class="line">        properties.put(<span class="string">&quot;bootstrap.servers&quot;</span>,<span class="string">&quot;master:9092&quot;</span>);</span><br><span class="line"><span class="comment">//        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.ACKåº”ç­”æœºåˆ¶</span></span><br><span class="line">        properties.put(<span class="string">&quot;acks&quot;</span>,<span class="string">&quot;all&quot;</span>);</span><br><span class="line"><span class="comment">//        properties.put(ProducerConfig.ACKS_CONFIG,&quot;all&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.é‡è¯•æ¬¡æ•°</span></span><br><span class="line">        properties.put(<span class="string">&quot;reties&quot;</span>,<span class="number">3</span>);</span><br><span class="line"><span class="comment">//        properties.put(ProducerConfig.RETRIES_CONFIG,3);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.æ‰¹æ¬¡å¤§å°</span></span><br><span class="line">        properties.put(<span class="string">&quot;batch.size&quot;</span>,<span class="string">&quot;16384&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.ç­‰å¾…æ—¶é—´</span></span><br><span class="line">        properties.put(<span class="string">&quot;linger.ms&quot;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//7.ç¼“å†²åŒºå¤§å°</span></span><br><span class="line">        properties.put(<span class="string">&quot;buffer.memory&quot;</span>,<span class="number">33554432</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//8.Key,Valueçš„åºåˆ—åŒ–ç±»</span></span><br><span class="line">        properties.put(<span class="string">&quot;key.serializer&quot;</span>,</span><br><span class="line">                <span class="string">&quot;org.apache.kafka.common.serialization.StringSerializer&quot;</span>);</span><br><span class="line"></span><br><span class="line">        properties.put(<span class="string">&quot;value.serializer&quot;</span>,</span><br><span class="line">                <span class="string">&quot;org.apache.kafka.common.serialization.StringSerializer&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//9.åˆ›å»ºç”Ÿäº§è€…å¯¹è±¡</span></span><br><span class="line">        KafkaProducer&lt;String, String&gt; producer = <span class="keyword">new</span> <span class="title class_">KafkaProducer</span>&lt;String, String&gt;(properties);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//10.å‘é€</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            producer.send(<span class="keyword">new</span> <span class="title class_">ProducerRecord</span>&lt;String, String&gt;(<span class="string">&quot;first&quot;</span>,<span class="string">&quot;beihai--&quot;</span> + i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        Thread.sleep(100);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//11.å…³é—­</span></span><br><span class="line">        producer.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">å›è°ƒAPI</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.atguigu.producer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CallBackMyProducer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.é…ç½®ä¿¡æ¯</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"></span><br><span class="line">        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,<span class="string">&quot;master:9092&quot;</span>);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            å¿«æ·æœç´¢ shift + shift -&gt; StringSerializer -&gt; å¤åˆ¶å…¨å±€è·¯å¾„</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG,</span><br><span class="line">                <span class="string">&quot;org.apache.kafka.common.serialization.StringSerializer&quot;</span>);</span><br><span class="line">        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG,</span><br><span class="line">                <span class="string">&quot;org.apache.kafka.common.serialization.StringSerializer&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.åˆ›å»ºç”Ÿäº§è€…å¯¹è±¡</span></span><br><span class="line">        KafkaProducer&lt;String, String&gt; producer = <span class="keyword">new</span> <span class="title class_">KafkaProducer</span>&lt;String, String&gt;(properties);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        //æ¨¡æ‹Ÿåˆ†åŒºåˆ›å»ºkey</span></span><br><span class="line"><span class="comment">//        ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();</span></span><br><span class="line"><span class="comment">//        list.add(&quot;a&quot;);</span></span><br><span class="line"><span class="comment">//        list.add(&quot;b&quot;);</span></span><br><span class="line"><span class="comment">//        list.add(&quot;c&quot;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.å‘é€æ•°æ®   è¿™ä¸ªå¦‚æœç”¨scalaå†™æ˜¯çœŸçš„è›‡çš®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//keyæ²¡ä»€ä¹ˆç”¨ï¼Œå°±æ˜¯åœ¨ç¼ºåˆ†åŒºçš„æ—¶å€™åšå“ˆå¸Œï¼ŒæŒ‰ç…§keyçš„å“ˆå¸Œå€¼æ¨¡æ‹Ÿåˆ†åŒºæ•°</span></span><br><span class="line">            producer.send(<span class="keyword">new</span> <span class="title class_">ProducerRecord</span>&lt;String, String&gt;(<span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;beihai&quot;</span>, <span class="string">&quot;beihai--&quot;</span> + i), <span class="keyword">new</span> <span class="title class_">Callback</span>() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompletion</span><span class="params">(RecordMetadata metadata, Exception exception)</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (exception == <span class="literal">null</span>) &#123;</span><br><span class="line">                        System.out.println(metadata.partition() + <span class="string">&quot;--&quot;</span> + metadata.offset());</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        exception.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­èµ„æº</span></span><br><span class="line">        producer.close();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h1><h2 id="æ—¶é—´æ‹¦æˆªå™¨"><a href="#æ—¶é—´æ‹¦æˆªå™¨" class="headerlink" title="æ—¶é—´æ‹¦æˆªå™¨"></a>æ—¶é—´æ‹¦æˆªå™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerRecord;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.RecordMetadata;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimeInterceptor</span> <span class="keyword">implements</span> <span class="title class_">ProducerInterceptor</span>&lt;String, String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(Map&lt;String, ?&gt; configs)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ProducerRecord&lt;String, String&gt; <span class="title function_">onSend</span><span class="params">(ProducerRecord&lt;String, String&gt; record)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1.å–å‡ºæ•°æ®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> record.value();</span><br><span class="line"></span><br><span class="line">     <span class="comment">/*</span></span><br><span class="line"><span class="comment">    æ—¶é—´æˆ³æ‹¦æˆªå™¨ï¼Œå–å‡ºå…·ä½“çš„æ•°æ®ï¼Œè¿”å›å€¼çš„æ•°æ®ç±»å‹æ˜¯å…³é”®ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ProducerRecord</span>&lt;String,String&gt;(record.topic(),record.partition()</span><br><span class="line">        , record.key(), System.currentTimeMillis()+<span class="string">&quot;,&quot;</span>+value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAcknowledgement</span><span class="params">(RecordMetadata metadata, Exception exception)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ•°é‡æ‹¦æˆªå™¨"><a href="#æ•°é‡æ‹¦æˆªå™¨" class="headerlink" title="æ•°é‡æ‹¦æˆªå™¨"></a>æ•°é‡æ‹¦æˆªå™¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.ProducerRecord;</span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.RecordMetadata;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CounterInterceptor</span> <span class="keyword">implements</span> <span class="title class_">ProducerInterceptor</span>&lt;String,String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> success;</span><br><span class="line">    <span class="type">int</span> error;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(Map&lt;String, ?&gt; configs)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ProducerRecord&lt;String, String&gt; <span class="title function_">onSend</span><span class="params">(ProducerRecord&lt;String, String&gt; record)</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> record;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onAcknowledgement</span><span class="params">(RecordMetadata metadata, Exception exception)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (metadata != <span class="literal">null</span>)&#123;</span><br><span class="line">            success++;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            error++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;success:&quot;</span> + success );</span><br><span class="line">        System.out.println(<span class="string">&quot;error:&quot;</span> + error );</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ‹¦æˆªå™¨å®ä¾‹"><a href="#æ‹¦æˆªå™¨å®ä¾‹" class="headerlink" title="æ‹¦æˆªå™¨å®ä¾‹"></a>æ‹¦æˆªå™¨å®ä¾‹</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.kafka.clients.producer.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"></span><br><span class="line">        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,<span class="string">&quot;master:9092&quot;</span>);</span><br><span class="line">        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG,<span class="string">&quot;org.apache.kafka.common.serialization.StringSerializer&quot;</span>);</span><br><span class="line">        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG,<span class="string">&quot;org.apache.kafka.common.serialization.StringSerializer&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ æ‹¦æˆªå™¨</span></span><br><span class="line">        ArrayList&lt;String&gt; interceptors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        interceptors.add(<span class="string">&quot;com.atguigu.interceptor.TimeInterceptor&quot;</span>);</span><br><span class="line">        interceptors.add(<span class="string">&quot;com.atguigu.interceptor.CounterInterceptor&quot;</span>);</span><br><span class="line">        properties.put(ProducerConfig.INTERCEPTOR_CLASSES_CONFIG,interceptors);</span><br><span class="line"></span><br><span class="line">        KafkaProducer&lt;String, String&gt; producer = <span class="keyword">new</span> <span class="title class_">KafkaProducer</span>&lt;String, String&gt;(properties);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            producer.send(<span class="keyword">new</span> <span class="title class_">ProducerRecord</span>&lt;String, String&gt;(<span class="string">&quot;first&quot;</span>, <span class="number">0</span>,<span class="string">&quot;beihai&quot;</span>,<span class="string">&quot;beihai--&quot;</span> + i), <span class="keyword">new</span> <span class="title class_">Callback</span>() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompletion</span><span class="params">(RecordMetadata metadata, Exception exception)</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (exception == <span class="literal">null</span>) &#123;</span><br><span class="line">                        System.out.println(metadata.partition() + <span class="string">&quot;--&quot;</span> + metadata.offset());</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        exception.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        producer.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Kafka-flumeå¯¹æ¥"><a href="#Kafka-flumeå¯¹æ¥" class="headerlink" title="Kafka-flumeå¯¹æ¥"></a>Kafka-flumeå¯¹æ¥</h1><h2 id="1-ç®€å•æ¡ˆä¾‹åˆ©ç”¨netcat"><a href="#1-ç®€å•æ¡ˆä¾‹åˆ©ç”¨netcat" class="headerlink" title="1.ç®€å•æ¡ˆä¾‹åˆ©ç”¨netcat"></a>1.ç®€å•æ¡ˆä¾‹åˆ©ç”¨netcat</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">flumeé…ç½®ï¼š</span><br><span class="line"></span><br><span class="line">#Name</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1</span><br><span class="line">a1.channels = c1</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a1.sources.r1.type = netcat</span><br><span class="line">a1.sources.r1.bind = localhost</span><br><span class="line">a1.sources.r1.port = 44444</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a1.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink</span><br><span class="line">a1.sinks.k1.kafka.topic = mytopic</span><br><span class="line">a1.sinks.k1.kafka.bootstrap.servers = master:9092</span><br><span class="line">a1.sinks.k1.kafka.flumeBatchSize = 20</span><br><span class="line">a1.sinks.k1.kafka.producer.acks = 1</span><br><span class="line">a1.sinks.k1.kafka.producer.linger.ms = 1</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 1000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a1.sources.r1.channels = c1</span><br><span class="line">a1.sinks.k1.channel = c1</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-ä½¿ç”¨å¤šè·¯å¤ç”¨æ¨¡å¼"><a href="#2-ä½¿ç”¨å¤šè·¯å¤ç”¨æ¨¡å¼" class="headerlink" title="2.ä½¿ç”¨å¤šè·¯å¤ç”¨æ¨¡å¼"></a>2.ä½¿ç”¨å¤šè·¯å¤ç”¨æ¨¡å¼</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1ã€åœ¨MasterèŠ‚ç‚¹ä½¿ç”¨Flumeé‡‡é›†å®æ—¶æ•°æ®ç”Ÿæˆå™¨10050ç«¯å£çš„socketæ•°æ®ï¼Œå°†æ•°æ®å­˜å…¥åˆ°Kafkaçš„Topicä¸­ï¼ˆTopicåç§°ä¸ºorderï¼Œåˆ†åŒºæ•°ä¸º4ï¼‰ï¼Œä½¿ç”¨Kafkaè‡ªå¸¦çš„æ¶ˆè´¹è€…æ¶ˆè´¹orderï¼ˆTopicï¼‰ä¸­çš„æ•°æ®ï¼Œå°†å‰2æ¡æ•°æ®çš„ç»“æœæˆªå›¾ç²˜è´´è‡³å¯¹åº”æŠ¥å‘Šä¸­ï¼›</span><br><span class="line">2ã€é‡‡ç”¨å¤šè·¯å¤ç”¨æ¨¡å¼ï¼ŒFlumeæ¥æ”¶æ•°æ®æ³¨å…¥kafka çš„åŒæ—¶ï¼Œå°†æ•°æ®å¤‡ä»½åˆ°HDFSç›®å½•/user/test/flumebackupä¸‹ï¼Œå°†æŸ¥çœ‹å¤‡ä»½ç›®å½•ä¸‹çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„å‰2æ¡æ•°æ®çš„å‘½ä»¤ä¸ç»“æœæˆªå›¾ç²˜è´´è‡³å¯¹åº”æŠ¥å‘Šä¸­ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">flume1</span><br><span class="line"></span><br><span class="line">#Name</span><br><span class="line">a1.sources = r1</span><br><span class="line">a1.sinks = k1 k2</span><br><span class="line">a1.channels = c1 c2</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a1.sources.r1.type = netcat</span><br><span class="line">a1.sources.r1.bind = localhost</span><br><span class="line">a1.sources.r1.port = 10050</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a1.sinks.k1.type = avro</span><br><span class="line">a1.sinks.k1.hostname = localhost</span><br><span class="line">a1.sinks.k1.port = 7777</span><br><span class="line"></span><br><span class="line">a1.sinks.k2.type = avro</span><br><span class="line">a1.sinks.k2.hostname = localhost</span><br><span class="line">a1.sinks.k2.port = 8888</span><br><span class="line"></span><br><span class="line">#Channel selector</span><br><span class="line">a1.sources.r1.selector.type = replicating</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a1.channels.c1.type = memory</span><br><span class="line">a1.channels.c1.capacity = 10000</span><br><span class="line">a1.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">a1.channels.c2.type = memory</span><br><span class="line">a1.channels.c2.capacity = 10000</span><br><span class="line">a1.channels.c2.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a1.sources.r1.channels = c1 c2</span><br><span class="line">a1.sinks.k1.channel = c1</span><br><span class="line">a1.sinks.k2.channel = c2</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">kafka</span><br><span class="line"></span><br><span class="line">#Name</span><br><span class="line">a2.sources = r1</span><br><span class="line">a2.sinks = k1</span><br><span class="line">a2.channels = c1</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a2.sources.r1.type = avro</span><br><span class="line">a2.sources.r1.bind = localhost</span><br><span class="line">a2.sources.r1.port = 7777</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a2.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink</span><br><span class="line">a2.sinks,k1.kafka.topic = order</span><br><span class="line">a2.sinks.k1.kafka.bootstrap.servers = master:9092</span><br><span class="line">a2.sinks.k1.kafka.flumeBatchSize = 20</span><br><span class="line">a2.sinks.k1.kafka.producer.acks = 1</span><br><span class="line">a2.sinks.k1.kafka.producer.linger.ms = 1</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a2.channels.c1.type = memory</span><br><span class="line">a2.channels.c1.capacity = 1000</span><br><span class="line">a2.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a2.sources.r1.channels = c1</span><br><span class="line">a2.sinks.k1.channel = c1</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">HDFS</span><br><span class="line"></span><br><span class="line">#Name</span><br><span class="line">a3.sources = r1</span><br><span class="line">a3.sinks = k1</span><br><span class="line">a3.channels = c1</span><br><span class="line"></span><br><span class="line">#Source</span><br><span class="line">a3.sources.r1.type =avro</span><br><span class="line">a3.sources.r1.bind = localhost</span><br><span class="line">a3.sources.r1.port = 8888</span><br><span class="line"></span><br><span class="line">#Sink</span><br><span class="line">a3.sinks.k1.type = hdfs</span><br><span class="line">a3.sinks.k1.hdfs.path = hdfs://master:9000/user/test/flumebackup</span><br><span class="line">a3.sinks.k1.hdfs.filePrefix = beihai-</span><br><span class="line">a3.sinks.k1.hdfs.round = true</span><br><span class="line">a3.sinks.k1.hdfs.roundValue = 1</span><br><span class="line">a3.sinks.k1.hdfs.roundUnit = hour</span><br><span class="line">a3.sinks.k1.hdfs.useLocalTimeStamp = true</span><br><span class="line">a3.sinks.k1.hdfs.batchSize = 100</span><br><span class="line">a3.sinks.k1.hdfs.fileType = DataStream</span><br><span class="line">a3.sinks.k1.hdfs.rollInterval = 60</span><br><span class="line">a3.sinks.k1.hdfs.rollSize = 134217700</span><br><span class="line">a3.sinks.k1.hdfs.rollCount = 0</span><br><span class="line"></span><br><span class="line">#Channel</span><br><span class="line">a3.channels.c1.type = memory</span><br><span class="line">a3.channels.c1.capacity = 10000</span><br><span class="line">a3.channels.c1.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">#Bind</span><br><span class="line">a3.sources.r1.channels = c1</span><br><span class="line">a3.sinks.k1.channel = c1</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# hadoop fs -cat /user/test/flumebackup/logs-.1668222346787 |head -2</span><br><span class="line">156</span><br><span class="line">5322</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SparkStreaming</title>
      <link href="/2022/12/08/SparkStreaming/"/>
      <url>/2022/12/08/SparkStreaming/</url>
      
        <content type="html"><![CDATA[<h2 id="SparkStreaming"><a href="#SparkStreaming" class="headerlink" title="SparkStreaming"></a>SparkStreaming</h2><p>å‡†å®æ—¶(ç§’ï¼Œåˆ†é’Ÿ)ï¼Œå¾®æ‰¹æ¬¡(å¤šé•¿æ—¶é—´å¤„ç†ä¸€æ¬¡)çš„æ•°æ®å¤„ç†æ¡†æ¶</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">SparkStreaming</span>.<span class="type">Dstream</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkConf</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.streaming.&#123;<span class="type">Seconds</span>, <span class="type">StreamingContext</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">wordcount</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//todo åˆ›å»ºç¯å¢ƒ</span></span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç¯å¢ƒé…ç½®</span></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">val</span> sparkConf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[*]&quot;</span>).setAppName(<span class="string">&quot;sparkStreaming&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> ssc = <span class="keyword">new</span> <span class="type">StreamingContext</span>(sparkConf, <span class="type">Seconds</span>(<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    <span class="keyword">val</span> lines = ssc.socketTextStream(<span class="string">&quot;localhost&quot;</span>, <span class="number">9999</span>)</span><br><span class="line">    <span class="keyword">val</span> words = lines.flatMap(_.split(<span class="string">&quot; &quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> wordToOne = words.map((_, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> result = wordToOne.reduceByKey(_ + _)</span><br><span class="line"></span><br><span class="line">    result.print()</span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line"></span><br><span class="line">    ssc.awaitTermination()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//todo</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€æ•°æ®ï¼š</span></span><br><span class="line">nc -lp <span class="number">9999</span>éœ€è¦ä¸‹è½½netcatè½¯ä»¶ï¼Œlinuxè‡ªå¸¦</span><br><span class="line">hello spark</span><br></pre></td></tr></table></figure><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">RDDStream</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) &#123;</span><br><span class="line"> <span class="comment">//1.åˆå§‹åŒ– Spark é…ç½®ä¿¡æ¯</span></span><br><span class="line"> <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setMaster(<span class="string">&quot;local[*]&quot;</span>).setAppName(<span class="string">&quot;RDDStream&quot;</span>)</span><br><span class="line"> <span class="comment">//2.åˆå§‹åŒ– SparkStreamingContext</span></span><br><span class="line"> <span class="keyword">val</span> ssc = <span class="keyword">new</span> <span class="type">StreamingContext</span>(conf, <span class="type">Seconds</span>(<span class="number">4</span>))</span><br><span class="line"> <span class="comment">//3.åˆ›å»º RDD é˜Ÿåˆ—</span></span><br><span class="line"> <span class="keyword">val</span> rddQueue = <span class="keyword">new</span> mutable.<span class="type">Queue</span>[<span class="type">RDD</span>[<span class="type">Int</span>]]()</span><br><span class="line"> <span class="comment">//4.åˆ›å»º QueueInputDStream</span></span><br><span class="line"> <span class="keyword">val</span> inputStream = ssc.queueStream(rddQueue,oneAtATime = <span class="literal">false</span>)</span><br><span class="line"> <span class="comment">//5.å¤„ç†é˜Ÿåˆ—ä¸­çš„ RDD æ•°æ®</span></span><br><span class="line"> <span class="keyword">val</span> mappedStream = inputStream.map((_,<span class="number">1</span>))</span><br><span class="line"> <span class="keyword">val</span> reducedStream = mappedStream.reduceByKey(_ + _)</span><br><span class="line"> <span class="comment">//6.æ‰“å°ç»“æœ</span></span><br><span class="line"> reducedStream.print()</span><br><span class="line"> <span class="comment">//7.å¯åŠ¨ä»»åŠ¡</span></span><br><span class="line"> ssc.start()</span><br><span class="line"><span class="comment">//8.å¾ªç¯åˆ›å»ºå¹¶å‘ RDD é˜Ÿåˆ—ä¸­æ”¾å…¥ RDD</span></span><br><span class="line"> <span class="keyword">for</span> (i &lt;- <span class="number">1</span> to <span class="number">5</span>) &#123;</span><br><span class="line"> rddQueue += ssc.sparkContext.makeRDD(<span class="number">1</span> to <span class="number">300</span>, <span class="number">10</span>)</span><br><span class="line"> <span class="type">Thread</span>.sleep(<span class="number">2000</span>)</span><br><span class="line"> &#125;</span><br><span class="line"> ssc.awaitTermination()</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-------------------------------------------</span><br><span class="line"><span class="type">Time</span>: <span class="number">1539075280000</span> ms</span><br><span class="line">-------------------------------------------</span><br><span class="line">(<span class="number">4</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">0</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">6</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">8</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">2</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">1</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">3</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">7</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">9</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">5</span>,<span class="number">60</span>)</span><br><span class="line">-------------------------------------------</span><br><span class="line"><span class="type">Time</span>: <span class="number">1539075284000</span> ms</span><br><span class="line">-------------------------------------------</span><br><span class="line">(<span class="number">4</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">0</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">6</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">8</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">2</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">1</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">3</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">7</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">9</span>,<span class="number">60</span>)</span><br><span class="line">(<span class="number">5</span>,<span class="number">60</span>)</span><br><span class="line">-------------------------------------------</span><br><span class="line"><span class="type">Time</span>: <span class="number">1539075288000</span> ms</span><br><span class="line">-------------------------------------------</span><br><span class="line">(<span class="number">4</span>,<span class="number">30</span>)</span><br><span class="line">(<span class="number">0</span>,<span class="number">30</span>)</span><br><span class="line">(<span class="number">6</span>,<span class="number">30</span>)</span><br><span class="line">(<span class="number">8</span>,<span class="number">30</span>)</span><br><span class="line">(<span class="number">2</span>,<span class="number">30</span>)</span><br><span class="line">(<span class="number">1</span>,<span class="number">30</span>)</span><br><span class="line">(<span class="number">3</span>,<span class="number">30</span>)</span><br><span class="line">(<span class="number">7</span>,<span class="number">30</span>)</span><br><span class="line">(<span class="number">9</span>,<span class="number">30</span>)</span><br><span class="line">(<span class="number">5</span>,<span class="number">30</span>)</span><br><span class="line">-------------------------------------------</span><br><span class="line"><span class="type">Time</span>: <span class="number">1539075292000</span> ms</span><br><span class="line">-------------------------------------------</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sqoop</title>
      <link href="/2022/12/08/Sqoop/"/>
      <url>/2022/12/08/Sqoop/</url>
      
        <content type="html"><![CDATA[<h1 id="Sqoop"><a href="#Sqoop" class="headerlink" title="Sqoop"></a>Sqoop</h1><p>sqoopæ˜¯åœ¨Hadoopç”Ÿæ€ä½“ç³»å’Œå…³ç³»å‹æ•°æ®åº“ä¹‹é—´ä¼ é€æ•°æ®çš„ä¸€ç§å·¥å…·<br>å·¥ä½œæœºåˆ¶ï¼š<br>    å°†å¯¼å…¥æˆ–å¯¼å‡ºçš„å‘½ä»¤ç¿»è¯‘æˆmapreduceç¨‹åº</p><p><img src="C:\Users\beihai\AppData\Roaming\Typora\typora-user-images\image-20221020153227605.png" alt="image-20221020153227605"></p><h2 id="SqoopéªŒè¯å¯åŠ¨"><a href="#SqoopéªŒè¯å¯åŠ¨" class="headerlink" title="SqoopéªŒè¯å¯åŠ¨"></a>SqoopéªŒè¯å¯åŠ¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/sqoop list-databases --connect jdbc:mysql://localhost:3306/ --username root --password 000000</span><br></pre></td></tr></table></figure><h1 id="Sqoopå…¨é‡æ•°æ®å¯¼å…¥"><a href="#Sqoopå…¨é‡æ•°æ®å¯¼å…¥" class="headerlink" title="Sqoopå…¨é‡æ•°æ®å¯¼å…¥"></a>Sqoopå…¨é‡æ•°æ®å¯¼å…¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å…¨é‡æ•°æ®ï¼šæ‰€æœ‰æ•°æ®</span><br></pre></td></tr></table></figure><h2 id="Sqoopå…¨é‡å¯¼å…¥Mysqlè¡¨æ•°æ®åˆ°HDFS"><a href="#Sqoopå…¨é‡å¯¼å…¥Mysqlè¡¨æ•°æ®åˆ°HDFS" class="headerlink" title="Sqoopå…¨é‡å¯¼å…¥Mysqlè¡¨æ•°æ®åˆ°HDFS"></a>Sqoopå…¨é‡å¯¼å…¥Mysqlè¡¨æ•°æ®åˆ°HDFS</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ä¸‹é¢çš„å‘½ä»¤ç”¨äºä» MySQL æ•°æ®åº“æœåŠ¡å™¨ä¸­çš„ emp è¡¨å¯¼å…¥ HDFSã€‚</span><br><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://Master:3306/yyh \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--delete-target-dir \</span><br><span class="line">--target-dir /sqoopresult \</span><br><span class="line">--fields-terminated-by &#x27;\t&#x27; \</span><br><span class="line">--table beihaibei --m 1</span><br><span class="line"></span><br><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://master:3306/userdb \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--target-dir /sqoopresult2 \</span><br><span class="line">--fields-terminated-by &#x27;\t&#x27; \</span><br><span class="line">--table emp --m 1</span><br><span class="line"></span><br><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://master:3306/userdb \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--target-dir /sqoopresult3 \</span><br><span class="line">--fields-terminated-by &#x27;\t&#x27; \</span><br><span class="line">--split-by id \</span><br><span class="line">--table emp </span><br><span class="line">--m 2</span><br><span class="line">--driver com.mysql.jdbc.Driver  </span><br><span class="line"></span><br><span class="line">è¿™é‡Œdriverå¿…é¡»åŠ ä¸Š</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">è¿™é‡Œçš„sqoop importæ˜¯å›ºå®šæ­é…</span><br><span class="line"></span><br><span class="line">Masteræ˜¯ä¸»èŠ‚ç‚¹ï¼Œå¦‚æœæœ¬åœ°å¯ä»¥å†™localhostï¼Œ  userdbæ˜¯mysqlæ‰€é€‰æ•°æ®åº“</span><br><span class="line"></span><br><span class="line">username/password æ˜¯mysqlçš„è´¦å·å’Œå¯†ç </span><br><span class="line"></span><br><span class="line">delete-target-dir å®ƒçš„æ„æ€æ˜¯æŸ¥çœ‹hdfsä¸Šæ˜¯å¦æœ‰æ‰€åˆ›çš„æ–‡ä»¶å¤¹ï¼Œå¦‚æœæœ‰å°±åˆ å»é‡æ–°è¦†ç›–</span><br><span class="line"></span><br><span class="line">target-dir /sqoopresult æ˜¯åœ¨hdfsä¸Šåˆ›ä¸€æ–‡ä»¶å¤¹sqoopresultï¼Œå°†empè¡¨å¯¼å…¥hdfs</span><br><span class="line"></span><br><span class="line">emp æ˜¯mysqlæ•°æ®åº“çš„è¡¨å</span><br><span class="line"></span><br><span class="line">--m 1 æ˜¯è¿è¡Œmapæ“ä½œçš„ä¸€ä¸ªè¿›ç¨‹</span><br><span class="line"></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--columns</span><br></pre></td></tr></table></figure><h2 id="åˆ©ç”¨Hive2æ–¹å¼è¿æ¥"><a href="#åˆ©ç”¨Hive2æ–¹å¼è¿æ¥" class="headerlink" title="åˆ©ç”¨Hive2æ–¹å¼è¿æ¥"></a>åˆ©ç”¨Hive2æ–¹å¼è¿æ¥</h2><h3 id="1-å¼€å¯æœåŠ¡"><a href="#1-å¼€å¯æœåŠ¡" class="headerlink" title="1.å¼€å¯æœåŠ¡"></a>1.å¼€å¯æœåŠ¡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@hadoop bin]# nohup hive --service metastore &amp;</span><br><span class="line">[root@hadoop bin]# nohup hive --service hiveserver2 &amp;</span><br></pre></td></tr></table></figure><h3 id="2-å»ºç«‹è¿æ¥"><a href="#2-å»ºç«‹è¿æ¥" class="headerlink" title="2.å»ºç«‹è¿æ¥"></a>2.å»ºç«‹è¿æ¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@slave2 bin]# beeline</span><br><span class="line">Beeline version 1.2.1.spark2 by Apache Hive</span><br><span class="line">beeline&gt; ! connect jdbc:hive2://master:10000</span><br><span class="line">Connecting to jdbc:hive2://master:10000</span><br><span class="line">Enter username for jdbc:hive2://master:10000: root</span><br><span class="line">Enter password for jdbc:hive2://master:10000: </span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">0: jdbc:hive2://master:10000&gt;</span><br></pre></td></tr></table></figure><h3 id=""><a href="#" class="headerlink" title=" "></a> </h3><h2 id="Sqoopå…¨é‡å¯¼å…¥Mysqlè¡¨æ•°æ®åˆ°Hive"><a href="#Sqoopå…¨é‡å¯¼å…¥Mysqlè¡¨æ•°æ®åˆ°Hive" class="headerlink" title="Sqoopå…¨é‡å¯¼å…¥Mysqlè¡¨æ•°æ®åˆ°Hive"></a>Sqoopå…¨é‡å¯¼å…¥Mysqlè¡¨æ•°æ®åˆ°Hive</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">æ–¹å¼ä¸€ï¼šå¤åˆ¶è¡¨ç»“æ„</span><br><span class="line">1.å°†å…³ç³»å‹æ•°æ®çš„è¡¨ç»“æ„å¤åˆ¶åˆ°hiveä¸­</span><br><span class="line">bin/sqoop create-hive-table \</span><br><span class="line">--connect jdbc:mysql://master:3306/shtd_store \</span><br><span class="line">--table ChangeRecord \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--hive-table &#x27;dwd.fact_change_record&#x27;</span><br><span class="line"></span><br><span class="line">2.ä»å…³ç³»æ•°æ®åº“å¯¼å…¥æ–‡ä»¶åˆ°hiveä¸­</span><br><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://master:3306/userdb \</span><br><span class="line">--username root \</span><br><span class="line">--password hadoop \</span><br><span class="line">--table emp_add \</span><br><span class="line">--hive-table test.emp_add1 \</span><br><span class="line">--hive-import \</span><br><span class="line">--m 1</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹è¡¨ç»“æ„ï¼šdesc emp_add1</span><br><span class="line">æŸ¥çœ‹è¡¨ï¼šselect * from emp_add1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ–¹å¼äºŒï¼šç›´æ¥å¯¼å…¥æ•°æ®åˆ°hiveä¸­ åŒ…æ‹¬è¡¨ç»“æ„å’Œæ•°æ®</span><br><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://master:3306/userdb \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--table emp_add \</span><br><span class="line">--hive-import \</span><br><span class="line">--m 1 \</span><br><span class="line">--hive-database sqoop;</span><br></pre></td></tr></table></figure><p>å¯¼å…¥é‡åˆ°çš„é”™è¯¯è§£å†³ï¼š</p><p>1.æŠ¥é”™ï¼šFAILED: SemanticException [Error 10072]: Database does not exist: liantong0826</p><p>è§£å†³æ–¹æ³•ï¼šå¤åˆ¶hive/confä¸‹çš„hive-site.xmlåˆ°sqoopå·¥ä½œç›®å½•çš„confä¸‹</p><p>2.æ—¶åŒºé—®é¢˜</p><p>3.SSH</p><p>4.hiveçš„ç¯å¢ƒå˜é‡</p><h2 id="WhereæŸ¥è¯¢è¿‡æ»¤"><a href="#WhereæŸ¥è¯¢è¿‡æ»¤" class="headerlink" title="WhereæŸ¥è¯¢è¿‡æ»¤"></a>WhereæŸ¥è¯¢è¿‡æ»¤</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@master bin]# sqoop import \</span><br><span class="line">&gt; --connect jdbc:mysql://master:3306/userdb \</span><br><span class="line">&gt; --username root \</span><br><span class="line">&gt; --password 000000 \</span><br><span class="line">&gt; --table emp_add \</span><br><span class="line">&gt; --where &quot;city = &#x27;sec-bad&#x27; &quot; \</span><br><span class="line">&gt; --target-dir /sqoopresult02 \</span><br><span class="line">&gt; --m 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¾“å‡ºç»“æœï¼š</span><br><span class="line">[root@master bin]# hdfs dfs -cat /sqoopresult02/part-m-00000</span><br><span class="line">1202,108I,aoc,sec-bad</span><br><span class="line">1204,78B,old city,sec-bad</span><br><span class="line">1205,720X,hitec,sec-bad</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="QueryæŸ¥è¯¢"><a href="#QueryæŸ¥è¯¢" class="headerlink" title="QueryæŸ¥è¯¢"></a>QueryæŸ¥è¯¢</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@master bin]# sqoop import \</span><br><span class="line">&gt; --connect jdbc:mysql://master:3306/userdb \</span><br><span class="line">&gt; --username root \</span><br><span class="line">&gt; --password 000000 \</span><br><span class="line">&gt; --target-dir /querysqoop01 \</span><br><span class="line">&gt; --query &#x27;select id,name,deg from emp WHERE  id&gt;1203 and $CONDITIONS&#x27; \</span><br><span class="line">&gt; --split-by id \</span><br><span class="line">&gt; --fields-terminated-by &#x27;\001&#x27; \</span><br><span class="line">&gt; --m 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¿…è¦ç‚¹ï¼š</span><br><span class="line">1.ä½¿ç”¨query sql è¯­å¥æ¥æŸ¥è¯¢ä¸ç”¨åŠ å‚æ•°--table</span><br><span class="line">2.å¿…é¡»æ·»åŠ whereæ¡ä»¶</span><br><span class="line">3.whereæ¡ä»¶ä¹‹åå¿…é¡»å¸¦ä¸€ä¸ª$CONDITIONS å­—ç¬¦ä¸²</span><br><span class="line">4.query sql è¯­å¥å¿…é¡»ç”¨å•å¼•å·&#x27;&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å¢é‡æ•°æ®å¯¼å…¥"><a href="#å¢é‡æ•°æ®å¯¼å…¥" class="headerlink" title="å¢é‡æ•°æ®å¯¼å…¥"></a>å¢é‡æ•°æ®å¯¼å…¥</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å¢é‡å¯¼å…¥æ˜¯ä»…å¯¼å…¥æ–°æ·»åŠ çš„è¡¨ä¸­çš„è¡Œçš„æŠ€æœ¯ã€‚ </span><br><span class="line"></span><br><span class="line">--check-column (col) ç”¨æ¥æŒ‡å®šä¸€äº›åˆ—ï¼Œè¿™äº›åˆ—åœ¨å¢é‡å¯¼å…¥æ—¶ç”¨æ¥æ£€æŸ¥è¿™äº›æ•°æ®æ˜¯å¦ä½œä¸ºå¢é‡æ•°æ® è¿›è¡Œå¯¼å…¥ï¼Œå’Œå…³ç³»å‹æ•°æ®åº“ä¸­çš„è‡ªå¢å­—æ®µåŠæ—¶é—´æˆ³ç±»ä¼¼ã€‚ æ³¨æ„:è¿™äº›è¢«æŒ‡å®šçš„åˆ—çš„ç±»å‹ä¸èƒ½ä½¿ä»»æ„å­—ç¬¦ç±»å‹ï¼Œå¦‚ charã€varchar ç­‰ç±» å‹éƒ½æ˜¯ä¸å¯ä»¥çš„ï¼ŒåŒæ—¶-- check-column å¯ä»¥å»æŒ‡å®šå¤šä¸ªåˆ—ã€‚ </span><br><span class="line">--incremental (mode) appendï¼šè¿½åŠ ï¼Œæ¯”å¦‚å¯¹å¤§äº last-value æŒ‡å®šçš„å€¼ä¹‹åçš„è®°å½•è¿›è¡Œè¿½åŠ å¯¼å…¥ã€‚ lastmodifiedï¼šæœ€åçš„ä¿®æ”¹æ—¶é—´ï¼Œè¿½åŠ  last-value æŒ‡å®šçš„æ—¥æœŸä¹‹åçš„è®°å½• </span><br><span class="line"></span><br><span class="line">--last-value (value)  æŒ‡å®šè‡ªä»ä¸Šæ¬¡å¯¼å…¥ååˆ—çš„æœ€å¤§å€¼ï¼ˆå¤§äºè¯¥æŒ‡å®šçš„å€¼ï¼‰ï¼Œä¹Ÿå¯ä»¥è‡ªå·±è®¾å®šæŸä¸€å€¼</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Appendæ¨¡å¼å¢é‡å¯¼å…¥"><a href="#Appendæ¨¡å¼å¢é‡å¯¼å…¥" class="headerlink" title="Appendæ¨¡å¼å¢é‡å¯¼å…¥"></a>Appendæ¨¡å¼å¢é‡å¯¼å…¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å­—æ®µå¢é‡</span><br><span class="line">[root@master bin]# sqoop import \</span><br><span class="line">&gt; --connect jdbc:mysql://master:3306/userdb \</span><br><span class="line">&gt; --username root \</span><br><span class="line">&gt; --password 000000 \</span><br><span class="line">&gt; --table emp --m 1 \</span><br><span class="line">&gt; --target-dir /appendsult \</span><br><span class="line">&gt; --incremental append \</span><br><span class="line">&gt; --check-column id \</span><br><span class="line">&gt; --last-value 1205</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Lastmodifiedæ¨¡å¼å¢é‡å¯¼å…¥-append-merge-key"><a href="#Lastmodifiedæ¨¡å¼å¢é‡å¯¼å…¥-append-merge-key" class="headerlink" title="Lastmodifiedæ¨¡å¼å¢é‡å¯¼å…¥(append+merge-key)"></a>Lastmodifiedæ¨¡å¼å¢é‡å¯¼å…¥(append+merge-key)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">æ—¶é—´æˆ³å¢é‡</span><br><span class="line">create table customertest(id int,name varchar(20),last_mod timestamp default current_timestamp on update current_timestamp);</span><br><span class="line"></span><br><span class="line">insert into customertest(id,name) values(1,&#x27;neil&#x27;);</span><br><span class="line">insert into customertest(id,name) values(2,&#x27;jack&#x27;);</span><br><span class="line">insert into customertest(id,name) values(3,&#x27;martin&#x27;);</span><br><span class="line">insert into customertest(id,name) values(4,&#x27;tony&#x27;);</span><br><span class="line">insert into customertest(id,name) values(5,&#x27;eric&#x27;);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">å†æ¬¡æ’å…¥ä¸€æ¡æ•°æ®è¿›å…¥customertestè¡¨</span><br><span class="line">insert into customertest(id,name) values(6,&#x27;james&#x27;);</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨incrementalçš„æ–¹å¼è¿›è¡Œå¢é‡çš„å¯¼å…¥:</span><br><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://master:3306/userdb \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--table customertest \</span><br><span class="line">--target-dir /lastmodifiedresult \</span><br><span class="line">--check-column last_mod \</span><br><span class="line">--incremental lastmodified \</span><br><span class="line">--last-value &quot;2022-10-23 16:05:39&quot; \</span><br><span class="line">--m 1 \</span><br><span class="line">--append</span><br><span class="line"></span><br><span class="line">æ­¤å¤„å·²ç»ä¼šå¯¼å…¥æˆ‘ä»¬æœ€åæ’å…¥çš„ä¸€æ¡è®°å½•,ä½†æ˜¯æˆ‘ä»¬å´å‘ç°æ­¤å¤„æ’å…¥äº†2æ¡æ•°æ®ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ </span><br><span class="line">è¿™æ˜¯å› ä¸ºé‡‡ç”¨lastmodifiedæ¨¡å¼å»å¤„ç†å¢é‡æ—¶ï¼Œä¼šå°†å¤§äºç­‰äºlast-valueå€¼çš„æ•°æ®å½“åšå¢é‡æ’å…¥</span><br><span class="line"></span><br><span class="line">æ³¨æ„: </span><br><span class="line">ä½¿ç”¨lastmodifiedæ¨¡å¼è¿›è¡Œå¢é‡å¤„ç†è¦æŒ‡å®šå¢é‡æ•°æ®æ˜¯ä»¥appendæ¨¡å¼(é™„åŠ )è¿˜æ˜¯merge-key(åˆå¹¶)æ¨¡å¼æ·»åŠ  </span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">merge-byçš„æ¨¡å¼</span><br><span class="line"></span><br><span class="line">update customertest set name = &#x27;Neil&#x27; where id = 1;</span><br><span class="line">æ›´æ–°ä¹‹åï¼Œè¿™æ¡æ•°æ®çš„æ—¶é—´æˆ³ä¼šæ›´æ–°ä¸ºæˆ‘ä»¬æ›´æ–°æ•°æ®æ—¶çš„ç³»ç»Ÿæ—¶é—´.</span><br><span class="line">æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼ŒæŠŠidå­—æ®µä½œä¸ºmerge-key:</span><br><span class="line"></span><br><span class="line">bin/sqoop import \</span><br><span class="line">--connect jdbc:mysql://master:3306/userdb \</span><br><span class="line">--username root \</span><br><span class="line">--password 000000 \</span><br><span class="line">--table customertest \</span><br><span class="line">--target-dir /lastmodifiedresult \</span><br><span class="line">--check-column last_mod \</span><br><span class="line">--incremental lastmodified \</span><br><span class="line">--last-value &quot;2022-10-23 16:05:39&quot; \</span><br><span class="line">--m 1 \</span><br><span class="line">--merge-key id </span><br></pre></td></tr></table></figure><h1 id="Sqoopå¯¼å‡º"><a href="#Sqoopå¯¼å‡º" class="headerlink" title="Sqoopå¯¼å‡º"></a>Sqoopå¯¼å‡º</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä»Hadoopç”Ÿæ€ä½“ç³»å¯¼å‡ºåˆ°RDBMSæ•°æ®åº“</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å°†æ•°æ®ä» Hadoop ç”Ÿæ€ä½“ç³»å¯¼å‡ºåˆ° RDBMS æ•°æ®åº“å¯¼å‡ºå‰ï¼Œç›®æ ‡è¡¨å¿…é¡»å­˜åœ¨äº</span><br><span class="line">ç›®æ ‡æ•°æ®åº“ä¸­ã€‚</span><br><span class="line">export æœ‰ä¸‰ç§æ¨¡å¼ï¼š</span><br><span class="line">é»˜è®¤æ“ä½œæ˜¯ä»å°†æ–‡ä»¶ä¸­çš„æ•°æ®ä½¿ç”¨ INSERT è¯­å¥æ’å…¥åˆ°è¡¨ä¸­ã€‚</span><br><span class="line">æ›´æ–°æ¨¡å¼ï¼šSqoop å°†ç”Ÿæˆ UPDATE æ›¿æ¢æ•°æ®åº“ä¸­ç°æœ‰è®°å½•çš„è¯­å¥ã€‚</span><br><span class="line">è°ƒç”¨æ¨¡å¼ï¼šSqoop å°†ä¸ºæ¯æ¡è®°å½•åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹è°ƒç”¨ã€‚</span><br></pre></td></tr></table></figure><p>é»˜è®¤æ¨¡å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sqoop export \</span><br><span class="line">--connect jdbc:mysql://node-1:3306/userdb \</span><br><span class="line">--username root \</span><br><span class="line">--password hadoop \</span><br><span class="line">--table employee1 \</span><br><span class="line">--export-dir /emp_data/</span><br><span class="line"></span><br><span class="line">æ³¨æ„å¯¼å‡ºåˆ°mysqlæ•°æ®åº“æ—¶å€™éœ€è¦å…ˆå»ºè¡¨ï¼Œç„¶åå¯¼å‡º</span><br></pre></td></tr></table></figure><p>é»˜è®¤é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ç›¸å…³é…ç½®å‚æ•°</span><br><span class="line">--input-fields-terminated-by &#x27;\t&#x27;</span><br><span class="line">æŒ‡å®šæ–‡ä»¶ä¸­çš„åˆ†éš”ç¬¦</span><br><span class="line">--columns </span><br><span class="line">é€‰æ‹©åˆ—å¹¶æ§åˆ¶å®ƒä»¬çš„æ’åºã€‚å½“å¯¼å‡ºæ•°æ®æ–‡ä»¶å’Œç›®æ ‡è¡¨å­—æ®µåˆ—é¡ºåºå®Œå…¨ä¸€</span><br><span class="line">è‡´çš„æ—¶å€™å¯ä»¥ä¸å†™ã€‚å¦åˆ™ä»¥é€—å·ä¸ºé—´éš”é€‰æ‹©å’Œæ’åˆ—å„ä¸ªåˆ—ã€‚æ²¡æœ‰è¢«åŒ…å«åœ¨â€“</span><br><span class="line">columns åé¢åˆ—åæˆ–å­—æ®µè¦ä¹ˆå…·å¤‡é»˜è®¤å€¼ï¼Œè¦ä¹ˆå°±å…è®¸æ’å…¥ç©ºå€¼ã€‚å¦åˆ™æ•°æ®</span><br><span class="line">åº“ä¼šæ‹’ç»æ¥å— sqoop å¯¼å‡ºçš„æ•°æ®ï¼Œå¯¼è‡´ Sqoop ä½œä¸šå¤±è´¥</span><br><span class="line">--export-dir å¯¼å‡ºç›®å½•ï¼Œåœ¨æ‰§è¡Œå¯¼å‡ºçš„æ—¶å€™ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªå‚æ•°ï¼ŒåŒæ—¶éœ€è¦å…·</span><br><span class="line">å¤‡--table æˆ–--call å‚æ•°ä¸¤è€…ä¹‹ä¸€ï¼Œ--table æ˜¯æŒ‡çš„å¯¼å‡ºæ•°æ®åº“å½“ä¸­å¯¹åº”çš„è¡¨ï¼Œ</span><br><span class="line">--call æ˜¯æŒ‡çš„æŸä¸ªå­˜å‚¨è¿‡ç¨‹ã€‚</span><br><span class="line">--input-null-string --input-null-non-string</span><br><span class="line">å¦‚æœæ²¡æœ‰æŒ‡å®šç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯¹äºå­—ç¬¦ä¸²ç±»å‹çš„åˆ—æ¥è¯´ï¼Œâ€œNULLâ€è¿™ä¸ªå­—ç¬¦</span><br><span class="line">ä¸²å°±å›è¢«ç¿»è¯‘æˆç©ºå€¼ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ— è®ºæ˜¯â€œNULLâ€å­—ç¬¦ä¸²è¿˜</span><br><span class="line">æ˜¯è¯´ç©ºå­—ç¬¦ä¸²ä¹Ÿå¥½ï¼Œå¯¹äºéå­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µæ¥è¯´ï¼Œè¿™ä¸¤ä¸ªç±»å‹çš„ç©ºä¸²éƒ½ä¼š</span><br><span class="line">è¢«ç¿»è¯‘æˆç©ºå€¼ã€‚æ¯”å¦‚ï¼š</span><br><span class="line">--input-null-string &quot;\\N&quot; --input-null-non-string &quot;\\N&quot;</span><br></pre></td></tr></table></figure><p><a href="file:///E:/å¤§æ•°æ®èµ„æ–™/é»‘é©¬ç¨‹åºå‘˜/Apache Sqoopèµ„æ–™/è®²ä¹‰sqoop/Apache Sqoop.pdf">Apache Sqoop.pdf</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn logs -applicationId application_1666744533757_0006</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
